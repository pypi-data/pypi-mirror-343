const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TransactionsChart-tn61mAYQ.js","assets/react-C1sqhVEE.js","assets/Settings-C7_TiiRH.js","assets/echarts-gihz4qUC.js","assets/ui-cEB64NN_.js","assets/SummaryPerformancesChart-OzCrtNOE.js","assets/index-A9aNqrh5.js","assets/syntaxHighlighter-BYmwskbH.js","assets/reactQuery-CcoxLypZ.js","assets/reactRouter-Coe4P0QT.js","assets/dateFns-DhBcwMxz.js","assets/index-2zm4Wd4K.css","assets/SummaryRateChart-BltGbT3l.js"])))=>i.map(i=>d[i]);
import{r as l,a as u}from"./react-C1sqhVEE.js";import{H as _}from"./Helmet-BnirHtJg.js";import{d as p,O as d,e as b,P as f,a as C,c as E}from"./Pane-sE8CtAc8.js";import{u as A}from"./useSystemSettingsQuery-D8pEKs17.js";import{u as S}from"./reactQuery-CcoxLypZ.js";import{n as m,u as N,T as k,L as O,S as D,c as H}from"./index-A9aNqrh5.js";import{j as t,c as z}from"./ui-cEB64NN_.js";import{_ as v}from"./syntaxHighlighter-BYmwskbH.js";import{L as R}from"./reactRouter-Coe4P0QT.js";import"./sentry-BKSdz562.js";import"./dateFns-DhBcwMxz.js";function B({title:e,titleId:a,...n},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},n),e?l.createElement("title",{id:a},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const h=l.forwardRef(B),I=m.button(({isCurrent:e=!1})=>[{position:"relative"},{marginLeft:"-1px"},{paddingLeft:"0.75rem",paddingRight:"0.75rem",paddingTop:"0.5rem",paddingBottom:"0.5rem"},{display:"inline-flex",alignItems:"center"},{"--tw-ring-offset-shadow":"var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)","--tw-ring-shadow":"var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color)",boxShadow:"var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)","--tw-ring-inset":"inset","--tw-ring-opacity":"1","--tw-ring-color":"rgb(209 213 219 / var(--tw-ring-opacity, 1))"},{fontSize:"0.875rem",lineHeight:"1.25rem",fontWeight:"600"},e?{"--tw-bg-opacity":"1",backgroundColor:"rgb(21 164 233 / var(--tw-bg-opacity, 1))","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity, 1))",":focus-visible":{outlineColor:"#3b82f6"}}:{"--tw-bg-opacity":"1",backgroundColor:"rgb(255 255 255 / var(--tw-bg-opacity, 1))","--tw-text-opacity":"1",color:"rgb(17 24 39 / var(--tw-text-opacity, 1))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgb(249 250 251 / var(--tw-bg-opacity, 1))"}},{":focus":{zIndex:"10"}}]);function j({buttonProps:e,current:a,setCurrent:n}){return t("span",{className:"isolate inline-flex rounded-md shadow-sm"},e.map(o=>{const{key:r,title:i}=o;return t(I,{onClick:()=>{n(r)},key:r,type:"button",isCurrent:r===a},i)}))}function F(e=void 0,a=void 0){const n=N();let o="/overview";const r=new URLSearchParams;return e&&r.append("endpoint",e),a&&r.append("timeRange",a),r.toString()&&(o+=`?${r.toString()}`),S(["overview",e,a],()=>n.fetch(o).then(i=>i.json()))}const Q=l.lazy(()=>v(()=>import("./TransactionsChart-tn61mAYQ.js"),__vite__mapDeps([0,1,2,3,4]))),M=l.lazy(()=>v(()=>import("./SummaryPerformancesChart-OzCrtNOE.js"),__vite__mapDeps([5,1,2,3,6,7,8,9,4,10,11]))),T=l.lazy(()=>v(()=>import("./SummaryRateChart-BltGbT3l.js"),__vite__mapDeps([12,1,2,3,4]))),V=({data:e,title:a,className:n})=>{const o=Math.trunc(e.meanDuration)/1e3,r=Math.trunc(e.meanTpdex),i=e.errors.rate.toLocaleString(void 0,{style:"percent",minimumFractionDigits:1});return t("div",{className:n},t("div",{className:"flex"},t("div",{className:"flex flex-col max-w-60"},t(p,null,a),t("div",{className:"flex self-center"},t(k,{score:r,size:"xl"},t("div",{className:"text-xs font-normal text-right"},e.timeRange," average"))),t("div",{className:"grid grid-cols-2 text-xs text-left align-text-bottom items-center self-center ml-10 mt-10"},t("span",{className:"font-bold"},"Mean duration:"),t("span",null,o," s"),t("span",{className:"font-bold"},"Errors:"),t("span",null,i))),t("div",{className:"grow h-full"},t(Q,{data:e.transactions,timeRange:e.timeRange}))))},y=({endpoint:e,title:a,className:n,timeRange:o})=>{const r=F(e,o);return t(d,{query:r,queries:[r,r],fallback:t(O,{style:{height:"300px"}})},i=>t(V,{data:i.data,title:a,className:n}))},W=[{key:"1h",title:"1 hour"},{key:"24h",title:"24 hours"},{key:"7d",title:"7 days"},{key:"1m",title:"1 month"}],$=()=>{const e=A(),[a,n]=l.useState("7d"),o=r=>{n(r)};return t(u.Fragment,null,t("div",{className:"flex justify-end my-2"},t(b,{className:"grow"},"History"),t(j,{buttonProps:W,current:a,setCurrent:o})),t(f,{className:"mb-4"},t(y,{title:"Transactions",timeRange:a})),t(d,{query:e},r=>{var w;const c=(w=r.data.proxy.endpoints)==null?void 0:w.map(g=>g.name);return t("div",{className:"grid grid-cols-2 gap-4"},c&&(c==null?void 0:c.length)>1&&c.map((g,P)=>t(f,{key:P},t(y,{endpoint:g,title:g,timeRange:a}))))}))};function x(){const e=N();return S(["overview","summary"],()=>e.fetch("/overview/summary").then(a=>a.json()))}const s=Object.assign(m(f)(()=>[{position:"relative",height:"15rem",overflow:"hidden"}]),{Title:m.div(()=>[{display:"flex",alignItems:"flex-start"}]),Link:m(R)(()=>[{zIndex:"10",marginLeft:"0.25rem",marginRight:"0.25rem",whiteSpace:"nowrap",paddingLeft:"0.5rem",paddingRight:"0.5rem",fontSize:"0.75rem",lineHeight:"1.75rem",fontWeight:"500","--tw-text-opacity":"1",color:"rgb(156 163 175 / var(--tw-text-opacity, 1))"},z`
        > svg {
          ${{display:"inline-block",height:"0.75rem",width:"0.75rem"}}
        }
      `]),Badge:m.div(()=>[{position:"relative",zIndex:"10",display:"inline-flex",flexDirection:"column",alignItems:"flex-start",alignSelf:"center"}]),AbsoluteChart:m.div(()=>[{position:"absolute",left:"0px",top:"0px",height:"100%",width:"100%"}])});function L({rate:e,period:a,className:n}){return t(s.Badge,null,t(D,{className:H("bg-white ring-1",n),size:"xl",color:"black"},e," ",t("span",{className:"font-light"},"/",a),t("div",{className:"text-xs font-normal text-gray-500 text-right"},"24h average")))}function q(){const e=x();return t(s,null,t(s.Title,null,t(p,null,"Performances (24h)"),t(s.Link,{to:"/transactions"},t(h,null),"details")),t(d,{query:e},a=>t(u.Fragment,null,t(s.Badge,null,t(k,{score:a.data.tpdex.mean,size:"xl",className:"ring-1 ring-white"},t("div",{className:"text-xs font-normal text-right"},"24h average"))),t(s.AbsoluteChart,null,t(M,{data:a.data.tpdex.data})))))}function G(){const e=x();return t(s,null,t(s.Title,null,t(p,null,"Transactions (24h)"),t(s.Link,{to:"/transactions"},t(h,null),"details")),t(d,{query:e},a=>t(u.Fragment,null,t(L,{className:"ring-blue-200",rate:a.data.transactions.rate,period:a.data.transactions.period}),t(s.AbsoluteChart,null,t(T,{data:a.data.transactions.data,color:"#ADD8E6"})))))}function J(){const e=x();return t(s,null,t("div",{className:"flex items-start "},t(p,null,"Errors (24h)"),t(R,{to:"/transactions?status=5xx&status=ERR",className:"leading-7 text-gray-400 mx-1 font-medium text-xs px-2"},t(h,{className:"h-3 w-3 inline-block"}),"details")),t(d,{query:e},a=>t(u.Fragment,null,t(L,{className:"ring-red-200",rate:a.data.errors.rate,period:a.data.errors.period}),t(s.AbsoluteChart,null,t(T,{data:a.data.errors.data,color:"#e6b3ad"})))))}const U=()=>t(u.Fragment,null,t(b,null,"Summary"),t("div",{className:"grid grid-cols-3 gap-4 mb-8"},t(q,null),t(G,null),t(J,null))),it=()=>t(E,{title:t(C,{title:"Overview"})},t(_,null,t("title",null,"Overview | HARP"),t("meta",{name:"description",content:"Overview page"})),t(U,null),t($,null));export{it as default};
