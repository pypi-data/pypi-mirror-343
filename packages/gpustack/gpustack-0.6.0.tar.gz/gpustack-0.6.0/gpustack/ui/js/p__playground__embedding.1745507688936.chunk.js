"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3856],{16204:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(26068),i=t.n(r),a=t(48305),l=t.n(a),s=t(67825),o=t.n(s),c=t(43943),u=t(23333),d=t(76808),f=t(32699),p=t(50959),m=t(38780),h=t(11527),x=function(e){var n=e.isOverflowing,t=e.showTitle,r=e.title,i=e.children,a=(0,m.Z)().initialize,l=p.useRef(null);return p.useEffect((function(){l.current&&a(l.current)}),[a,l.current]),(0,h.jsx)("div",{style:{maxHeight:200,overflowY:"auto"},ref:l,children:(0,h.jsx)("div",{style:{width:"fit-content",maxWidth:"var(--width-tooltip-max)",paddingInline:8},children:n||t?r||i:""})})},v=p.memo(x),g=["children","maxWidth","minWidth","ghost","title","showTitle","tooltipProps"],b=function(e){var n=e.children,t=e.maxWidth,r=void 0===t?"100%":t,a=e.minWidth,s=e.ghost,m=void 0!==s&&s,x=e.title,b=e.showTitle,y=void 0!==b&&b,j=e.tooltipProps,w=o()(e,g),C=(0,p.useRef)(null),N=(0,p.useState)(!1),Z=l()(N,2),S=Z[0],k=Z[1],z=(0,p.useRef)(null),M=(0,p.useCallback)((function(){if(C.current){var e=C.current,n=e.scrollWidth,t=e.clientWidth;k(n>t)}}),[C.current]);(0,p.useEffect)((function(){var e,n,t=C.current;if(t)return null===(e=z.current)||void 0===e||e.disconnect(),z.current=new ResizeObserver((function(){M()})),null===(n=z.current)||void 0===n||n.observe(t),M(),function(){var e;null===(e=z.current)||void 0===e||e.disconnect(),z.current=null}}),[M]),(0,p.useEffect)((function(){var e=(0,f.throttle)(M,200);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),e.cancel()}}),[M]),(0,p.useEffect)((function(){M()}),[n,M]);var R=(0,p.useMemo)((function(){return i()({maxWidth:r,minWidth:a,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},w.style)}),[r,w.style]);return(0,h.jsx)(u.Z,i()(i()({overlayInnerStyle:{paddingInline:0},destroyTooltipOnHide:!1,title:!(!S&&!y)&&(0,h.jsx)(v,{isOverflowing:S,title:x,showTitle:y,children:n})},j),{},{children:m?(0,h.jsx)("div",{ref:C,style:R,"data-overflow":S,children:n}):(0,h.jsx)(d.Z,i()(i()({},w),{},{ref:C,style:i()(i()({},R),{},{paddingInline:w.closable?"8px 22px":8,borderRadius:12}),closeIcon:!!w.closable&&(0,h.jsx)(c.Z,{style:{position:"absolute",right:8,top:6}}),children:n}))}))},y=p.memo(b)},13636:function(e,n,t){t.d(n,{Z:function(){return N}});var r=t(32699),i=t(50959),a=t(16222),l=t(13916),s=t(25620),o=t(953),c=t(4853),u=t(22241),d=t(99182),f=t(2177),p=t(19090),m=t(8725),h=t(62493),x=t(56031),v=t(7119),g=t(56262),b=t(83616),y=t(19175);x.D([c.N,u.N,d.N,f.N,p.N,m.N,h.N,a.N,l.N,s.N,o.N,g.T,b.z,y.N]);var j=v,w=t(11527),C=(0,i.forwardRef)((function(e,n){var t=e.options,a=e.width,l=e.height,s=(0,i.useRef)(null),o=(0,i.useRef)(),c=(0,i.useRef)(!1),u=(0,i.useRef)();(0,i.useImperativeHandle)(n,(function(){return{chart:o.current}}));var d=(0,i.useCallback)((function(){var e;s.current&&(null===(e=o.current)||void 0===e||e.clear(),o.current=j.init(s.current))}),[]),f=(0,i.useCallback)((function(){var e;null===(e=o.current)||void 0===e||e.resize()}),[]),p=(0,i.useCallback)((function(e){var n,t;null===(n=o.current)||void 0===n||n.clear(),null===(t=o.current)||void 0===t||t.setOption(e,{notMerge:!0,lazyUpdate:!0})}),[]);return(0,i.useEffect)((function(){return s.current&&d(),function(){var e;null===(e=o.current)||void 0===e||e.dispose()}}),[d]),(0,i.useEffect)((function(){c.current=!1,f(),p(t),c.current=!0}),[t]),(0,i.useEffect)((function(){var e=(0,r.throttle)((function(){var e;c.current&&(null===(e=o.current)||void 0===e||e.resize())}),100);return s.current&&(u.current=new ResizeObserver(e),u.current.observe(s.current)),function(){var e;s.current&&(null===(e=u.current)||void 0===e||e.unobserve(s.current))}}),[]),(0,w.jsx)("div",{className:"chart-wrapper",style:{width:a,height:l},children:(0,w.jsx)("div",{ref:s,style:{width:a,height:l}})})})),N=C},29220:function(e,n,t){t.d(n,{Gl:function(){return o},Md:function(){return a},Rf:function(){return c},TN:function(){return u},eC:function(){return l},j3:function(){return s},tN:function(){return d},yy:function(){return p},zt:function(){return f}});var r=t(32699),i="rgba(0, 0, 0, 0.4)",a={trigger:"axis",formatter:function(e,n){var t='<span class="tooltip-x-name">'.concat(e[0].axisValue,"</span>");return e.forEach((function(e){var i=(0,r.isFunction)(n)?null==n?void 0:n(e.data.value):e.data.value;t+='<span class="tooltip-item">\n     <span class="tooltip-item-name">\n       <span style="display:inline-block;margin-right:5px;border-radius:8px;width:8px;height:8px;background-color:'.concat(e.color,';"></span>\n       <span class="tooltip-title">').concat(e.seriesName,'</span>:\n     </span>\n      <span class="tooltip-value">').concat(i,"</span>\n      </span>")})),'<div class="tooltip-wrapper">'.concat(t,"</div>")}},l={left:0,right:20,bottom:20,containLabel:!0},s={itemWidth:8,itemHeight:8},o={type:"category",axisTick:{show:!0,lineStyle:{color:"rgba(217,217,217,0.5)"}},axisLabel:{color:i,fontSize:12},axisLine:{show:!1}},c={nameTextStyle:{padding:[0,0,0,-20]},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisLabel:{color:i,fontSize:12,formatter:function(e){return"number"!=typeof e||isNaN(e)?e:e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e}},axisTick:{show:!1},type:"value"},u={show:!0,left:"center",textStyle:{fontSize:12,color:"#000"},text:""},d={type:"bar",barMaxWidth:20,barMinWidth:8,barGap:"30%",barCategoryGap:"50%"},f={type:"line",smooth:!0,showSymbol:!1,itemStyle:{},lineStyle:{width:1.5,opacity:.7}},p={type:"gauge",radius:"88%",center:["50%","65%"],startAngle:190,endAngle:-10,min:0,max:100,splitNumber:5,progress:{show:!0,roundCap:!1,width:12},pointer:{length:"80%",width:4,itemStyle:{color:"auto"}},axisLine:{roundCap:!1,lineStyle:{width:12,color:[[.5,"rgba(84, 204, 152, 80%)"],[.8,"rgba(250, 173, 20, 80%)"],[1,"rgba(255, 77, 79, 80%)"]]}},axisTick:{distance:-12,length:6,splitNumber:5,lineStyle:{width:1.5,color:"rgba(255, 255, 255, 1)"}},splitLine:{distance:-12,length:12,lineStyle:{width:1.5,color:"rgba(255, 255, 255, 1)"}},axisLabel:{distance:14,color:"rgba(0, 0, 0, .5)",fontSize:12},detail:{lineHeight:40,height:40,offsetCenter:[5,30],valueAnimation:!1,fontSize:20,color:"rgba(0, 0, 0, 0.88)",formatter:function(e){return"{value|"+e+"}{unit|%}"},rich:{value:{fontSize:16,fontWeight:"500",color:"rgba(0, 0, 0, 0.88)"},unit:{fontSize:14,color:"rgba(0, 0, 0, 0.88)",fontWeight:"500",padding:[0,0,0,2]}}}}},30396:function(e,n,t){var r=t(23010),i=(t(50959),t(11527));n.Z=function(e){var n=e.height,t=e.title;return(0,i.jsxs)("div",{style:{width:"100%",height:n||"100%"},className:"flex-center  flex-column ",children:[t&&(0,i.jsx)("h3",{className:"justify-center font-size-12",style:{padding:"4px 0",marginBottom:0},children:t}),(0,i.jsx)("div",{className:"flex-center justify-center flex-column",style:{height:"100%"},children:(0,i.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE})})]})}},4286:function(e,n,t){t.r(n),t.d(n,{default:function(){return fe}});var r=t(90228),i=t.n(r),a=t(87999),l=t.n(a),s=t(48305),o=t.n(s),c=t(49280),u=t(82344),d=t(57989),f=t(67581),p=t(38551),m=t(54235),h=t(85885),x=t(82187),v=t.n(x),g=t(32699),b=t.n(g),y=t(50959),j=t(94299),w=t(91082),C=t(15558),N=t.n(C),Z=t(26068),S=t.n(Z),k=t(58573),z=t(13636),M=t(29220),R=t(30396),L=t(11527),T={animation:!1,grid:S()(S()({},M.eC),{},{right:10,top:10,bottom:2,left:2,containLabel:!0,borderRadius:4}),xAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:15,splitLine:{lineStyle:{color:"#F2F2F2"}},axisLine:{show:!0,lineStyle:{color:"#DCDCDC"}},axisTick:{show:!1},axisLabel:{show:!0},boundaryGap:[.05,.05]},yAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:10,boundaryGap:[.05,.05],splitLine:{lineStyle:{color:"#F2F2F2"}},axisLine:{show:!0,lineStyle:{color:"#DCDCDC"}},axisTick:{show:!1},axisLabel:{show:!0}},symbol:"roundRect",label:{show:!0,shadowColor:"none",textBorderColor:"none",formatter:function(e){return e.name}},series:[]},I=function(e){var n=e.seriesData,t=e.xAxisData,r=e.height,i=e.width,a=e.showEmpty,l=e.title,s=(0,y.useRef)(null),c=(0,y.useCallback)((function(e,n){for(var t,r=[],i=null===(t=s.current.chart)||void 0===t?void 0:t.convertToPixel("grid",n.value),a=o()(i,2),l=a[0],c=a[1],u=e.map((function(e){var n;return S()(S()({},e),{},{value:null===(n=s.current.chart)||void 0===n?void 0:n.convertToPixel("grid",e.value)})})),d=0;d<u.length;d++)if(n.name!==u[d].name){var f=o()(u[d].value,2),p=f[0],m=f[1];Math.sqrt(Math.pow(b().round(p-l,2),2)+Math.pow(b().round(m-c,2),2))<=16&&r.push(S()({},u[d]))}else r.push(S()({},u[d]));return r}),[]),u=(0,y.useCallback)((function(e){if(!e.length||e.length<2)return null;return function(e){var n;return'<span class="tooltip-item-name">\n               <span style="display:flex;justify-content:center;align-items: center;color:#fff;\n               margin-right:0;border-radius:4px;width:14px;\n               height:14px;background-color:'.concat(null==e||null===(n=e.itemStyle)||void 0===n?void 0:n.color,';"\n               >').concat(e.name,"</span>\n             </span>")}}),[]),d=(0,y.useMemo)((function(){var e=n.map((function(e,n){return S()(S()({},e),{},{itemStyle:{color:"#5470c6"},symbolSize:16})}));return S()(S()({},T),{},{tooltip:{trigger:"item",borderWidth:0,formatter:function(n,t){var r=c(e,n.data),i="",a=u(r);return r.forEach((function(e){i+='\n            <span class="tooltip-item" style="justify-content: flex-start;">\n             '.concat(a?a(e):"",'\n             <span class="tooltip-value">').concat(e.text,"</span>\n            </span>")})),'<div class="tooltip-wrapper">'.concat(i,"</div>")}},title:S()(S()({},M.TN),{},{text:l}),series:{type:"scatter",labelLayout:{hideOverlap:!0},data:e}})}),[n,t,l,c]);return(0,L.jsx)(L.Fragment,{children:!n.length&&a?(0,L.jsx)(R.Z,{height:r,title:l}):(0,L.jsx)(z.Z,{ref:s,height:r,options:d,width:i||"100%"})})},P=(0,y.memo)(I),E=t(43585),A=t(90343),O=t(38780),_=t(59995),D=t(34155),G=t(19019),W=t(51076),F=t(77353),H=t(66668),K=t(68476),V=t(23333),U=t(83603),Y=t(96938),B=t(54876),J=t(47946),$=t(98227),q=(t(99951),t(2139)),X=t(1731),Q=t(26174),ee=t(24662),ne=(t(29031),t(32314),t(39616)),te=t(58849),re=t(16204),ie=t(25906),ae=t(69070),le=function(e){var n=e.textListCount,t=e.fileList,r=e.ghost,i=e.showIcon,a=void 0===i||i,l=e.onDelete,s=(0,p.useIntl)();return(0,L.jsx)("div",{className:"file-list",children:t.map((function(e,t){return(0,L.jsxs)("div",{className:v()("file-item",{ghost:r}),children:[(0,L.jsxs)("span",{className:"title",children:[(0,L.jsxs)("span",{className:"m-r-5",children:[t+1+n,"."]}),a&&(0,L.jsx)(ie.Z,{className:"m-r-5"}),(0,L.jsxs)(re.Z,{ghost:!0,children:[" ",e.name]})]}),l&&(0,L.jsx)(V.Z,{title:s.formatMessage({id:"common.button.delete"}),children:(0,L.jsx)(h.ZP,{danger:!0,size:"small",type:"text",className:"delete-btn",icon:(0,L.jsx)(ae.Z,{}),onClick:function(){return l(e.uid)}})})]},e.uid)}))})},se=y.memo(le),oe=t(63057),ce=t(91860),ue=(0,y.forwardRef)((function(e,n){var t=e.modelList,r=(0,y.useRef)(0),a=(0,p.useIntl)(),s=(0,_.Z)(),u=(0,y.useState)(!1),d=o()(u,2),f=d[0],m=d[1],x=(0,y.useState)(!1),g=o()(x,2),j=g[0],C=g[1],Z=(0,y.useState)(null),z=o()(Z,2),M=z[0],R=z[1],T=(0,y.useState)(!1),I=o()(T,2),re=I[0],ie=I[1],ae=(0,y.useRef)(""),le=(0,y.useRef)(null),ue=(0,y.useRef)(null),de=(0,y.useRef)(0),fe=(0,y.useRef)(null),pe=(0,y.useState)([]),me=o()(pe,2),he=me[0],xe=me[1],ve=(0,y.useState)("chart"),ge=o()(ve,2),be=ge[0],ye=ge[1],je=(0,y.useState)(180),we=o()(je,2),Ce=we[0],Ne=we[1],Ze=(0,y.useState)({code:"",copyValue:""}),Se=o()(Ze,2),ke=Se[0],ze=Se[1],Me=(0,y.useState)(!1),Re=o()(Me,2),Le=Re[0],Te=Re[1],Ie=(0,y.useRef)(!0),Pe=(0,y.useRef)(null),Ee=(0,y.useState)([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),Ae=o()(Ee,2),Oe=Ae[0],_e=Ae[1],De=(0,y.useState)([]),Ge=o()(De,2),We=Ge[0],Fe=Ge[1],He=(0,y.useRef)(null),Ke=(0,O.Z)(),Ve=Ke.initialize,Ue=Ke.updateScrollerPosition,Ye=(0,ee.X)({modelList:t,isChat:!0},{defaultValues:{},defaultParamsConfig:[],metaKeys:Q.m4}),Be=Ye.handleOnValuesChange,Je=Ye.formRef,$e=Ye.paramsConfig,qe=Ye.initialValues,Xe=Ye.parameters,Qe=Ye.paramsRef,en=Ye.modelMeta,nn=Ye.formFields;(0,y.useImperativeHandle)(n,(function(){return{viewCode:function(){m(!0)},setCollapse:function(){ie(!re)}}}));var tn=(0,y.useMemo)((function(){return function(e){var n=e.api,t=e.parameters,r=window.location.origin,i=n.replace(w.Mo,w.ZG),a="\ncurl ".concat(r).concat(i,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\\n').concat((0,ne.Yy)(t,!1)).trim(),l='\nfrom openai import OpenAI\n\nclient = OpenAI(\n  base_url="'.concat(r,"/").concat(w.ZG,'", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.embeddings.create(\n').concat((0,ne.G4)(S()({},t)),")\n\nprint(response.data[0].embedding)").trim(),s=(0,ne.GT)(S()({},t));return{curlCode:a,pythonCode:l,nodeJsCode:'\nconst OpenAI = require("openai");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(r,"/").concat(w.ZG,'"\n});\n\nasync function main() {\n  const params = ').concat(s,"; \n  const response = await openai.embeddings.create(params);\n  console.log(response.data[0].embedding);\n}\nmain();").trim()}}({api:w.d8,parameters:S()(S()({},b().pick(Xe,["model"].concat(N()(b().split(nn,","))))),{},{input:[].concat(N()(Oe.map((function(e){return e.text})).filter((function(e){return e}))),N()(he.map((function(e){return e.text})).filter((function(e){return e}))))})})}),[Xe,nn,Oe,he]),rn=(0,y.useMemo)((function(){return[].concat(N()(Oe),N()(he)).length<2}),[Oe,he]),an=(0,y.useCallback)((function(e){try{var n=e.map((function(e){return e.embedding})),t=new $._(n).predict(n,{nComponents:2}).to2DArray(),r=[].concat(N()(Oe.map((function(e){return e.text})).filter((function(e){return e}))),N()(he.map((function(e){return e.text})).filter((function(e){return e})))),i=t.map((function(e,n){return{value:e,name:n+1,text:r[n]}}));Fe(i);var a=e.map((function(e,n){var t=b().cloneDeep(e);return t.embedding=t.embedding.slice(0,5),t.embedding.push(null),t}));ze({code:JSON.stringify(a,null,2).replace(/null/g,"..."),copyValue:JSON.stringify(e,null,2)})}catch(e){}}),[Oe,he]),ln=function(){var e=l()(i()().mark((function e(n){var t,a,l,o,c,u,d,f;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=Je.current)||void 0===t?void 0:t.form.validateFields();case 3:if(Xe.model){e.next=5;break}return e.abrupt("return");case 5:if(o=Oe.filter((function(e){return e.text})),c=he.filter((function(e){return e.text})),!((u=[].concat(N()(o.map((function(e){return e.text}))),N()(c.map((function(e){return e.text}))))).length<2)){e.next=11;break}return Te(!0),e.abrupt("return");case 11:return _e(o),xe(c),Te(!1),C(!0),r.current=r.current+1,R(null),null===(a=fe.current)||void 0===a||null===(l=a.cancel)||void 0===l||l.call(a),fe.current=s(),ae.current=(null==n?void 0:n.content)||"",e.next=22,(0,w.xO)({model:Xe.model,encoding_format:"float",input:u},{token:fe.current.token});case 22:d=e.sent,R(d.usage),f=d.data||[],an(f),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),R({error:!0,errorMessage:(0,X.Yo)(e.t0.response)});case 31:return e.prev=31,C(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[0,28,31,34]])})));return function(n){return e.apply(this,arguments)}}(),sn=(0,y.useCallback)((function(e){Pe.current=e}),[]),on=(0,y.useCallback)((function(e,n){if(Ie.current){var t=e.clipboardData.getData("text");if(t){Oe[n].text;var r,i,a=t.split("\n").map((function(e){var n;return{text:null==e?void 0:e.trim(),uid:null===(n=ue.current)||void 0===n?void 0:n.setMessageId(),name:""}}));a[0].text="".concat((null===(r=Pe.current)||void 0===r?void 0:r.beforeText)||"").concat(a[0].text).concat((null===(i=Pe.current)||void 0===i?void 0:i.afterText)||"");var l=[].concat(N()(Oe.slice(0,n)),N()(a),N()(Oe.slice(n+1))).filter((function(e){return e.text})).map((function(e,n){var t;return S()(S()({},e),{},{uid:null===(t=ue.current)||void 0===t?void 0:t.setMessageId()})}));_e(l)}}}),[Oe]),cn=(0,y.useMemo)((function(){return null!=en&&en.n_ctx&&null!=en&&en.n_slot?(0,L.jsx)(K.Z.Item,{children:(0,L.jsx)(A.Z,{disabled:!0,label:"Max Tokens",value:b().divide(null==en?void 0:en.n_ctx,null==en?void 0:en.n_slot)})}):[]}),[en]),un=(0,y.useMemo)((function(){return[{key:"chart",label:"Chart",children:(0,L.jsx)(P,{seriesData:We,height:Ce,width:"100%",xAxisData:[]})},{key:"json",label:"JSON",children:(0,L.jsx)("div",{style:{padding:10,backgroundColor:"#fafafa"},children:(0,L.jsx)(E.Z,{height:Ce-20,theme:"light",code:ke.code,copyValue:ke.copyValue,lang:"json",copyable:!0,style:{marginBottom:0}})})}]}),[Ce,We,ke]),dn=(0,y.useCallback)((function(e,n){e.model&&(Fe([]),R(null)),Be(e,n)}),[]);return(0,y.useEffect)((function(){le.current&&Ve(le.current)}),[Ve]),(0,y.useEffect)((function(){Oe.length+he.length>de.current&&Ue(),de.current=Oe.length+he.length}),[Oe.length,he.length]),(0,L.jsxs)("div",{className:"ground-left-wrapper rerank",children:[(0,L.jsxs)("div",{className:"ground-left",children:[(0,L.jsx)("div",{className:"center",ref:le,style:{height:"auto",maxHeight:"100%"},children:(0,L.jsxs)("div",{className:"documents",children:[(0,L.jsxs)("div",{className:"flex-between m-b-8 doc-header",children:[(0,L.jsx)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-0",children:(0,L.jsx)("div",{className:"flex gap-20",children:(0,L.jsx)("span",{children:a.formatMessage({id:"playground.embedding.documents"})})})}),(0,L.jsxs)("div",{className:"flex-center gap-10",children:[(0,L.jsx)(V.Z,{title:a.formatMessage({id:"playground.input.multiplePaste.tips"}),children:(0,L.jsxs)(U.Z,{defaultChecked:Ie.current,onChange:function(e){Ie.current=e.target.checked},children:[a.formatMessage({id:"playground.input.multiplePaste"}),(0,L.jsx)(D.Z,{className:"m-l-4"})]})}),(0,L.jsxs)(h.ZP,{size:"middle",onClick:function(){var e;null===(e=ue.current)||void 0===e||e.handleAdd()},children:[(0,L.jsx)(G.Z,{}),a.formatMessage({id:"playground.embedding.addtext"})]}),(0,L.jsx)(h.ZP,{icon:(0,L.jsx)(W.Z,{}),size:"middle",disabled:j,onClick:function(){_e([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),xe([]),Fe([]),R(null),Te(!1),ze({code:"",copyValue:""})},children:a.formatMessage({id:"common.button.clear"})}),j?(0,L.jsx)(V.Z,{title:a.formatMessage({id:"common.button.stop"}),children:(0,L.jsx)(h.ZP,{style:{width:60},size:"middle",type:"primary",onClick:function(){var e,n;null===(e=fe.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e),C(!1)},icon:(0,L.jsx)(c.Z,{type:"icon-stop1",className:"font-size-12"})})}):(0,L.jsx)(V.Z,{title:(0,L.jsx)("span",{children:a.formatMessage({id:"common.button.submit"})}),children:(0,L.jsx)(h.ZP,{size:"middle",type:"primary",disabled:rn,onClick:function(){ln()},icon:(0,L.jsx)(F.Z,{rotate:0,className:"font-size-14"}),style:{width:60}})})]})]}),(0,L.jsxs)("div",{className:"docs-wrapper",children:[(0,L.jsx)(oe.Z,{ref:ue,textList:Oe,onChange:function(e){_e(e)},onSelect:sn,onPaste:on}),(0,L.jsx)("div",{style:{marginTop:8},children:(0,L.jsx)(se,{fileList:he,textListCount:Oe.length||0,onDelete:function(e){xe((function(n){return n.filter((function(n){return n.uid!==e}))}))}})}),Le&&(0,L.jsx)(k.Z,{type:"danger",message:a.formatMessage({id:"playground.documents.verify.embedding"})})]})]})}),(0,L.jsxs)("div",{className:"ground-left-footer",style:{width:"100%",padding:"0 32px 16px"},children:[(0,L.jsxs)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-16",children:[(0,L.jsxs)("div",{className:"flex gap-20",children:[(0,L.jsxs)("span",{className:"flex-center",children:[a.formatMessage({id:"playground.embedding.output"}),(0,L.jsx)(V.Z,{title:(0,L.jsxs)("span",{className:"flex-column",children:[(0,L.jsxs)("span",{children:["1.",a.formatMessage({id:"playground.embedding.pcatips1"})]}),(0,L.jsxs)("span",{children:["2."," ",a.formatMessage({id:"playground.embedding.pcatips2"})]})]}),children:(0,L.jsx)(D.Z,{className:"m-l-4"})})]}),(0,L.jsx)(k.Z,{type:"danger",message:null==M?void 0:M.errorMessage})]}),(0,L.jsx)(Y.Z,{onChange:function(e){ye(e)},value:be,options:[{label:a.formatMessage({id:"playground.embedding.chart"}),value:"chart"},{label:"JSON",value:"json"}]})]}),(0,L.jsxs)("div",{className:"embed-chart",children:[j&&(0,L.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,L.jsx)(B.Z,{spinning:!0})}),(0,L.jsx)(q.e,{ref:He,enable:{top:!0},defaultSize:{height:180},handleComponent:{top:(0,L.jsx)(V.Z,{title:a.formatMessage({id:"playground.embedding.handler.tips"}),children:(0,L.jsx)(h.ZP,{size:"small",className:"drag-handler",color:"default",variant:"filled",icon:(0,L.jsx)(H.Z,{rotate:90,style:{fontSize:"var(--font-size-14)"}})})})},maxHeight:400,minHeight:180,onResize:function(){var e,n=null===(e=He.current)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.height;n&&Ne(n)},onResizeStop:function(e,n,t,r){r.height+Ce<=400&&r.height+Ce>=180&&Ne(r.height+Ce)},children:(0,L.jsx)("div",{style:{border:"1px solid var(--ant-color-border)",borderRadius:"var(--border-radius-base)",width:"100%"},className:"scatter ",children:(0,L.jsx)(J.Z,{defaultActiveKey:be,activeKey:be,centered:!0,renderTabBar:function(){return(0,L.jsx)(L.Fragment,{})},items:un})})})]})]})]}),(0,L.jsx)("div",{className:v()("params-wrapper",{collapsed:re}),ref:Qe,children:(0,L.jsx)("div",{className:"box",children:(0,L.jsx)(te.Z,{ref:Je,onValuesChange:dn,paramsConfig:$e,initialValues:qe,modelList:t,extra:cn})})}),(0,L.jsx)(ce.Z,{open:f,viewCodeContent:tn,onCancel:function(){m(!1)},title:a.formatMessage({id:"playground.viewcode"})})]})})),de=ue,fe=(t(64232),function(){var e=(0,p.useIntl)(),n=(0,y.useRef)(null),t=(0,y.useRef)(null),r=(0,y.useState)([]),a=o()(r,2),s=a[0],x=a[1],g=(0,y.useState)(!1),C=o()(g,2),N=C[0],Z=C[1],S=(0,y.useCallback)((function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.viewCode)||void 0===n||n.call(e)}),[t.current]),k=(0,y.useCallback)((function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e)}),[t.current]);(0,y.useEffect)((function(){var e=function(){var e=l()(i()().mark((function e(){var n,t,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={categories:d.Us.embedding,with_meta:!0},e.next=4,(0,w.nb)(n);case 4:return t=e.sent,r=b().map(t.data||[],(function(e){return{value:e.id,label:e.id,meta:e.meta}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var n=l()(i()().mark((function n(){var t,r,a;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([e()]);case 3:t=n.sent,r=o()(t,1),a=r[0],x(a),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),Z(!0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);return(0,j.y1)(u.ZP.RIGHT.join(","),(function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.setCollapse)||void 0===t||t.call(e)}),{preventDefault:!0}),(0,L.jsx)(f._z,{ghost:!0,header:{title:e.formatMessage({id:"menu.playground.embedding"}),style:{paddingInline:"var(--layout-content-header-inlinepadding)"},breadcrumb:{}},extra:(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(h.ZP,{size:"middle",onClick:S,icon:(0,L.jsx)(c.Z,{type:"icon-code",className:"font-size-16"}),children:e.formatMessage({id:"playground.viewcode"})}),(0,L.jsx)(h.ZP,{size:"middle",onClick:k,icon:(0,L.jsx)(c.Z,{type:"icon-a-layout6-line",className:"font-size-16"})})]},"buttons"),className:v()("playground-container chat"),children:(0,L.jsx)("div",{className:"play-ground",children:(0,L.jsx)("div",{className:"chat",children:(0,L.jsx)(de,{ref:t,modelList:s,loaded:N})})})})})}}]);