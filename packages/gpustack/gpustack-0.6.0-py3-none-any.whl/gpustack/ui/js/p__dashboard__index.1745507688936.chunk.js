"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4931],{48660:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(35453),r=n(50959),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},o=n(52273),l=function(e,t){return r.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:i}))};var s=r.forwardRef(l)},16204:function(e,t,n){n.d(t,{Z:function(){return y}});var a=n(26068),r=n.n(a),i=n(48305),o=n.n(i),l=n(67825),s=n.n(l),c=n(43943),d=n(23333),u=n(76808),m=n(32699),h=n(50959),g=n(38780),p=n(11527),f=function(e){var t=e.isOverflowing,n=e.showTitle,a=e.title,r=e.children,i=(0,g.Z)().initialize,o=h.useRef(null);return h.useEffect((function(){o.current&&i(o.current)}),[i,o.current]),(0,p.jsx)("div",{style:{maxHeight:200,overflowY:"auto"},ref:o,children:(0,p.jsx)("div",{style:{width:"fit-content",maxWidth:"var(--width-tooltip-max)",paddingInline:8},children:t||n?a||r:""})})},v=h.memo(f),x=["children","maxWidth","minWidth","ghost","title","showTitle","tooltipProps"],b=function(e){var t=e.children,n=e.maxWidth,a=void 0===n?"100%":n,i=e.minWidth,l=e.ghost,g=void 0!==l&&l,f=e.title,b=e.showTitle,y=void 0!==b&&b,w=e.tooltipProps,j=s()(e,x),S=(0,h.useRef)(null),_=(0,h.useState)(!1),k=o()(_,2),$=k[0],E=k[1],C=(0,h.useRef)(null),T=(0,h.useCallback)((function(){if(S.current){var e=S.current,t=e.scrollWidth,n=e.clientWidth;E(t>n)}}),[S.current]);(0,h.useEffect)((function(){var e,t,n=S.current;if(n)return null===(e=C.current)||void 0===e||e.disconnect(),C.current=new ResizeObserver((function(){T()})),null===(t=C.current)||void 0===t||t.observe(n),T(),function(){var e;null===(e=C.current)||void 0===e||e.disconnect(),C.current=null}}),[T]),(0,h.useEffect)((function(){var e=(0,m.throttle)(T,200);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),e.cancel()}}),[T]),(0,h.useEffect)((function(){T()}),[t,T]);var M=(0,h.useMemo)((function(){return r()({maxWidth:a,minWidth:i,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},j.style)}),[a,j.style]);return(0,p.jsx)(d.Z,r()(r()({overlayInnerStyle:{paddingInline:0},destroyTooltipOnHide:!1,title:!(!$&&!y)&&(0,p.jsx)(v,{isOverflowing:$,title:f,showTitle:y,children:t})},w),{},{children:g?(0,p.jsx)("div",{ref:S,style:M,"data-overflow":$,children:t}):(0,p.jsx)(u.Z,r()(r()({},j),{},{ref:S,style:r()(r()({},M),{},{paddingInline:j.closable?"8px 22px":8,borderRadius:12}),closeIcon:!!j.closable&&(0,p.jsx)(c.Z,{style:{position:"absolute",right:8,top:6}}),children:t}))}))},y=h.memo(b)},34649:function(e,t,n){var a=n(26068),r=n.n(a),i=n(67825),o=n.n(i),l=n(38551),s=n(8964),c=n(32699),d=n.n(c),u=n(50959),m=n(11527),h=["menu","trigger","placement","children"];t.Z=function(e){var t=e.menu,n=e.trigger,a=void 0===n?["hover"]:n,i=e.placement,c=void 0===i?"bottomRight":i,g=e.children,p=o()(e,h),f=(0,l.useIntl)(),v=(0,u.useMemo)((function(){var e;return null==t||null===(e=t.items)||void 0===e?void 0:e.map((function(e){return r()(r()({},d().omit(e,"locale")),{},{label:e.locale?f.formatMessage({id:e.label}):e.label})}))}),[null==t?void 0:t.items,f]);return(0,m.jsx)(s.Z,r()(r()({menu:{items:v,onClick:null==t?void 0:t.onClick},trigger:a,placement:c},p),{},{children:g}))}},13636:function(e,t,n){n.d(t,{Z:function(){return _}});var a=n(32699),r=n(50959),i=n(16222),o=n(13916),l=n(25620),s=n(953),c=n(4853),d=n(22241),u=n(99182),m=n(2177),h=n(19090),g=n(8725),p=n(62493),f=n(56031),v=n(7119),x=n(56262),b=n(83616),y=n(19175);f.D([c.N,d.N,u.N,m.N,h.N,g.N,p.N,i.N,o.N,l.N,s.N,x.T,b.z,y.N]);var w=v,j=n(11527),S=(0,r.forwardRef)((function(e,t){var n=e.options,i=e.width,o=e.height,l=(0,r.useRef)(null),s=(0,r.useRef)(),c=(0,r.useRef)(!1),d=(0,r.useRef)();(0,r.useImperativeHandle)(t,(function(){return{chart:s.current}}));var u=(0,r.useCallback)((function(){var e;l.current&&(null===(e=s.current)||void 0===e||e.clear(),s.current=w.init(l.current))}),[]),m=(0,r.useCallback)((function(){var e;null===(e=s.current)||void 0===e||e.resize()}),[]),h=(0,r.useCallback)((function(e){var t,n;null===(t=s.current)||void 0===t||t.clear(),null===(n=s.current)||void 0===n||n.setOption(e,{notMerge:!0,lazyUpdate:!0})}),[]);return(0,r.useEffect)((function(){return l.current&&u(),function(){var e;null===(e=s.current)||void 0===e||e.dispose()}}),[u]),(0,r.useEffect)((function(){c.current=!1,m(),h(n),c.current=!0}),[n]),(0,r.useEffect)((function(){var e=(0,a.throttle)((function(){var e;c.current&&(null===(e=s.current)||void 0===e||e.resize())}),100);return l.current&&(d.current=new ResizeObserver(e),d.current.observe(l.current)),function(){var e;l.current&&(null===(e=d.current)||void 0===e||e.unobserve(l.current))}}),[]),(0,j.jsx)("div",{className:"chart-wrapper",style:{width:i,height:o},children:(0,j.jsx)("div",{ref:l,style:{width:i,height:o}})})})),_=S},29220:function(e,t,n){n.d(t,{Gl:function(){return s},Md:function(){return i},Rf:function(){return c},TN:function(){return d},eC:function(){return o},j3:function(){return l},tN:function(){return u},yy:function(){return h},zt:function(){return m}});var a=n(32699),r="rgba(0, 0, 0, 0.4)",i={trigger:"axis",formatter:function(e,t){var n='<span class="tooltip-x-name">'.concat(e[0].axisValue,"</span>");return e.forEach((function(e){var r=(0,a.isFunction)(t)?null==t?void 0:t(e.data.value):e.data.value;n+='<span class="tooltip-item">\n     <span class="tooltip-item-name">\n       <span style="display:inline-block;margin-right:5px;border-radius:8px;width:8px;height:8px;background-color:'.concat(e.color,';"></span>\n       <span class="tooltip-title">').concat(e.seriesName,'</span>:\n     </span>\n      <span class="tooltip-value">').concat(r,"</span>\n      </span>")})),'<div class="tooltip-wrapper">'.concat(n,"</div>")}},o={left:0,right:20,bottom:20,containLabel:!0},l={itemWidth:8,itemHeight:8},s={type:"category",axisTick:{show:!0,lineStyle:{color:"rgba(217,217,217,0.5)"}},axisLabel:{color:r,fontSize:12},axisLine:{show:!1}},c={nameTextStyle:{padding:[0,0,0,-20]},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisLabel:{color:r,fontSize:12,formatter:function(e){return"number"!=typeof e||isNaN(e)?e:e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e}},axisTick:{show:!1},type:"value"},d={show:!0,left:"center",textStyle:{fontSize:12,color:"#000"},text:""},u={type:"bar",barMaxWidth:20,barMinWidth:8,barGap:"30%",barCategoryGap:"50%"},m={type:"line",smooth:!0,showSymbol:!1,itemStyle:{},lineStyle:{width:1.5,opacity:.7}},h={type:"gauge",radius:"88%",center:["50%","65%"],startAngle:190,endAngle:-10,min:0,max:100,splitNumber:5,progress:{show:!0,roundCap:!1,width:12},pointer:{length:"80%",width:4,itemStyle:{color:"auto"}},axisLine:{roundCap:!1,lineStyle:{width:12,color:[[.5,"rgba(84, 204, 152, 80%)"],[.8,"rgba(250, 173, 20, 80%)"],[1,"rgba(255, 77, 79, 80%)"]]}},axisTick:{distance:-12,length:6,splitNumber:5,lineStyle:{width:1.5,color:"rgba(255, 255, 255, 1)"}},splitLine:{distance:-12,length:12,lineStyle:{width:1.5,color:"rgba(255, 255, 255, 1)"}},axisLabel:{distance:14,color:"rgba(0, 0, 0, .5)",fontSize:12},detail:{lineHeight:40,height:40,offsetCenter:[5,30],valueAnimation:!1,fontSize:20,color:"rgba(0, 0, 0, 0.88)",formatter:function(e){return"{value|"+e+"}{unit|%}"},rich:{value:{fontSize:16,fontWeight:"500",color:"rgba(0, 0, 0, 0.88)"},unit:{fontSize:14,color:"rgba(0, 0, 0, 0.88)",fontWeight:"500",padding:[0,0,0,2]}}}}},30396:function(e,t,n){var a=n(23010),r=(n(50959),n(11527));t.Z=function(e){var t=e.height,n=e.title;return(0,r.jsxs)("div",{style:{width:"100%",height:t||"100%"},className:"flex-center  flex-column ",children:[n&&(0,r.jsx)("h3",{className:"justify-center font-size-12",style:{padding:"4px 0",marginBottom:0},children:n}),(0,r.jsx)("div",{className:"flex-center justify-center flex-column",style:{height:"100%"},children:(0,r.jsx)(a.Z,{image:a.Z.PRESENTED_IMAGE_SIMPLE})})]})}},62722:function(e,t,n){n.d(t,{f:function(){return f},Z:function(){return v}});var a=n(34649),r=n(16407),i=n(19019),o=n(69070),l=n(56838),s=n(38551),c=n(54235),d=n(85885),u=n(8267),m=n(84682),h=n(50959),g=n(11527),p=function(e){var t=e.left,n=e.right,a=e.marginBottom,r=void 0===a?0:a,i=e.marginTop,o=void 0===i?30:i,l=e.style,s=(0,h.useMemo)((function(){var e={};return e.marginBottom="".concat(r,"px"),e.marginTop="".concat(o,"px"),l&&Object.assign(e,l),e}),[r,o,l]);return(0,g.jsxs)("div",{className:"page-tools",style:s,children:[(0,g.jsx)("div",{className:"left",children:t}),(0,g.jsx)("div",{className:"right",children:n})]})},f=function(e){var t=e.handleInputChange,n=e.handleSelectChange,f=e.handleSearch,v=e.handleDeleteByBatch,x=e.handleClickPrimary,b=e.rowSelection,y=e.actionItems,w=e.selectOptions,j=e.showSelect,S=e.buttonText,_=e.buttonIcon,k=e.actionType,$=void 0===k?"button":k,E=e.marginBottom,C=void 0===E?10:E,T=e.marginTop,M=void 0===T?10:T,z=e.inputHolder,Z=void 0===z?"common.filter.name":z,D=e.selectHolder,N=e.showPrimaryButton,B=void 0===N||N,L=e.showDeleteButton,O=void 0===L||L,A=e.width,I=(0,s.useIntl)(),R=(0,h.useMemo)((function(){var e,t;return B||O?(0,g.jsxs)(c.Z,{size:20,children:["dropdown"===$?(0,g.jsx)(a.Z,{menu:{items:y,onClick:x},children:(0,g.jsx)(d.ZP,{icon:(0,g.jsx)(r.Z,{}),type:"primary",iconPosition:"end",children:S})}):(0,g.jsx)(d.ZP,{icon:null!=_?_:(0,g.jsx)(i.Z,{}),type:"primary",onClick:x,children:S}),(0,g.jsx)(d.ZP,{icon:(0,g.jsx)(o.Z,{}),danger:!0,onClick:v,disabled:!b.selectedRowKeys.length,children:(0,g.jsxs)("span",{children:[null==I||null===(e=I.formatMessage)||void 0===e?void 0:e.call(I,{id:"common.button.delete"}),b.selectedRowKeys.length>0&&(0,g.jsxs)("span",{children:["(",null===(t=b.selectedRowKeys)||void 0===t?void 0:t.length,")"]})]})})]}):null}),[y,$,null==b?void 0:b.selectedRowKeys,x,I]);return(0,g.jsx)(p,{marginBottom:C,marginTop:M,left:(0,g.jsxs)(c.Z,{children:[(0,g.jsx)(u.Z,{placeholder:I.formatMessage({id:Z}),style:{width:(null==A?void 0:A.input)||230},allowClear:!0,onChange:t}),j&&(0,g.jsx)(m.default,{allowClear:!0,showSearch:!1,placeholder:I.formatMessage({id:D}),style:{width:(null==A?void 0:A.select)||230},size:"large",onChange:n,options:w}),(0,g.jsx)(d.ZP,{type:"text",style:{color:"var(--ant-color-text-tertiary)"},onClick:f,icon:(0,g.jsx)(l.Z,{})})]}),right:R})},v=p},37963:function(e,t){t.Z={xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1600}},20369:function(e,t,n){n.d(t,{Kd:function(){return a},_W:function(){return o},iE:function(){return i},tb:function(){return l},zK:function(){return r}});var a={CREATE:"create",UPDATE:"update",VIEW:"view"},r={error:{text:"var(--ant-red-6)",bg:"var(--ant-red-1)"},warning:{text:"var(--ant-orange-6)",bg:"var(--ant-orange-1)"},transitioning:{text:"var(--ant-blue-6)",bg:"var(--ant-blue-1)"},success:{text:"var(--color-progress-green)",bg:"var(--color-green-fill-light)"},inactive:{text:"var(--ant-color-text-tertiary)",border:"rgba(200,200,200,1)",bg:"var(--ant-color-fill)"}},i={error:"error",warning:"warning",transitioning:"transitioning",success:"success",inactive:"inactive"},o={CREATE:1,UPDATE:2,DELETE:3},l=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*_+])[a-zA-Z\d!@#$%^&*_+]{6,12}$/},38780:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(26068),r=n.n(a),i=n(48305),o=n.n(i),l=n(32699),s=n(92605),c=n(50959);function d(e){var t,n=e||{},a=n.options,i=n.events,d=n.defer,u=void 0===d||d,m=c.useRef(null),h=c.useRef(null),g=c.useRef(!1),p=c.useRef(null),f=c.useRef(!1),v=c.useRef(null),x=(0,s.A)({options:{update:{debounce:0},overflow:{x:"hidden"},scrollbars:{theme:(null==a?void 0:a.theme)||"os-theme-dark",autoHide:"scroll",autoHideDelay:600,clickScroll:"instant"}},events:r()({},i),defer:u}),b=o()(x,2),y=b[0],w=b[1];h.current=null==w?void 0:w(),m.current=null===(t=h.current)||void 0===t||null===(t=t.elements())||void 0===t?void 0:t.scrollEventElement;var j=c.useCallback((0,l.throttle)((function(){var e,t,n,a,r;null===(e=m.current)||void 0===e||null===(t=e.scrollTo)||void 0===t||t.call(e,{top:null===(n=m.current)||void 0===n?void 0:n.scrollHeight,behavior:"smooth"}),null===(a=h.current)||void 0===a||null===(r=a.update)||void 0===r||r.call(a)}),100),[(m.current,h.current)]),S=c.useCallback((function(){var e,t,n,a;null===(e=m.current)||void 0===e||null===(t=e.scrollTo)||void 0===t||t.call(e,{top:m.current.scrollHeight,behavior:"auto"}),null===(n=h.current)||void 0===n||null===(a=n.update)||void 0===a||a.call(n)}),[m.current,h.current]),_=c.useCallback((function(e){f.current||(0===e?S():j())}),[j,S]),k=c.useCallback((function(){var e,t,n,a;null===(e=m.current)||void 0===e||null===(t=e.scrollTo)||void 0===t||t.call(e,{top:0,behavior:"auto"}),null===(n=h.current)||void 0===n||null===(a=n.update)||void 0===a||a.call(n)}),[m.current,h.current]),$=c.useCallback((function(e){var t,n,a,r,i,o;r=null===(t=m.current)||void 0===t?void 0:t.scrollTop,i=null===(n=m.current)||void 0===n?void 0:n.scrollHeight,o=r+(null===(a=m.current)||void 0===a?void 0:a.clientHeight)+20>=i,f.current=!o,v.current&&clearTimeout(v.current),v.current=setTimeout((function(){f.current=!1}),1500)}),[]),E=c.useCallback((function(e){if(h.current)return h.current;var t,n,a;e&&(y(e),p.current=e,g.current=!0,h.current=null==w?void 0:w(),m.current=null===(t=h.current)||void 0===t||null===(t=t.elements())||void 0===t?void 0:t.scrollEventElement,null===(n=p.current)||void 0===n||null===(a=n.addEventListener)||void 0===a||a.call(n,"wheel",$));return h.current}),[y,w]);return(0,c.useEffect)((function(){return function(){var e,t,n,a;null===(e=h.current)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e),null===(n=p.current)||void 0===n||null===(a=n.removeEventListener)||void 0===a||a.call(n,"wheel",$)}}),[w]),{initialize:E,instance:h.current,scrollEventElement:m.current,initialized:g.current,generateInstance:function(){var e;h.current=null==w?void 0:w(),m.current=null===(e=h.current)||void 0===e||null===(e=e.elements())||void 0===e?void 0:e.scrollEventElement},updateScrollerPosition:_,updateScrollerPositionToTop:k}}},69997:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(48305),r=n.n(a),i=n(37963),o=n(32699),l=n.n(o),s=n(50959);function c(){var e=(0,s.useState)({width:window.innerWidth,height:window.innerHeight}),t=r()(e,2),n=t[0],a=t[1],o=(0,s.useState)(!1),c=r()(o,2),d=c[0],u=c[1],m=(0,s.useState)(!1),h=r()(m,2),g=h[0],p=h[1],f=(0,s.useState)(!1),v=r()(f,2),x=v[0],b=v[1],y=(0,s.useState)(""),w=r()(y,2),j=w[0],S=w[1],_=(0,s.useCallback)((function(e){return e<i.Z.sm?(u(!0),p(!1),b(!1),void S("sm")):e<i.Z.md?(u(!1),p(!0),b(!1),void S("md")):e<i.Z.lg?(u(!1),p(!1),b(!0),void S("lg")):(u(!1),p(!1),b(!0),void S("xl"))}),[]),k=(0,s.useCallback)(l().throttle((function(){a({width:window.innerWidth,height:window.innerHeight})}),200),[]);return(0,s.useEffect)((function(){return window.addEventListener("resize",k),function(){window.removeEventListener("resize",k)}}),[k]),(0,s.useEffect)((function(){_(n.width)}),[n.width,_]),{size:n,isMobile:d,isTablet:g,isDesktop:x,currentPoint:j}}},91625:function(e,t,n){n.r(t),n.d(t,{default:function(){return nt}});var a=n(48305),r=n.n(a),i=n(67581),o=n(54876),l=n(50959),s=n(26068),c=n.n(s),d=n(90228),u=n.n(d),m=n(87999),h=n.n(m),g=n(38551),p="/dashboard";function f(){return v.apply(this,arguments)}function v(){return(v=h()(u()().mark((function e(){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)(p));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=(0,l.createContext)({}),b=x,y=n(16204),w=n(62722),j=n(57989),S=n(58258),_=n(81745),k=n(7922),$=n(29687),E=n(11527),C=[j.Us.llm,j.Us.embedding,j.Us.reranker],T=function(){var e=(0,g.useIntl)(),t=(0,l.useContext)(x).active_models||[],n=[{title:e.formatMessage({id:"common.table.name"}),dataIndex:"name",key:"name",ellipsis:!0,render:function(e,t){return(0,E.jsx)(y.Z,{ghost:!0,children:(0,E.jsx)("span",{children:e})})}},{title:e.formatMessage({id:"dashboard.allocatevram"}),dataIndex:"resource_claim.memory",key:"vram",ellipsis:!0,render:function(e,t){var n,a;return(0,E.jsxs)(y.Z,{ghost:!0,children:[(0,S.hy)((null===(n=t.resource_claim)||void 0===n?void 0:n.vram)||0)," /"," ",(0,S.hy)((null===(a=t.resource_claim)||void 0===a?void 0:a.ram)||0)]})}},{title:e.formatMessage({id:"models.form.replicas"}),dataIndex:"instance_count",key:"instance_count"},{title:e.formatMessage({id:"dashboard.tokens"}),dataIndex:"token_count",key:"token_count",ellipsis:!0,render:function(e,t){var n,a=e;e||(a=C.includes(null===(n=t.categories)||void 0===n?void 0:n[0])?0:"N/A");return(0,E.jsx)(y.Z,{ghost:!0,children:(0,E.jsx)("span",{children:a})})}}];return(0,E.jsx)(_.Z,{gutter:[20,0],children:(0,E.jsxs)(k.Z,{xs:24,sm:24,md:24,lg:24,xl:24,children:[(0,E.jsx)(w.Z,{style:{margin:"26px 0px"},left:(0,E.jsx)("span",{style:{padding:"9px 0",fontWeight:"var(--font-weight-bold)"},children:e.formatMessage({id:"dashboard.activeModels"})}),right:!1}),(0,E.jsx)("div",{children:(0,E.jsx)($.Z,{columns:n,dataSource:t,pagination:!1,rowKey:"id"})})]})})},M=(0,l.memo)(T),z=n(82187),Z=n.n(z),D=n(90123),N=n(29797),B=n(17793),L=n(45770),O=n(47946),A=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};var I=e=>{var{prefixCls:t,className:n,hoverable:a=!0}=e,r=A(e,["prefixCls","className","hoverable"]);const{getPrefixCls:i}=l.useContext(N.E_),o=i("card",t),s=Z()(`${o}-grid`,n,{[`${o}-grid-hoverable`]:a});return l.createElement("div",Object.assign({},r,{className:s}))},R=n(1947),P=n(98231),H=n(41380),W=n(38456);const G=e=>{const{antCls:t,componentCls:n,headerHeight:a,cardPaddingBase:r,tabsMarginBottom:i}=e;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:a,marginBottom:-1,padding:`0 ${(0,R.bf)(r)}`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.headerFontSize,background:e.headerBg,borderBottom:`${(0,R.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${(0,R.bf)(e.borderRadiusLG)} ${(0,R.bf)(e.borderRadiusLG)} 0 0`},(0,P.dF)()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},P.vS),{[`\n          > ${n}-typography,\n          > ${n}-typography-edit-content\n        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${t}-tabs-top`]:{clear:"both",marginBottom:i,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${(0,R.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`}}})},U=e=>{const{cardPaddingBase:t,colorBorderSecondary:n,cardShadow:a,lineWidth:r}=e;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`\n      ${(0,R.bf)(r)} 0 0 0 ${n},\n      0 ${(0,R.bf)(r)} 0 0 ${n},\n      ${(0,R.bf)(r)} ${(0,R.bf)(r)} 0 0 ${n},\n      ${(0,R.bf)(r)} 0 0 0 ${n} inset,\n      0 ${(0,R.bf)(r)} 0 0 ${n} inset;\n    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:a}}},F=e=>{const{componentCls:t,iconCls:n,actionsLiMargin:a,cardActionsIconSize:r,colorBorderSecondary:i,actionsBg:o}=e;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:o,borderTop:`${(0,R.bf)(e.lineWidth)} ${e.lineType} ${i}`,display:"flex",borderRadius:`0 0 ${(0,R.bf)(e.borderRadiusLG)} ${(0,R.bf)(e.borderRadiusLG)}`},(0,P.dF)()),{"& > li":{margin:a,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:e.calc(e.cardActionsIconSize).mul(2).equal(),fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${t}-btn), > ${n}`]:{display:"inline-block",width:"100%",color:e.colorTextDescription,lineHeight:(0,R.bf)(e.fontHeight),transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${n}`]:{fontSize:r,lineHeight:(0,R.bf)(e.calc(r).mul(e.lineHeight).equal())}},"&:not(:last-child)":{borderInlineEnd:`${(0,R.bf)(e.lineWidth)} ${e.lineType} ${i}`}}})},q=e=>Object.assign(Object.assign({margin:`${(0,R.bf)(e.calc(e.marginXXS).mul(-1).equal())} 0`,display:"flex"},(0,P.dF)()),{"&-avatar":{paddingInlineEnd:e.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":Object.assign({color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG},P.vS),"&-description":{color:e.colorTextDescription}}),K=e=>{const{componentCls:t,cardPaddingBase:n,colorFillAlter:a}=e;return{[`${t}-head`]:{padding:`0 ${(0,R.bf)(n)}`,background:a,"&-title":{fontSize:e.fontSize}},[`${t}-body`]:{padding:`${(0,R.bf)(e.padding)} ${(0,R.bf)(n)}`}}},Y=e=>{const{componentCls:t}=e;return{overflow:"hidden",[`${t}-body`]:{userSelect:"none"}}},X=e=>{const{componentCls:t,cardShadow:n,cardHeadPadding:a,colorBorderSecondary:r,boxShadowTertiary:i,cardPaddingBase:o,extraColor:l}=e;return{[t]:Object.assign(Object.assign({},(0,P.Wf)(e)),{position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:i},[`${t}-head`]:G(e),[`${t}-extra`]:{marginInlineStart:"auto",color:l,fontWeight:"normal",fontSize:e.fontSize},[`${t}-body`]:Object.assign({padding:o,borderRadius:`0 0 ${(0,R.bf)(e.borderRadiusLG)} ${(0,R.bf)(e.borderRadiusLG)}`},(0,P.dF)()),[`${t}-grid`]:U(e),[`${t}-cover`]:{"> *":{display:"block",width:"100%",borderRadius:`${(0,R.bf)(e.borderRadiusLG)} ${(0,R.bf)(e.borderRadiusLG)} 0 0`}},[`${t}-actions`]:F(e),[`${t}-meta`]:q(e)}),[`${t}-bordered`]:{border:`${(0,R.bf)(e.lineWidth)} ${e.lineType} ${r}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:n}},[`${t}-contain-grid`]:{borderRadius:`${(0,R.bf)(e.borderRadiusLG)} ${(0,R.bf)(e.borderRadiusLG)} 0 0 `,[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:e.calc(e.lineWidth).mul(-1).equal(),marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),padding:0}},[`${t}-contain-tabs`]:{[`> div${t}-head`]:{minHeight:0,[`${t}-head-title, ${t}-extra`]:{paddingTop:a}}},[`${t}-type-inner`]:K(e),[`${t}-loading`]:Y(e),[`${t}-rtl`]:{direction:"rtl"}}},V=e=>{const{componentCls:t,cardPaddingSM:n,headerHeightSM:a,headerFontSizeSM:r}=e;return{[`${t}-small`]:{[`> ${t}-head`]:{minHeight:a,padding:`0 ${(0,R.bf)(n)}`,fontSize:r,[`> ${t}-head-wrapper`]:{[`> ${t}-extra`]:{fontSize:e.fontSize}}},[`> ${t}-body`]:{padding:n}},[`${t}-small${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:0,display:"flex",alignItems:"center"}}}}};var Q=(0,H.I$)("Card",(e=>{const t=(0,W.IX)(e,{cardShadow:e.boxShadowCard,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardActionsIconSize:e.fontSize,cardPaddingSM:12});return[X(t),V(t)]}),(e=>({headerBg:"transparent",headerFontSize:e.fontSizeLG,headerFontSizeSM:e.fontSize,headerHeight:e.fontSizeLG*e.lineHeightLG+2*e.padding,headerHeightSM:e.fontSize*e.lineHeight+2*e.paddingXS,actionsBg:e.colorBgContainer,actionsLiMargin:`${e.paddingSM}px 0`,tabsMarginBottom:-e.padding-e.lineWidth,extraColor:e.colorText}))),J=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const ee=e=>{const{actionClasses:t,actions:n=[],actionStyle:a}=e;return l.createElement("ul",{className:t,style:a},n.map(((e,t)=>{const a=`action-${t}`;return l.createElement("li",{style:{width:100/n.length+"%"},key:a},l.createElement("span",null,e))})))},te=l.forwardRef(((e,t)=>{const{prefixCls:n,className:a,rootClassName:r,style:i,extra:o,headStyle:s={},bodyStyle:c={},title:d,loading:u,bordered:m=!0,size:h,type:g,cover:p,actions:f,tabList:v,children:x,activeTabKey:b,defaultActiveTabKey:y,tabBarExtraContent:w,hoverable:j,tabProps:S={},classNames:_,styles:k}=e,$=J(e,["prefixCls","className","rootClassName","style","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps","classNames","styles"]),{getPrefixCls:E,direction:C,card:T}=l.useContext(N.E_);const M=e=>{var t;return Z()(null===(t=null==T?void 0:T.classNames)||void 0===t?void 0:t[e],null==_?void 0:_[e])},z=e=>{var t;return Object.assign(Object.assign({},null===(t=null==T?void 0:T.styles)||void 0===t?void 0:t[e]),null==k?void 0:k[e])},A=l.useMemo((()=>{let e=!1;return l.Children.forEach(x,(t=>{(null==t?void 0:t.type)===I&&(e=!0)})),e}),[x]),R=E("card",n),[P,H,W]=Q(R),G=l.createElement(L.Z,{loading:!0,active:!0,paragraph:{rows:4},title:!1},x),U=void 0!==b,F=Object.assign(Object.assign({},S),{[U?"activeKey":"defaultActiveKey"]:U?b:y,tabBarExtraContent:w});let q;const K=(0,B.Z)(h),Y=K&&"default"!==K?K:"large",X=v?l.createElement(O.Z,Object.assign({size:Y},F,{className:`${R}-head-tabs`,onChange:t=>{var n;null===(n=e.onTabChange)||void 0===n||n.call(e,t)},items:v.map((e=>{var{tab:t}=e,n=J(e,["tab"]);return Object.assign({label:t},n)}))})):null;if(d||o||X){const e=Z()(`${R}-head`,M("header")),t=Z()(`${R}-head-title`,M("title")),n=Z()(`${R}-extra`,M("extra")),a=Object.assign(Object.assign({},s),z("header"));q=l.createElement("div",{className:e,style:a},l.createElement("div",{className:`${R}-head-wrapper`},d&&l.createElement("div",{className:t,style:z("title")},d),o&&l.createElement("div",{className:n,style:z("extra")},o)),X)}const V=Z()(`${R}-cover`,M("cover")),te=p?l.createElement("div",{className:V,style:z("cover")},p):null,ne=Z()(`${R}-body`,M("body")),ae=Object.assign(Object.assign({},c),z("body")),re=l.createElement("div",{className:ne,style:ae},u?G:x),ie=Z()(`${R}-actions`,M("actions")),oe=(null==f?void 0:f.length)?l.createElement(ee,{actionClasses:ie,actionStyle:z("actions"),actions:f}):null,le=(0,D.Z)($,["onTabChange"]),se=Z()(R,null==T?void 0:T.className,{[`${R}-loading`]:u,[`${R}-bordered`]:m,[`${R}-hoverable`]:j,[`${R}-contain-grid`]:A,[`${R}-contain-tabs`]:null==v?void 0:v.length,[`${R}-${K}`]:K,[`${R}-type-${g}`]:!!g,[`${R}-rtl`]:"rtl"===C},a,r,H,W),ce=Object.assign(Object.assign({},null==T?void 0:T.style),i);return P(l.createElement("div",Object.assign({ref:t},le,{className:se,style:ce}),q,te,re,oe))}));var ne=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};var ae=e=>{const{prefixCls:t,className:n,avatar:a,title:r,description:i}=e,o=ne(e,["prefixCls","className","avatar","title","description"]),{getPrefixCls:s}=l.useContext(N.E_),c=s("card",t),d=Z()(`${c}-meta`,n),u=a?l.createElement("div",{className:`${c}-meta-avatar`},a):null,m=r?l.createElement("div",{className:`${c}-meta-title`},r):null,h=i?l.createElement("div",{className:`${c}-meta-description`},i):null,g=m||h?l.createElement("div",{className:`${c}-meta-detail`},m,h):null;return l.createElement("div",Object.assign({},o,{className:d}),u,g)};const re=te;re.Grid=I,re.Meta=ae;var ie=re,oe=n(54235),le=n(32699),se=n.n(le),ce=[{key:"worker_count",label:"dashboard.workers",backgroundColor:"var(--color-white-1)"},{key:"gpu_count",label:"dashboard.totalgpus",backgroundColor:"var(--color-white-1)"},{key:"model_count",label:"dashboard.models",backgroundColor:"var(--color-white-1)"},{key:"model_instance_count",label:"models.form.replicas",backgroundColor:"var(--color-white-1)"}],de="card-body___by6gK",ue="row___aaW9s",me="content___L6aNm",he=function(e){var t=e.label,n=e.value,a=e.bgColor;return(0,E.jsx)(ie,{bordered:!1,style:{background:a},className:de,children:(0,E.jsxs)("div",{className:me,children:[(0,E.jsx)("div",{className:"label font-500",children:t}),(0,E.jsx)("div",{className:"value font-500",children:n})]})})},ge=function(){var e=(0,g.useIntl)(),t=(0,l.useContext)(x).resource_counts||{};return(0,E.jsx)("div",{children:(0,E.jsx)(_.Z,{gutter:[24,20],className:ue,children:ce.map((function(n,a){return(0,E.jsx)(k.Z,{xs:{flex:"100%"},sm:{flex:"50%"},md:{flex:"50%"},lg:{flex:"25%"},xl:{flex:"25%"},children:he({label:e.formatMessage({id:n.label}),value:(r=se().get(t,n.key,0),"number"==typeof r?r:(0,E.jsxs)(oe.Z,{className:"value-box",size:20,children:[(0,E.jsx)("span",{className:"value-healthy",children:r.healthy}),(0,E.jsx)("span",{className:"value-warning",children:r.warning}),(0,E.jsx)("span",{className:"value-error",children:r.error})]})),bgColor:n.backgroundColor})},n.key);var r}))})})},pe=l.memo(ge),fe="cardWrapper___Q41EU",ve=function(e){var t=e.children,n=e.style;return(0,E.jsx)("div",{className:fe,style:c()({},n),children:t})},xe=n(13636),be=n(29220),ye=n(30396),we=function(e){var t=e.value,n=e.height,a=e.width,r=e.labelFormatter,i=e.title,o=e.color;if(!t&&0!==t)return(0,E.jsx)(ye.Z,{height:n,title:i});var l={title:c()(c()({},be.TN),{},{text:i,top:"0",left:"center"}),series:[c()(c()({},be.yy),{},{axisLine:c()(c()({},be.yy.axisLine),{},{lineStyle:c()(c()({},be.yy.axisLine.lineStyle),{},{color:[[t/100,o],[1,"rgba(221, 221, 221, 0.5)"]]})}),itemStyle:{color:"transparent"},detail:c()(c()({},be.yy.detail),{},{formatter:r||be.yy.detail.formatter}),data:[{value:t}]})]};return(0,E.jsx)(xe.Z,{height:n,options:l,width:a||"100%"})},je=(0,l.memo)(we),Se=n(37963),_e=n(69997),ke=function(e){var t=e.seriesData,n=e.xAxisData,a=e.yAxisName,r=e.height,i=e.width,o=e.labelFormatter,s=e.tooltipValueFormatter,d=void 0===s?null:s,u=e.legendData,m=void 0===u?[]:u,h=e.smooth,g=e.title,p={title:{text:""},grid:be.eC,tooltip:c()(c()({},be.Md),{},{formatter:function(e){return d?be.Md.formatter(e,d):be.Md.formatter(e)}}),xAxis:c()(c()({},be.Gl),{},{axisLabel:c()(c()({},be.Gl.axisLabel),{},{formatter:o})}),yAxis:be.Rf,legend:c()(c()({},be.j3),{},{data:m}),series:[]},f=(0,l.useMemo)((function(){var e=se().map(t,(function(e){return c()(c()(c()({},e),be.zt),{},{smooth:h,itemStyle:c()(c()({},be.zt.itemStyle),{},{color:e.color}),lineStyle:c()(c()({},be.zt.lineStyle),{},{color:e.color})})}));return c()(c()({},p),{},{animation:!1,title:c()(c()({},be.TN),{},{text:g}),yAxis:c()(c()({},p.yAxis),{},{name:a,nameTextStyle:{fontSize:12,align:"right"}}),xAxis:c()(c()({},p.xAxis),{},{data:n}),series:e})}),[t,n,a,g,h,m]);return(0,E.jsx)(E.Fragment,{children:t.length?(0,E.jsx)(xe.Z,{height:r,options:f,width:i||"100%"}):(0,E.jsx)(ye.Z,{height:r,title:g})})},$e=(0,l.memo)(ke),Ee=n(7672),Ce=n.n(Ee),Te={cpu:{label:"CPU",type:"CPU",intl:!1,color:"rgba(250, 173, 20,.8)"},ram:{label:"dashboard.memory",type:"Memory",intl:!0,color:"rgba(114, 46, 209,.8)"},gpu:{label:"GPU",type:"GPU",intl:!1,color:"rgba(84, 204, 152,.8)"},vram:{label:"dashboard.vram",type:"VRAM",intl:!0,color:"rgba(255, 107, 179, 80%)"}},Me=function(){var e,t=(0,g.useIntl)(),n=(null===(e=(0,l.useContext)(x))||void 0===e||null===(e=e.system_load)||void 0===e?void 0:e.history)||{},a=["gpu","cpu","ram","vram"],r=(0,l.useMemo)((function(){var e=[],r=[];return{seriesData:se().map(a,(function(a){var i=se().get(Te,a,{}),o=i.intl?t.formatMessage({id:i.label}):i.label;e.push(o);var l=se().get(n,a,[]);return{name:o,color:i.color,data:se().map(l,(function(e){return r.push(Ce()(1e3*e.timestamp).format("HH:mm:ss")),{time:Ce()(1e3*e.timestamp).format("HH:mm:ss"),value:se().round(se().get(e,"value",0),1)}}))}})),legendData:e,xAxisData:se().uniq(r)}}),[n,t]);return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)($e,{height:390,seriesData:r.seriesData,legendData:r.legendData,xAxisData:r.xAxisData,tooltipValueFormatter:function(e){return e?"".concat(e,"%"):e},smooth:!0,width:"100%",yAxisName:"(%)"})})},ze=(0,l.memo)(Me),Ze=function(e){return e<=50||void 0===e?"rgb(84, 204, 152, 80%)":e<=80?"rgba(250, 173, 20, 80%)":"rgba(255, 77, 79, 80%)"},De=function(){var e,t=(0,g.useIntl)(),n=(null===(e=(0,l.useContext)(x))||void 0===e||null===(e=e.system_load)||void 0===e?void 0:e.current)||{},a=(0,_e.Z)().size,i=(0,l.useState)("20px"),o=r()(i,2),s=o[0],c=o[1],d=(0,l.useState)(190),u=r()(d,2),m=u[0],h=(u[1],(0,l.useState)(400)),p=r()(h,2),f=p[0],v=(p[1],(0,l.useMemo)((function(){return{gpu:{data:se().round(n.gpu||0,1),color:Ze(n.gpu)},vram:{data:se().round(n.vram||0,1),color:Ze(n.vram)},cpu:{data:se().round(n.cpu||0,1),color:Ze(n.cpu)},ram:{data:se().round(n.ram||0,1),color:Ze(n.ram)}}}),[n]));return(0,l.useEffect)((function(){a.width<Se.Z.xl?c("0"):c("20px")}),[a.width]),(0,E.jsx)("div",{children:(0,E.jsxs)("div",{className:"system-load",children:[(0,E.jsx)(w.Z,{style:{margin:"26px 0px"},left:(0,E.jsx)("span",{className:"font-700",children:t.formatMessage({id:"dashboard.systemload"})})}),(0,E.jsxs)(_.Z,{style:{width:"100%"},gutter:[0,20],children:[(0,E.jsx)(k.Z,{xs:24,sm:24,md:24,lg:24,xl:16,style:{paddingRight:s},children:(0,E.jsx)(ve,{style:{height:400,width:"100%"},children:(0,E.jsx)(ze,{})})}),(0,E.jsx)(k.Z,{xs:24,sm:24,md:24,lg:24,xl:8,children:(0,E.jsx)(ve,{style:{height:f,width:"100%"},children:(0,E.jsxs)(_.Z,{style:{height:f,width:"100%"},children:[(0,E.jsx)(k.Z,{span:12,style:{height:m},children:(0,E.jsx)(je,{height:m,value:v.gpu.data,color:v.gpu.color,title:t.formatMessage({id:"dashboard.gpuutilization"})})}),(0,E.jsx)(k.Z,{span:12,style:{height:m},children:(0,E.jsx)(je,{title:t.formatMessage({id:"dashboard.vramutilization"}),height:m,color:v.vram.color,value:v.vram.data})}),(0,E.jsx)(k.Z,{span:12,style:{height:m},children:(0,E.jsx)(je,{title:t.formatMessage({id:"dashboard.cpuutilization"}),height:m,color:v.cpu.color,value:v.cpu.data})}),(0,E.jsx)(k.Z,{span:12,style:{height:m},children:(0,E.jsx)(je,{title:t.formatMessage({id:"dashboard.memoryutilization"}),height:m,color:v.ram.color,value:v.ram.data})})]})})})]})]})})},Ne=(0,l.memo)(De),Be=function(e){var t=e.seriesData,n=e.xAxisData,a=e.height,r=e.width,i=e.labelFormatter,o=(e.legendData,e.title),s={title:{text:""},grid:be.eC,tooltip:c()({},be.Md),xAxis:c()(c()({},be.Gl),{},{axisLabel:c()(c()({},be.Gl.axisLabel),{},{formatter:i}),data:[]}),yAxis:be.Rf,legend:c()(c()({},be.j3),{},{data:[]}),series:[]},d=(0,l.useMemo)((function(){var e=se().map(t,(function(e){return c()(c()(c()({},e),be.tN),{},{stack:"total",itemStyle:{color:e.color}})}));return c()(c()({},s),{},{animation:!1,title:c()(c()({},be.TN),{},{text:o}),yAxis:c()({},s.yAxis),xAxis:c()(c()({},s.xAxis),{},{data:n}),series:e})}),[t,n,o]);return(0,E.jsx)(E.Fragment,{children:t.length?(0,E.jsx)(xe.Z,{height:a,options:d,width:r||"100%"}):(0,E.jsx)(ye.Z,{height:a,title:o})})},Le=(0,l.memo)(Be),Oe=function(e){var t=e.requestData,n=e.tokenData,a=e.xAxisData,r=(0,g.useIntl)(),i=function(e){return Ce()(e).format("MM-DD")};return(0,E.jsx)(ve,{style:{width:"100%"},children:(0,E.jsxs)(_.Z,{style:{width:"100%"},children:[(0,E.jsx)(k.Z,{span:12,children:(0,E.jsx)($e,{title:r.formatMessage({id:"dashboard.apirequest"}),seriesData:t,xAxisData:a,height:360,labelFormatter:i})}),(0,E.jsx)(k.Z,{span:12,children:(0,E.jsx)(Le,{title:r.formatMessage({id:"dashboard.tokens"}),seriesData:n,xAxisData:a,height:360,labelFormatter:i})})]})})},Ae=l.memo(Oe),Ie=function(e){var t=e.seriesData,n=e.xAxisData,a=e.height,r=e.width,i=e.labelFormatter,o=(e.legendData,e.title),s={title:c()(c()({},be.TN),{},{left:"start"}),grid:be.eC,tooltip:c()({},be.Md),xAxis:c()(c()({},be.Gl),{},{axisLabel:c()(c()({},be.Gl.axisLabel),{},{formatter:i})}),yAxis:be.Rf,legend:c()(c()({},be.j3),{},{data:[]}),series:[]},d=(0,l.useMemo)((function(){var e=se().map(t,(function(e){return c()(c()({},e),{},{type:"bar",barWidth:20,stack:"Ad",barGap:"30%",label:{show:!1},itemStyle:{color:e.color}})}));return c()(c()({},s),{},{animation:!1,title:c()(c()({},s.title),{},{text:o}),yAxis:c()(c()({},s.yAxis),{},{inverse:!0,type:"category",splitLine:{show:!1},data:n,axisLine:{show:!1},axisTick:{show:!1}}),xAxis:c()(c()({},s.xAxis),{},{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!1}}),series:e})}),[t,n,o]);return(0,E.jsx)(E.Fragment,{children:t.length?(0,E.jsx)(xe.Z,{height:a,options:d,width:r||"100%"}):(0,E.jsx)(ye.Z,{height:a,title:o})})},Re=(0,l.memo)(Ie),Pe=function(e){var t=e.userData,n=e.topUserList,a=(0,g.useIntl)();return(0,E.jsx)(ve,{children:(0,E.jsx)(Re,{title:a.formatMessage({id:"dashboard.topusers"}),seriesData:t,xAxisData:n,height:360})})},He=l.memo(Pe),We=n(15558),Ge=n.n(We),Ue="rgba(0,85,255,0.8)",Fe="rgba(85,167,255,0.8)",qe=function(e){return new Map(e.map((function(e){return[Ce()(1e3*e.timestamp).format("YYYY-MM-DD"),e.value]})))},Ke=function(e,t){return e.map((function(e){return{time:e,value:t.get(e)||0}}))};function Ye(e){return(0,l.useMemo)((function(){var t=function(){for(var e=[],t=29;t>=0;t--){var n=Ce()().subtract(t,"day").format("YYYY-MM-DD");e.push(n)}return e}(),n=e.completion_token_history||[],a=e.prompt_token_history||[],r=e.api_request_history||[],i=e.top_users||[];if(!n.length)return{requestTokenData:{requestData:[],tokenData:[],xAxisData:[]},topUserData:{userData:[],topUserList:[]}};var o={name:"API requests",areaStyle:{},color:Ue,data:Ke(t,qe(r))},l={name:"Completion tokens",color:Ue,data:Ke(t,qe(n))},s={name:"Prompt tokens",color:Fe,data:Ke(t,qe(a))},c={name:"Prompt tokens",color:Fe,data:[]},d={name:"Completion tokens",color:Ue,data:[]},u=i.map((function(e){return c.data.push({name:e.username,value:e.prompt_token_count}),d.data.push({name:e.username,value:e.completion_token_count}),e.username}));return{requestTokenData:{requestData:[o],tokenData:[l,s],xAxisData:t},topUserData:{userData:[d,c],topUserList:Ge()(new Set(u))}}}),[e])}var Xe=function(e){var t=e.paddingRight,n=(0,g.useIntl)(),a=Ye((0,l.useContext)(x).model_usage||{}),r=a.requestTokenData,i=a.topUserData;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(w.Z,{style:{margin:"26px 0px"},left:(0,E.jsx)("span",{className:"font-700",children:n.formatMessage({id:"dashboard.usage"})})}),(0,E.jsxs)(_.Z,{style:{width:"100%"},gutter:[0,20],children:[(0,E.jsx)(k.Z,{xs:24,sm:24,md:24,lg:24,xl:16,style:{paddingRight:t},children:(0,E.jsx)(Ae,{requestData:r.requestData,xAxisData:r.xAxisData,tokenData:r.tokenData})}),(0,E.jsx)(k.Z,{xs:24,sm:24,md:24,lg:24,xl:8,children:(0,E.jsx)(He,{userData:i.userData,topUserList:i.topUserList})})]})]})},Ve=(0,l.memo)(Xe),Qe=function(){var e=(0,_e.Z)().size.width,t=(0,l.useState)("20px"),n=r()(t,2),a=n[0],i=n[1];return(0,l.useEffect)((function(){e<Se.Z.xl?i("0"):i("20px")}),[e]),(0,E.jsx)(Ve,{paddingRight:a})},Je=function(e){var t=e.setLoading,n=(0,l.useState)({}),a=r()(n,2),i=a[0],o=a[1],s=(0,l.useCallback)(h()(u()().mark((function e(){var n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(!0),e.next=4,f();case 4:n=e.sent,o(n),t(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),t(!1),o({});case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]);return(0,l.useEffect)((function(){s()}),[]),(0,E.jsxs)(b.Provider,{value:c()(c()({},i),{},{fetchData:s}),children:[(0,E.jsx)(pe,{}),(0,E.jsx)(Ne,{}),(0,E.jsx)(Qe,{}),(0,E.jsx)(M,{})]})},et=(0,l.memo)(Je),tt=function(){var e=(0,l.useState)(!1),t=r()(e,2),n=t[0],a=t[1];return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(i._z,{ghost:!0,extra:[],header:{style:{paddingInline:"var(--layout-content-header-inlinepadding)"}},children:(0,E.jsx)(o.Z,{spinning:n,children:(0,E.jsx)(et,{setLoading:a})})})})},nt=(0,l.memo)(tt)},57989:function(e,t,n){n.d(t,{Ae:function(){return C},Bu:function(){return u},Ei:function(){return p},G:function(){return h},Ng:function(){return L},OF:function(){return N},TM:function(){return _},Tx:function(){return x},U9:function(){return D},UM:function(){return b},Uf:function(){return k},Us:function(){return M},V6:function(){return T},XI:function(){return m},Xl:function(){return w},YB:function(){return j},YK:function(){return S},ZT:function(){return f},_3:function(){return z},bI:function(){return y},g_:function(){return B},hg:function(){return v},i7:function(){return $},sk:function(){return g},tn:function(){return E}});n(48305);var a=n(26068),r=n.n(a),i=n(82092),o=n.n(i),l=n(20369),s=n(48660),c=n(32699),d=n.n(c),u=[{label:"qwen2.5-coder",value:"qwen2.5-coder",name:"qwen2.5-coder",id:"qwen2.5-coder",tags:[]},{label:"llama3.2",value:"llama3.2",name:"llama3.2",id:"llama3.2",tags:["Tools","1B","3B"]},{label:"nomic-embed-text",value:"nomic-embed-text",name:"nomic-embed-text",id:"nomic-embed-text",tags:[]},{label:"qwen2.5",value:"qwen2.5",name:"qwen2.5",tags:["Tools","0.5B","1.5B","3B","7B","14B","32B","72B"],id:"gemma2"},{label:"gemma2",value:"gemma2",name:"gemma2",tags:["2B","9B","27B"],id:"gemma2"},{label:"mistral-nemo",value:"mistral-nemo",name:"mistral-nemo",tags:["12B"],id:"mistral-nemo"},{label:"mistral-large",value:"mistral-large",name:"mistral-large",tags:["123B"],id:"mistral-large"},{label:"mistral",value:"mistral",name:"mistral",tags:["7B"],id:"mistral"},{label:"phi3.5",value:"phi3.5",name:"phi3.5",tags:["3B"],id:"phi3.5"},{label:"codellama",value:"codellama",name:"codellama",tags:["7B","13B","34B","70B"],id:"codellama"},{label:"deepseek-coder-v2",value:"deepseek-coder-v2",name:"deepseek-coder-v2",tags:["16B","236B"],id:"deepseek-coder-v2"}],m=[{title:"llama-box",tips:"models.form.backend.llamabox"},{title:"vLLM",tips:"models.form.backend.vllm"},{title:"Ascend MindIE",tips:"models.form.backend.mindie"},{title:"vox-box",tips:"models.form.backend.voxbox"}],h=[{title:{text:"models.localpath.gguf.tips.title",locale:!0},tips:"models.localpath.gguf.tips"},{title:{text:"models.localpath.shared.tips.title",locale:!0},tips:"models.localpath.chunks.tips"},{title:{text:"models.localpat.safe.tips.title",locale:!0},tips:"models.localpath.safe.tips"}],g={llamaBox:"llama-box",vllm:"vllm",voxBox:"vox-box",ascendMindie:"ascend-mindie"},p=o()(o()(o()(o()({},g.llamaBox,"llama-box"),g.vllm,"vLLM"),g.voxBox,"vox-box"),g.ascendMindie,"Ascend MindIE"),f=o()(o()(o()({},g.llamaBox,{holder:"models.form.backend_parameters.llamabox.placeholder",tooltip:"models.form.backend_parameters.vllm.tips"}),g.vllm,{holder:"models.form.backend_parameters.vllm.placeholder",tooltip:"models.form.backend_parameters.vllm.tips"}),g.voxBox,null),v={textToSpeech:"text-to-speech",speechToText:"speech-to-text",textToText:"text-to-text",textToImage:"text-to-image",audio:"audio",image:"image"},x=o()(o()(o()(o()(o()({},v.textToSpeech,"text-to-speech"),v.speechToText,"auto-speech-recognition"),v.textToText,"TextToText"),v.textToImage,"text-to-image"),"audio",["text-to-speech","auto-speech-recognition"]),b=o()(o()(o()(o()(o()({},v.textToSpeech,"text-to-speech"),v.speechToText,"automatic-speech-recognition"),v.textToText,"text-2-text"),v.textToImage,"text-to-image"),"audio",["text-to-speech","automatic-speech-recognition"]),y={huggingface:"Hugging Face",huggingface_value:"huggingface",ollama_library:"Ollama Library",ollama_library_value:"ollama_library",modelScope:"ModelScope",modelscope_value:"model_scope",model_scope:"ModelScope",local_path:"Local Path",local_path_value:"local_path"},w=o()(o()(o()(o()({},y.huggingface_value,y.huggingface),y.ollama_library_value,y.ollama_library),y.modelscope_value,y.modelScope),y.local_path_value,y.local_path),j=[{label:"Hugging Face",value:y.huggingface_value,key:"huggingface"},{label:"Ollama Library",value:y.ollama_library_value,key:"ollama_library"},{label:"ModelScope",value:y.modelscope_value,key:"model_scope"},{label:"models.form.localPath",locale:!0,value:y.local_path_value,key:"local_path"}],S={Initializing:"initializing",Starting:"starting",Pending:"pending",Running:"running",Scheduled:"scheduled",Error:"error",Downloading:"downloading",Unknown:"unknown",Analyzing:"analyzing",Unreachable:"unreachable"},_=[S.Downloading,S.Initializing,S.Starting],k=o()(o()(o()(o()(o()(o()(o()(o()(o()(o()({},S.Initializing,"Initializing"),S.Pending,"Pending"),S.Running,"Running"),S.Scheduled,"Scheduled"),S.Error,"Error"),S.Downloading,"Downloading"),S.Unknown,"Unknown"),S.Analyzing,"Analyzing"),S.Starting,"Starting"),S.Unreachable,"Unreachable"),$=o()(o()(o()(o()(o()(o()(o()(o()(o()(o()({},S.Running,l.iE.success),S.Pending,l.iE.transitioning),S.Initializing,l.iE.transitioning),S.Scheduled,l.iE.transitioning),S.Error,l.iE.error),S.Downloading,l.iE.transitioning),S.Unknown,l.iE.inactive),S.Analyzing,l.iE.transitioning),S.Starting,l.iE.transitioning),S.Unreachable,l.iE.error),E=(s.Z,s.Z,s.Z,{trendingScore:"trendingScore",likes:"likes",downloads:"downloads",lastModified:"lastModified"}),C=o()(o()(o()(o()({},E.trendingScore,"Default"),E.likes,"StarsCount"),E.downloads,"DownloadsCount"),E.lastModified,"GmtModified"),T=[{label:"Spread",value:"spread"},{label:"Binpack",value:"binpack"}],M={image:"image",text_to_speech:"text_to_speech",speech_to_text:"speech_to_text",embedding:"embedding",reranker:"reranker",llm:"llm"},z=[{label:"common.options.auto",value:null,locale:!0},{label:"LLM",value:M.llm},{label:"Image",value:M.image},{label:"Text-to-Speech",value:M.text_to_speech},{label:"Speech-to-Text",value:M.speech_to_text},{label:"Embedding",value:M.embedding},{label:"Reranker",value:M.reranker}],Z=o()(o()({},y.huggingface_value,{repo_id:"huggingface_repo_id",file_name:"huggingface_filename"}),y.modelscope_value,{repo_id:"model_scope_model_id",file_name:"model_scope_file_path"}),D=function(e,t){var n,a=Z[e]||{},i={},o=[];return null===(n=Object.keys(a))||void 0===n||n.forEach((function(e){a[e]&&(i[a[e]]=t[e],o.push(e))})),{values:r()(r()({},i),d().omit(t,o))}},N=function(e,t){var n,a=Z[e]||{},i={},o=[];return null===(n=Object.keys(a))||void 0===n||n.forEach((function(e){a[e]&&(i[e]=t[a[e]],o.push(a[e]))})),{values:r()(r()({},i),d().omit(t,o))}},B=["repo_id","file_name","replicas","categories","name","description","env","source","quantization","size","restart_on_error","worker_selector","backend_parameters","local_path","backend_version","ollama_library_model_name","scheduleType","placement_strategy","backend","gpu_selector"],L=["repo_id","file_name","description","source","worker_selector","backend_parameters","local_path","backend_version","ollama_library_model_name","scheduleType","backend","gpu_selector"]},7922:function(e,t,n){var a=n(38675);t.Z=a.Z},81745:function(e,t,n){var a=n(43715);t.Z=a.Z}}]);