var Ks=Object.defineProperty;var Xs=(r,t,n)=>t in r?Ks(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var me=(r,t,n)=>Xs(r,typeof t!="symbol"?t+"":t,n);import{L as Zs,M as Js,N as en,O as tn,P as rn,s as Pt,Q as sn,S as pt,T as ot,U as rt,V as pr,W as St,X as br,Y as Mt,Z as Fr,_ as sr,$ as nn,a0 as an,a1 as hr,a2 as on,a3 as ln,a4 as un,a5 as cn,a6 as dn,a7 as fn,a8 as gn}from"../chunks/Ep9fPH5z.mjs";import{e as vn,f as $n,b as mn}from"../chunks/DtTXjWOe.mjs";import{s as g,b9 as fs,g as s,L as gs,K as w,aN as Ht,x as pn,ba as hn,p as Ce,e as tt,f as ne,c as d,d as we,aq as yn,b2 as Rr,b3 as Cn,i as K,h as z,V as v,r as A,b as S,n as ee,l as oe,a as We,m as D,T as Ze,t as Q,b5 as at,al as de,Z as wn}from"../chunks/DV-2yDg-.mjs";import{w as Be,g as He,d as _n,r as vs,a as Pn}from"../chunks/DqGH9kBy.mjs";import{c as tr}from"../chunks/Ch8h3WnX.mjs";import{b as Ar,i as Hr,S as kn}from"../chunks/D2xMrejz.mjs";import"../chunks/Bg9kRutz.mjs";import{i as ke}from"../chunks/nnh_QitT.mjs";import{b as Ft}from"../chunks/Dz-DtsIW.mjs";import{p as H,i as Te,s as $s}from"../chunks/x5bsbXB-.mjs";import{q as bn,s as V,r as ms,e as Re,c as ps,o as Tr,p as xn}from"../chunks/C_re1EiV.mjs";import{dY as hs,u as et,dZ as xr,av as ht,d_ as Sn,d$ as On,t as _t,e0 as Ir,e1 as Rn,T as Ge,e2 as ys,e3 as An,e4 as Br,e5 as Tn,e6 as zr,e7 as In,e8 as Dn,e9 as Ln,ea as En,eb as Mn,ec as Nn,ed as Vn,ee as Fn,ef as Hn,eg as Bn,eh as zn,ei as Gn,ej as Wn,ek as jn,b7 as vt,el as qn,em as Gr,en as Un,eo as Qn,ep as Yn,eq as Kn,er as Wr,es as Xn,et as Zn,eu as Jn,ev as ea,ew as ta,ex as ra,ey as sa,ez as na,eA as aa,eB as oa,eC as Cs,eD as ia,eE as la,eF as ua,eG as ca,eH as da,eI as fa,eJ as ga,eK as va,eL as $a,eM as ma,eN as pa,eO as ha,eP as ya,eQ as Ca,eR as wa,eS as _a,eT as Pa,eU as ka,eV as ba,eW as xa,eX as Sa,eY as Oa,eZ as Ra,e_ as Aa,e$ as Ta,f0 as Ia,f1 as Da,f2 as La,f3 as Ea,f4 as Ma,f5 as Na,f6 as Va,f7 as Fa,f8 as Ha,f9 as Ba,fa as za,fb as Ga,fc as jr,fd as Wa,fe as ja,ff as qa,fg as Ua,fh as Qa,fi as Ya,fj as Ka,fk as qr,fl as Xa,fm as Za,fn as Ja,fo as eo,fp as ws,fq as _s,fr as Ps,fs as to,ft as ro,fu as so,fv as no,fw as ao,fx as oo,fy as io,fz as lo,fA as uo,fB as rr,fC as Ur,fD as Qr,fE as ks,fF as co,fG as bs,fH as fo,fI as xs,fJ as go,fK as vo,fL as Yr,fM as $o,fN as mo,fO as po,fP as ho,fQ as yo,fR as Co,fS as wo,fT as _o,fU as Po,fV as Ss,fW as ko,fX as Kr,cl as bo,cj as xo,cz as Os,fY as So,cQ as Oo,cm as Ro,fZ as Ao,f_ as To,f$ as Io,g0 as Do,g1 as Lo,g2 as Eo,g3 as Mo,g4 as No,g5 as Vo,g6 as Fo,g7 as Rs,g8 as As,g9 as Ho,ga as Dr,gb as Ts,gc as Bo,gd as zo,ge as Go,gf as Is,gg as Wo,gh as jo,gi as qo,gj as Uo,gk as Qo,dt as Yo,gl as Ko,q as Ot,gm as yr,gn as Xo,go as Zo,gp as Jo,gq as ei,gr as Ds,gs as Cr,gt as ti,gu as ri,gv as si,gw as Ls,gx as ni,gy as ai,gz as oi,gA as ii,gB as li,gC as Es,gD as ui,gE as ci,gF as di,gG as fi,gH as gi,gI as vi,gJ as $i,gK as mi,U as pi,gL as hi,gM as yi,gN as Ci,gO as wi,gP as _i,gQ as Pi,gR as ki,gS as bi,gT as Ms,gU as Xr,gV as xi,gW as Si,gX as Oi,gY as Ri,gZ as Ai,g_ as Ti,g$ as Ii,h0 as Di,h1 as Li,h2 as Ei,h3 as Mi,h4 as Zr,h5 as Ni,h6 as Vi,h7 as Fi,h8 as Hi,h9 as Bi,ha as zi,hb as Gi,hc as Jr,hd as Wi,he as ji,hf as qi}from"../chunks/BWUD79Mq.mjs";import{b as qe}from"../chunks/DpsVa0Mt.mjs";import{s as De,a as fe,m as Rt,b as yt,d as X,e as Ui}from"../chunks/DDtyVqW1.mjs";import{C as Qi}from"../chunks/BlHEOJO4.mjs";import{e as Bt,i as or,s as Yi,R as Me,p as Ki}from"../chunks/QLt-JbE0.mjs";import{c as Sr}from"../chunks/BLWFwbTg.mjs";import{T as st}from"../chunks/DvL_IOlS.mjs";import{H as ye,b as Xe,a as $t,M as Xi}from"../chunks/CBHmp2sr.mjs";import{d as zt,M as Ns,S as Zi,l as Ji,t as el,u as tl,v as rl,a as sl,W as nl,P as al,D as Nt}from"../chunks/DbKBBlyc.mjs";import{a as ol}from"../chunks/CcaWrs5J.mjs";import{C as xt,R as Gt,a as te,S as Qe,E as gt}from"../chunks/CrcEW6Mi.mjs";import{c as Wt,b as wr}from"../chunks/Bj9ye7vG.mjs";import{a as ar,Z as il,I as es,c as Vs,_ as ll}from"../chunks/Bp5nMM_H.mjs";import{C as kt}from"../chunks/OEq5rneK.mjs";import{j as ul,S as cl,g as dl,p as fl}from"../chunks/CkN7vL5T.mjs";import{W as ze}from"../chunks/CQoV1TOX.mjs";import{m as Fs}from"../chunks/Dbye-yJ_.mjs";import{L as gl,S as vl}from"../chunks/DOxs1HVo.mjs";import{I as $l}from"../chunks/CP2Qnlc8.mjs";import{r as ml}from"../chunks/DROPn1Pc.mjs";import{r as nr}from"../chunks/DjpzM3rH.mjs";import{k as pl}from"../chunks/B-nA_Kf0.mjs";import{ac as Lr,y as ts,z as rs,A as ss,C as hl,B as yl,D as Cl,E as wl,H as ns,F as _l,G as as,b as Pl,I as kl,M as bl,K as xl,J as Sl,N as Ol,L as Rl}from"../chunks/7wO9rilM.mjs";import{I as Al,i as Tl,c as Il,C as Dl,T as Ll}from"../chunks/eNC_cPMf.mjs";import{t as _r,b as it,c as El,u as Ml,e as Nl}from"../chunks/BnOv7LJi.mjs";import{t as Vl}from"../chunks/CCCHPHPl.mjs";import{S as os,a as Fl}from"../chunks/DB8w6JNV.mjs";function Hl(r){g(r,r.v+1)}function Bl(r){let t=0,n=pn(0),e;return()=>{fs()&&(s(n),gs(()=>(t===0&&(e=w(()=>r(()=>Hl(n)))),t+=1,()=>{Ht().then(()=>{t-=1,t===0&&(e==null||e(),e=void 0)})})))}}function zl(r,t){let n=r();const e=Be(n,a=>{let o=n!==r();const c=hn(()=>{gs(()=>{const u=r();o&&a(u)})});return o=!0,c});return t?{set:t,update:a=>t(a(r())),subscribe:e.subscribe}:{subscribe:e.subscribe}}function Gl(r){let t;const n=Bl(a=>{let o=!1;const c=r.subscribe(u=>{t=u,o&&a()});return o=!0,c});function e(){return fs()?(n(),t):He(r)}return"set"in r?{get current(){return e()},set current(a){r.set(a)}}:{get current(){return e()}}}const Wl=Object.freeze(Object.defineProperty({__proto__:null,derived:_n,fromStore:Gl,get:He,readable:vs,readonly:Pn,toStore:zl,writable:Be},Symbol.toStringTag,{value:"Module"}));function jl(r,t,...n){return ql(r,Tl,t,n)}function ql(r,t,n,e){return function a(o,c){if(c>=e.length)return n(o);const u=new Al,l=e[c++];let f=-1;for(const C of o){const p=l(C,++f,o),h=u.get(p);h?h.push(C):u.set(p,[C])}for(const[C,p]of u)u.set(C,a(p,c));return t(u)}(r,0)}const Ul=Il("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Ql(r,t){for(var n=-1,e=r==null?0:r.length,a=Array(e);++n<e;)a[n]=t(r[n],n,r);return a}var is=os?os.prototype:void 0,ls=is?is.toString:void 0;function Hs(r){if(typeof r=="string")return r;if(zt(r))return Ql(r,Hs)+"";if(Lr(r))return ls?ls.call(r):"";var t=r+"";return t=="0"&&1/r==-1/0?"-0":t}function Yl(r){return r}var Kl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xl=/^\w*$/;function Er(r,t){if(zt(r))return!1;var n=typeof r;return n=="number"||n=="symbol"||n=="boolean"||r==null||Lr(r)?!0:Xl.test(r)||!Kl.test(r)||t!=null&&r in Object(t)}var Zl="Expected a function";function Mr(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(Zl);var n=function(){var e=arguments,a=t?t.apply(this,e):e[0],o=n.cache;if(o.has(a))return o.get(a);var c=r.apply(this,e);return n.cache=o.set(a,c)||o,c};return n.cache=new(Mr.Cache||Ns),n}Mr.Cache=Ns;var Jl=500;function eu(r){var t=Mr(r,function(e){return n.size===Jl&&n.clear(),e}),n=t.cache;return t}var tu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ru=/\\(\\)?/g,su=eu(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(tu,function(n,e,a,o){t.push(a?o.replace(ru,"$1"):e||n)}),t});function nu(r){return r==null?"":Hs(r)}function Bs(r,t){return zt(r)?r:Er(r,t)?[r]:su(nu(r))}function ir(r){if(typeof r=="string"||Lr(r))return r;var t=r+"";return t=="0"&&1/r==-1/0?"-0":t}function zs(r,t){t=Bs(t,r);for(var n=0,e=t.length;r!=null&&n<e;)r=r[ir(t[n++])];return n&&n==e?r:void 0}function au(r,t,n){var e=r==null?void 0:zs(r,t);return e===void 0?n:e}var ou=1,iu=2;function lu(r,t,n,e){var a=n.length,o=a;if(r==null)return!o;for(r=Object(r);a--;){var c=n[a];if(c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++a<o;){c=n[a];var u=c[0],l=r[u],f=c[1];if(c[2]){if(l===void 0&&!(u in r))return!1}else{var C=new Zi,p;if(!(p===void 0?Ar(f,l,ou|iu,e,C):p))return!1}}return!0}function Gs(r){return r===r&&!Fl(r)}function uu(r){for(var t=Ji(r),n=t.length;n--;){var e=t[n],a=r[e];t[n]=[e,a,Gs(a)]}return t}function Ws(r,t){return function(n){return n==null?!1:n[r]===t&&(t!==void 0||r in Object(n))}}function cu(r){var t=uu(r);return t.length==1&&t[0][2]?Ws(t[0][0],t[0][1]):function(n){return n===r||lu(n,r,t)}}function du(r,t){return r!=null&&t in Object(r)}function fu(r,t,n){t=Bs(t,r);for(var e=-1,a=t.length,o=!1;++e<a;){var c=ir(t[e]);if(!(o=r!=null&&n(r,c)))break;r=r[c]}return o||++e!=a?o:(a=r==null?0:r.length,!!a&&el(a)&&tl(c,a)&&(zt(r)||rl(r)))}function gu(r,t){return r!=null&&fu(r,t,du)}var vu=1,$u=2;function mu(r,t){return Er(r)&&Gs(t)?Ws(ir(r),t):function(n){var e=au(n,r);return e===void 0&&e===t?gu(n,r):Ar(t,e,vu|$u)}}function pu(r){return function(t){return t==null?void 0:t[r]}}function hu(r){return function(t){return zs(t,r)}}function yu(r){return Er(r)?pu(ir(r)):hu(r)}function Cu(r){return typeof r=="function"?r:r==null?Yl:typeof r=="object"?zt(r)?mu(r[0],r[1]):cu(r):yu(r)}function wu(r,t,n){n=typeof n=="function"?n:void 0;var e=n?n(r,t):void 0;return e===void 0?Ar(r,t,void 0,n):!!e}function _u(r,t){for(var n,e=-1,a=r.length;++e<a;){var o=t(r[e]);o!==void 0&&(n=n===void 0?o:n+o)}return n}function Pu(r,t){return r&&r.length?_u(r,Cu(t)):0}function Or(){let r;return[new Promise(n=>r=n),r]}class ku{constructor(t,n){me(this,"currentConfig");me(this,"currentAuxData");me(this,"configList");me(this,"cardStateCustomizer");me(this,"currentDeck");me(this,"deckLimits");me(this,"defaults");me(this,"addonComponents");me(this,"newCardsIgnoreReviewLimit");me(this,"applyAllParentLimits");me(this,"fsrs");me(this,"fsrsReschedule",Be(!1));me(this,"daysSinceLastOptimization");me(this,"currentPresetName");me(this,"originalConfigsPromise");me(this,"originalConfigsResolve");me(this,"targetDeckId");me(this,"configs");me(this,"selectedIdx");me(this,"configListSetter");me(this,"modifiedConfigs",new Set);me(this,"removedConfigs",[]);me(this,"schemaModified");me(this,"_presetAssignmentsChanged",!1);me(this,"loadedPresets",new Set);var e,a;this.targetDeckId=t,this.currentDeck=n.currentDeck,this.defaults=n.defaults.config,this.configs=n.allConfig.map(o=>({config:o.config,useCount:o.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(o=>o.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Be(n.cardStateCustomizer),this.deckLimits=Be((a=(e=n.currentDeck)==null?void 0:e.limits)!=null?a:xu()),this.newCardsIgnoreReviewLimit=Be(n.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Be(n.applyAllParentLimits),this.fsrs=Be(n.fsrs),this.daysSinceLastOptimization=Be(n.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Be(this.getCurrentConfig()),this.currentAuxData=Be(this.getCurrentAuxData()),this.currentPresetName=Be(this.configs[this.selectedIdx].config.name),this.configList=vs(this.getConfigList(),o=>{this.configListSetter=o}),this.schemaModified=n.schemaModified,this.addonComponents=Be([]),He(this.configList),this.currentConfig.subscribe(o=>this.onCurrentConfigChanged(o)),this.currentAuxData.subscribe(o=>this.onCurrentAuxDataChanged(o)),this.loadedPresets.add(this.configs[this.selectedIdx].config.id),[this.originalConfigsPromise,this.originalConfigsResolve]=Or()}async markCurrentPresetAsLoaded(){const t=this.configs[this.selectedIdx].config.id,n=this.loadedPresets;if(t&&!n.has(t)){n.add(t);const e=await this.originalConfigsPromise,a=e.configs.findIndex(o=>o.id===t);a!==-1&&(e.configs[a]=tr(this.configs[this.selectedIdx].config))}}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList(),Ht().then(()=>this.markCurrentPresetAsLoaded())}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const n=this.ensureNewNameUnique(t),e=this.configs[this.selectedIdx].config;e.name=n,e.id&&this.modifiedConfigs.add(e.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,n){const e=this.ensureNewNameUnique(t),o={config:new Zs({id:0n,name:e,config:new Js(tr(n))}),useCount:0};this.configs.push(o),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1);const n=Math.max(0,this.selectedIdx-1);this.setCurrentIndex(n)}dataForSaving(t){const e=[...this.configs.map(a=>a.config).filter((a,o)=>o!==this.selectedIdx&&(a.id===0n||this.modifiedConfigs.has(a.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:e,mode:t,cardStateCustomizer:He(this.cardStateCustomizer),limits:He(this.deckLimits),newCardsIgnoreReviewLimit:He(this.newCardsIgnoreReviewLimit),applyAllParentLimits:He(this.applyAllParentLimits),fsrs:He(this.fsrs),fsrsReschedule:He(this.fsrsReschedule)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await en(this.dataForSaving(t))}onCurrentConfigChanged(t){const n=this.configs[this.selectedIdx].config;Hr(t,n.config)||(n.config=t,n.id&&this.modifiedConfigs.add(n.id))}onCurrentAuxDataChanged(t){const n=this.getCurrentAuxData();Hr(n,t)||this.currentConfig.update(e=>{const a=new TextEncoder().encode(JSON.stringify(t));return e.other=a,e})}ensureNewNameUnique(t){return this.configs.findIndex(e=>e.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return tr(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return bu(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((n,e)=>vn(n.config.name,e.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(n=>n.config.name==t)}getConfigList(){return this.configs.map((n,e)=>{const a=n.useCount+(e===this.selectedIdx?1:0);return{name:n.config.name,current:e===this.selectedIdx,idx:e,useCount:a}})}getAllConfigs(){return tr({configs:this.configs.map(t=>t.config),cardStateCustomizer:He(this.cardStateCustomizer),limits:He(this.deckLimits),newCardsIgnoreReviewLimit:He(this.newCardsIgnoreReviewLimit),applyAllParentLimits:He(this.applyAllParentLimits),fsrs:He(this.fsrs),fsrsReschedule:He(this.fsrsReschedule),currentConfig:He(this.currentConfig)})}async isModified(){const t=await this.originalConfigsPromise,n=this.getAllConfigs();return!wu(t,n,(e,a)=>{if(typeof e=="number"&&typeof a=="number")return Math.fround(e)===Math.fround(a)})}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function bu(r){if(!r.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(r))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function xu(){return new tn({})}class wt{constructor(t,n,e,a,o){me(this,"title");me(this,"value");me(this,"setter");me(this,"disabledValue");me(this,"startValue");me(this,"initialValue");this.title=t,this.value=this.initialValue=n,this.setter=e,this.disabledValue=a,this.startValue=o}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var n,e;this.value=(e=(n=this.value)!=null?n:this.startValue)!=null?e:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}async function Nr(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await Ht()}function Vt(r){return r.fsrsParams6?r.fsrsParams6:r.fsrsParams5?r.fsrsParams5:r.fsrsParams4}const Su=async({params:r})=>{const t=Number(r.deckId),n=BigInt(t),e=await rn({did:n});return{state:new ku(BigInt(n),e)}},mf=Object.freeze(Object.defineProperty({__proto__:null,load:Su},Symbol.toStringTag,{value:"Module"}));hs("svelte",bn);hs("svelte/store",Wl);function Ou(r,t){Ce(t,!1);const n=De(),e=()=>fe(c,"$components",n),a=()=>fe(u,"$auxData",n);let o=H(t,"state",8);const c=o().addonComponents,u=o().currentAuxData;ke();var l=tt(),f=ne(l);{var C=p=>{st(p,{title:"Add-ons",children:(h,$)=>{var P=tt(),y=ne(P);Bt(y,1,e,or,(O,_)=>{var x=tt(),R=ne(x);Sr(R,()=>s(_).component,(B,q)=>{q(B,$s(()=>s(_),{get data(){return Rt(),a()},set data(G){yt(u,G)},$$legacy:!0}))}),d(O,x)}),d(h,P)},$$slots:{default:!0}})};Te(f,p=>{e().length&&p(C)})}d(r,l),we()}function Pr(r,t){let n,e;if(t instanceof Element){if(n=t,e=Array.prototype.indexOf.call(r,n),e<0)return null}else if(typeof t=="string"){const a=r.namedItem(t);if(!a||(n=a,e=Array.prototype.indexOf.call(r,n),e<0))return null}else if(t<0){e=r.length+t;const a=r.item(e);if(!a)return null;n=a}else{e=t;const a=r.item(e);if(!a)return null;n=a}return[n,e]}class Ru{constructor(t){me(this,"parent");this.parent=t}insertElement(t,n){const e=Pr(this.parent.children,n);if(!e)return-1;const[a,o]=e;return this.parent.insertBefore(t,a[0]),o}appendElement(t,n){var u;const e=Pr(this.parent.children,n);if(!e)return-1;const[a,o]=e,c=(u=a.nextElementSibling)!=null?u:null;return this.parent.insertBefore(t,c),o+1}updateElement(t,n){const e=Pr(this.parent.children,n);return e?(t(...e),!0):!1}}function Au(r){return new Ru(r)}function Tu(r){return r.nodeType===Node.ELEMENT_NODE}function Iu(r){function t(e){yn(r,e)}return[{get(){return Rr(r)},available(){return Cn(r)}},t]}function Du(r,t,n,e){const a=Be([]);a.subscribe(t);function o(P,y){a.update(O=>(O.splice(P,0,y),O))}const[c,u]=Or(),l=c.then(Au),f=Be([]);async function C(P,y){const[O,_]=Or(),x=await l,R=r();function B(T){return!P.id||T.id===P.id}async function q(T,M){for(const I of T)for(const m of I.addedNodes){if(!Tu(m)||!B(m))continue;const N=y(m,x);return N>=0&&o(N,R),_(void 0),M.disconnect()}}new MutationObserver(q).observe(x.parent,{childList:!0});const E={component:P,hostProps:R};return f.update(T=>(T.push(E),T)),await O,{destroy(){f.update(T=>(ol(T,E),T))}}}async function p(P,y){return(await l).updateElement((_,x)=>{a.update(R=>(R[x]=P(R[x]),R))},y)}const h=e({addComponent:C,updateProps:p});function $(){const P=r();return a.update(y=>(y.push(P),y)),P}return n({getProps:$}),{dynamicSlotted:f,resolveSlotContainer:u,slotsInterface:h}}function Lu(){return{detach:Be(!1)}}function Eu({addComponent:r,updateProps:t}){function n(u,l=0){return r(u,(f,C)=>C.insertElement(f,l))}function e(u,l=-1){return r(u,(f,C)=>C.appendElement(f,l))}function a(u){return t(l=>(l.detach.set(!1),l),u)}function o(u){return t(l=>(l.detach.set(!0),l),u)}function c(u){return t(l=>(l.detach.update(f=>!f),l),u)}return{insert:n,append:e,show:a,hide:o,toggle:c}}const Mu=Symbol("dynamicSlotting"),[us,Nu]=Iu(Mu);var Vu=K('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function lt(r,t){Ce(t,!1);const n=De(),e=()=>fe(h,"$dynamicSlotted",n);function a(_){return _}let o=H(t,"slotHost",8),c=H(t,"createProps",8,Lu),u=H(t,"updatePropsList",8,a),l=H(t,"setSlotHostContext",8,Nu),f=H(t,"createInterface",8,Eu);const{slotsInterface:C,resolveSlotContainer:p,dynamicSlotted:h}=Du(c(),u(),l(),f());let $=H(t,"api",8);Object.assign($(),C),ke();var P=Vu(),y=z(P);Pt(y,t,"default",{});var O=v(y,2);Bt(O,1,e,({component:_,hostProps:x})=>_.id,(_,x)=>{let R=()=>s(x).component,B=()=>s(x).hostProps;var q=tt(),G=ne(q);Sr(G,o,(E,T)=>{T(E,{get id(){return R().id},get hostProps(){return B()},children:(M,I)=>{var m=tt(),i=ne(m);Sr(i,()=>R().component,(N,L)=>{L(N,$s(()=>R().props))}),d(M,m)},$$slots:{default:!0}})}),d(_,q)}),A(P),sl(P,_=>p==null?void 0:p(_)),d(r,P),we()}var Fu=K('<div class="item svelte-u5rx4p"><!></div>');function Y(r,t){var C;Ce(t,!1);const n=De(),e=()=>fe(c,"$detach",n);let a=H(t,"id",8,void 0),o=H(t,"hostProps",8,void 0);us.available()||console.log("Item: should always have a slotHostContext");const{detach:c}=(C=o())!=null?C:us.get().getProps();ke();var u=Fu(),l=z(u);{var f=p=>{var h=tt(),$=ne(h);Pt($,t,"default",{}),d(p,h)};Te(l,p=>{e()||p(f)})}A(u),S(()=>et(u,"id",a())),d(r,u),we()}var Hu=K(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function At(r,t){Ce(t,!1);let n=H(t,"title",8);ke(),ee();var e=Hu(),a=ne(e),o=v(a);S(()=>et(o,"title",xr()));var c=z(o);ar(c,{icon:il}),A(o),S(()=>{var u;return V(a,`${(u=n())!=null?u:""} `)}),d(r,e),we()}var Bu=K('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),zu=K('<div class="m-2"><!></div>');function Gu(r,t){let n=H(t,"value",12),e=H(t,"title",8);var a=zu(),o=z(a);xt(o,{children:(c,u)=>{var l=Bu(),f=z(l),C=z(f);At(C,{get title(){return e()}}),A(f);var p=v(f,2),h=z(p);ms(h),A(p),A(l),Wt(h,n),d(c,l)},$$slots:{default:!0,revert:(c,u)=>{Gt(c,{slot:"revert",defaultValue:"",get value(){return n()},set value(l){n(l)},$$legacy:!0})}}}),A(a),d(r,a)}var Wu=K('<span class="invisible svelte-xwrhci"> </span>'),ju=K('<span class="suffix svelte-xwrhci"></span>'),qu=K('<div class="spinner decrement svelte-xwrhci" tabindex="-1" role="button"><!></div> <div class="spinner increment svelte-xwrhci" tabindex="-1" role="button"><!></div>',1),Uu=K('<div class="spin-box svelte-xwrhci"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-xwrhci"> <!> <!></div>');function js(r,t){Ce(t,!1);const n=D();let e=H(t,"value",12),a=H(t,"step",8,1),o=H(t,"min",8,1),c=H(t,"max",8,9999),u=H(t,"percentage",8,!1),l=D(),f=D(!1),C=D();function p(b){Number.isNaN(b)||e(Math.min(c(),Math.max(o(),b))),Ht().then(()=>{at(l,s(l).value=s($)),R(s($))})}function h(b){if(Math.floor(b)===b)return 0;const W=b.toString().split(".")[1].length||0,F=u()?W-2:W;return Math.max(0,F)}let $=D();function P(){p(parseFloat(this.value)/s(C))}function y(b){s(f)&&(p(e()+(b.deltaY<0?a():-a())),b.preventDefault())}function O(b){p(e()+b),s(G)&&setTimeout(()=>O(b),E)}const _=[1500,1250,1e3,750,500,250];async function x(b){g(G,!0),E=128,g(T,setTimeout(b,250));for(const W of _)E=await new Promise(F=>setTimeout(()=>F(s(G)?E/2:128),W))}function R(b){g(q,Rn({pct:b}).replaceAll("%","-%-").split("-"))}function B(){R(s(l).value)}let q=D(),G=D(!1),E,T=D();oe(()=>Ze(u()),()=>{g(C,u()?100:1)}),oe(()=>(Ze(e()),s(C),Ze(a())),()=>{g($,(e()*s(C)).toFixed(h(a())))}),oe(()=>s($),()=>{R(s($))}),oe(()=>(Ze(u()),s(q)),()=>{g(n,u()&&!s(q)[0]?"2.2ch":void 0)}),We(),ke();var M=Uu(),I=z(M);ht(I),Ft(I,b=>g(l,b),()=>s(l));var m=v(I,2);{var i=b=>{var W=ju();Bt(W,5,()=>s(q),or,(F,se)=>{var Z=tt(),U=ne(Z);{var ue=ce=>{var xe=Q("%");d(ce,xe)},_e=ce=>{var xe=Wu(),be=z(xe,!0);A(xe),S(()=>V(be,s(se))),d(ce,xe)};Te(U,ce=>{s(se)=="%"?ce(ue):ce(_e,!1)})}d(F,Z)}),A(W),d(b,W)};Te(m,b=>{u()&&b(i)})}var N=v(m,2);{var L=b=>{var W=qu(),F=ne(W);S(()=>et(F,"title",Sn()));var se=z(F);es(se,{children:(ue,_e)=>{ar(ue,{icon:Vs})},$$slots:{default:!0}}),A(F);var Z=v(F,2);S(()=>et(Z,"title",On()));var U=z(Z);es(U,{children:(ue,_e)=>{ar(ue,{icon:ll})},$$slots:{default:!0}}),A(Z),S(()=>{_t(F,"active",e()>o()),_t(Z,"active",e()<c())}),Re("click",F,()=>{s(l).focus(),e()>o()&&O(-a())}),Re("mousedown",F,()=>x(()=>{e()>o()&&O(-a())})),Re("mouseup",F,()=>{clearTimeout(s(T)),g(G,!1)}),Re("click",Z,()=>{s(l).focus(),e()<c()&&O(a())}),Re("mousedown",Z,()=>x(()=>{e()<c()&&O(a())})),Re("mouseup",Z,()=>{clearTimeout(s(T)),g(G,!1)}),d(b,W)};Te(N,b=>{ul()&&b(L)})}A(M),S(()=>{et(I,"min",o()*s(C)),et(I,"max",c()*s(C)),et(I,"step",a()*s(C)),Ir(I,s($)),Yi(I,"padding-left",s(n))}),Re("blur",I,P),Re("input",I,B),Re("focusin",I,()=>g(f,!0)),Re("focusout",I,()=>g(f,!1)),Re("wheel",M,y),d(r,M),we()}var Qu=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Yu=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function ft(r,t){let n=H(t,"value",12),e=H(t,"defaultValue",8),a=H(t,"min",8,0),o=H(t,"max",8,9999),c=H(t,"step",8,.01),u=H(t,"percentage",8,!1);var l=Yu(),f=ne(l);Ge(f,()=>({"--cols":13})),Me(f.lastChild,{children:(C,p)=>{var h=Qu(),$=ne(h);Ge($,()=>({"--col-size":7})),kt($.lastChild,{breakpoint:"xs",children:(y,O)=>{var _=tt(),x=ne(_);Pt(x,t,"default",{}),d(y,_)},$$slots:{default:!0}}),A($);var P=v($,2);Ge(P,()=>({"--col-size":6})),kt(P.lastChild,{breakpoint:"xs",children:(y,O)=>{xt(y,{children:(_,x)=>{js(_,{get min(){return a()},get max(){return o()},get step(){return c()},get percentage(){return u()},get value(){return n()},set value(R){n(R)},$$legacy:!0})},$$slots:{default:!0,revert:(_,x)=>{Gt(_,{slot:"revert",get defaultValue(){return e()},get value(){return n()},set value(R){n(R)},$$legacy:!0})}}})},$$slots:{default:!0}}),A(P),d(C,h)},$$slots:{default:!0}}),A(f),d(r,l)}var Ku=K("<!> <!>",1),Xu=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Zu=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Ue(r,t){let n=H(t,"value",12),e=H(t,"defaultValue",8),a=H(t,"min",8,0),o=H(t,"max",8,9999);var c=Zu(),u=ne(c);Ge(u,()=>({"--cols":13})),Me(u.lastChild,{children:(l,f)=>{var C=Xu(),p=ne(C);Ge(p,()=>({"--col-size":7})),kt(p.lastChild,{breakpoint:"xs",children:($,P)=>{var y=tt(),O=ne(y);Pt(O,t,"default",{}),d($,y)},$$slots:{default:!0}}),A(p);var h=v(p,2);Ge(h,()=>({"--col-size":6})),kt(h.lastChild,{breakpoint:"xs",children:($,P)=>{Me($,{class:"flex-grow-1",children:(y,O)=>{var _=Ku(),x=ne(_);Pt(x,t,"tabs",{});var R=v(x,2);xt(R,{children:(B,q)=>{js(B,{get min(){return a()},get max(){return o()},get value(){return n()},set value(G){n(G)},$$legacy:!0})},$$slots:{default:!0,revert:(B,q)=>{Gt(B,{slot:"revert",get defaultValue(){return e()},get value(){return n()},set value(G){n(G)},$$legacy:!0})}}}),d(y,_)},$$slots:{default:!0}})},$$slots:{default:!0}}),A(h),d(l,C)},$$slots:{default:!0}}),A(u),d(r,c)}var Ju=K('<input type="date" class="svelte-1xsggh9">'),ec=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),tc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),rc=K("<div><!></div>");function sc(r,t){Ce(t,!1);let n=H(t,"date",12);oe(()=>Ze(n()),()=>{n(n()?n():"1970-01-01")}),We();var e=rc(),a=z(e);xt(a,{children:(o,c)=>{var u=tc(),l=ne(u);Ge(l,()=>({"--cols":13})),Me(l.lastChild,{children:(f,C)=>{var p=ec(),h=ne(p);Ge(h,()=>({"--col-size":7})),kt(h.lastChild,{breakpoint:"xs",children:(P,y)=>{var O=tt(),_=ne(O);Pt(_,t,"default",{}),d(P,O)},$$slots:{default:!0}}),A(h);var $=v(h,2);Ge($,()=>({"--col-size":6})),kt($.lastChild,{breakpoint:"xs",children:(P,y)=>{var O=Ju();ht(O),Wt(O,n),d(P,O)},$$slots:{default:!0}}),A($),d(f,p)},$$slots:{default:!0}}),A(l),d(o,u)},$$slots:{default:!0}}),A(e),d(r,e),we()}var nc=K("<!> <!> <!> <!> <!>",1),ac=K("<!> <!> <!>",1),oc=K("<!> <!> <!> <!>",1);function ic(r,t){Ce(t,!1);const n=De(),e=()=>fe(p,"$config",n),a=()=>fe(P,"$fsrs",n),o=()=>fe($,"$cardStateCustomizer",n),c=D(),u=D(),l=D();let f=H(t,"state",8),C=H(t,"api",8);const p=f().currentConfig,h=f().defaults,$=f().cardStateCustomizer,P=f().fsrs,y={maximumInterval:{title:ys(),help:An(),url:ye.DeckOptions.maximumInterval},historicalRetention:{title:Br(),help:Tn(),sched:Xe.FSRS},ignoreRevlogsBeforeMs:{title:zr(),help:In(),sched:Xe.FSRS},startingEase:{title:Dn(),help:Ln(),url:ye.DeckOptions.startingEase,sched:Xe.SM2},easyBonus:{title:En(),help:Mn(),url:ye.DeckOptions.easyBonus,sched:Xe.SM2},intervalModifier:{title:Nn(),help:Vn(),url:ye.DeckOptions.intervalModifier,sched:Xe.SM2},hardInterval:{title:Fn(),help:Hn(),url:ye.DeckOptions.hardInterval,sched:Xe.SM2},newInterval:{title:Bn(),help:zn(),url:ye.DeckOptions.newInterval,sched:Xe.SM2},customScheduling:{title:Gn(),help:Wn(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling"}},O=Object.values(y);let _=D(null),x="";function R(i){x!=i&&(q&&i&&i!="1970-01-01"?(x=i,sn({search:e().paramSearch||`preset:"${f().getCurrentNameForSearch()}" -is:suspended`,ignoreRevlogsBeforeDate:i}).then(N=>{g(_,N)})):g(_,null),q=!0)}let B=D(void 0),q=!0;const G=1e3;let E=D("alert-warning"),T=D(),M=D();function I(i){s(T).show(),s(M).to(i)}oe(()=>e(),()=>{g(c,e().maximumReviewInterval<50?"alert-danger":"alert-warning")}),oe(()=>(e(),vt),()=>{g(u,e().maximumReviewInterval<180?jn():"")}),oe(()=>(s(B),e()),()=>{clearTimeout(s(B)),g(B,setTimeout(()=>{R(e().ignoreRevlogsBeforeDate)},G))}),oe(()=>s(_),()=>{s(_)&&(Number(s(_).included)/Number(s(_).total)<.1?g(E,"alert-danger"):s(_).included!=s(_).total?g(E,"alert-warning"):g(E,"alert-info"))}),oe(()=>(s(_),vt),()=>{g(l,s(_)?qn({included:s(_).included.toString(),totalCards:s(_).total.toString()}):"")}),We(),ke();var m=de(()=>Gr());st(r,{get title(){return s(m)},children:(i,N)=>{lt(i,{slotHost:Y,get api(){return C()},children:(L,b)=>{var W=oc(),F=ne(W);Y(F,{children:(ce,xe)=>{Ue(ce,{get defaultValue(){return h.maximumReviewInterval},min:1,max:365*100,get value(){return e().maximumReviewInterval},set value(be){X(p,w(e).maximumReviewInterval=be,w(e))},children:(be,le)=>{te(be,{$$events:{click:()=>I(Object.keys(y).indexOf("maximumInterval"))},children:($e,Se)=>{ee();var je=Q();S(()=>V(je,y.maximumInterval.title)),d($e,je)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var se=v(F,2);Y(se,{children:(ce,xe)=>{ze(ce,{get warning(){return s(u)},get className(){return s(c)}})},$$slots:{default:!0}});var Z=v(se,2);{var U=ce=>{var xe=nc(),be=ne(xe);Y(be,{children:(pe,Le)=>{ft(pe,{get defaultValue(){return h.initialEase},min:1.31,max:5,get value(){return e().initialEase},set value(re){X(p,w(e).initialEase=re,w(e))},children:(re,Ne)=>{te(re,{$$events:{click:()=>I(Object.keys(y).indexOf("startingEase"))},children:(he,Ie)=>{ee();var Oe=Q();S(()=>V(Oe,y.startingEase.title)),d(he,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var le=v(be,2);Y(le,{children:(pe,Le)=>{ft(pe,{get defaultValue(){return h.easyMultiplier},min:1,max:5,get value(){return e().easyMultiplier},set value(re){X(p,w(e).easyMultiplier=re,w(e))},children:(re,Ne)=>{te(re,{$$events:{click:()=>I(Object.keys(y).indexOf("easyBonus"))},children:(he,Ie)=>{ee();var Oe=Q();S(()=>V(Oe,y.easyBonus.title)),d(he,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var $e=v(le,2);Y($e,{children:(pe,Le)=>{ft(pe,{get defaultValue(){return h.intervalMultiplier},min:.5,max:2,get value(){return e().intervalMultiplier},set value(re){X(p,w(e).intervalMultiplier=re,w(e))},children:(re,Ne)=>{te(re,{$$events:{click:()=>I(Object.keys(y).indexOf("intervalModifier"))},children:(he,Ie)=>{ee();var Oe=Q();S(()=>V(Oe,y.intervalModifier.title)),d(he,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Se=v($e,2);Y(Se,{children:(pe,Le)=>{ft(pe,{get defaultValue(){return h.hardMultiplier},min:.5,max:1.3,get value(){return e().hardMultiplier},set value(re){X(p,w(e).hardMultiplier=re,w(e))},children:(re,Ne)=>{te(re,{$$events:{click:()=>I(Object.keys(y).indexOf("hardInterval"))},children:(he,Ie)=>{ee();var Oe=Q();S(()=>V(Oe,y.hardInterval.title)),d(he,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var je=v(Se,2);Y(je,{children:(pe,Le)=>{ft(pe,{get defaultValue(){return h.lapseMultiplier},max:1,get value(){return e().lapseMultiplier},set value(re){X(p,w(e).lapseMultiplier=re,w(e))},children:(re,Ne)=>{te(re,{$$events:{click:()=>I(Object.keys(y).indexOf("newInterval"))},children:(he,Ie)=>{ee();var Oe=Q();S(()=>V(Oe,y.newInterval.title)),d(he,Oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(ce,xe)},ue=ce=>{var xe=ac(),be=ne(xe);ft(be,{get defaultValue(){return h.historicalRetention},min:.5,max:1,percentage:!0,get value(){return e().historicalRetention},set value(Se){X(p,w(e).historicalRetention=Se,w(e))},children:(Se,je)=>{te(Se,{$$events:{click:()=>I(Object.keys(y).indexOf("historicalRetention"))},children:(pe,Le)=>{ee();var re=Q();S(()=>V(re,Br())),d(pe,re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var le=v(be,2);Y(le,{children:(Se,je)=>{sc(Se,{get date(){return e().ignoreRevlogsBeforeDate},set date(pe){X(p,w(e).ignoreRevlogsBeforeDate=pe,w(e))},children:(pe,Le)=>{te(pe,{$$events:{click:()=>I(Object.keys(y).indexOf("ignoreRevlogsBeforeMs"))},children:(re,Ne)=>{ee();var he=Q();S(()=>V(he,zr())),d(re,he)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var $e=v(le,2);Y($e,{children:(Se,je)=>{ze(Se,{get warning(){return s(l)},get className(){return s(E)}})},$$slots:{default:!0}}),d(ce,xe)};Te(Z,ce=>{a()?ce(ue,!1):ce(U)})}var _e=v(Z,2);Y(_e,{children:(ce,xe)=>{Gu(ce,{get title(){return y.customScheduling.title},get value(){return Rt(),o()},set value(be){yt($,be)},$$events:{click:()=>I(Object.keys(y).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),d(L,W)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(i,N)=>{var L=de(()=>Gr());$t(i,{get title(){return s(L)},get url(){return ye.DeckOptions.advanced},slot:"tooltip",get fsrs(){return a()},helpSections:O,$$events:{mount:b=>{g(T,b.detail.modal),g(M,b.detail.carousel)}}})}}}),we()}var lc=K("<!> <!>",1);function uc(r,t){Ce(t,!1);const n=De(),e=()=>fe(c,"$config",n);let a=H(t,"state",8),o=H(t,"api",8);const c=a().currentConfig,u=a().defaults,l={disableAutoplay:{title:Un(),help:Qn()},skipQuestionWhenReplaying:{title:Yn(),help:Kn()}},f=Object.values(l);let C=D(),p=D();function h(P){s(C).show(),s(p).to(P)}ke();var $=de(()=>Wr());st(r,{get title(){return s($)},children:(P,y)=>{lt(P,{slotHost:Y,get api(){return o()},children:(O,_)=>{var x=lc(),R=ne(x);Y(R,{children:(q,G)=>{Qe(q,{get defaultValue(){return u.disableAutoplay},get value(){return e().disableAutoplay},set value(E){X(c,w(e).disableAutoplay=E,w(e))},children:(E,T)=>{te(E,{$$events:{click:()=>h(Object.keys(l).indexOf("disableAutoplay"))},children:(M,I)=>{ee();var m=Q();S(()=>V(m,l.disableAutoplay.title)),d(M,m)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var B=v(R,2);Y(B,{children:(q,G)=>{Qe(q,{get defaultValue(){return u.skipQuestionWhenReplayingAnswer},get value(){return e().skipQuestionWhenReplayingAnswer},set value(E){X(c,w(e).skipQuestionWhenReplayingAnswer=E,w(e))},children:(E,T)=>{te(E,{$$events:{click:()=>h(Object.keys(l).indexOf("skipQuestionWhenReplaying"))},children:(M,I)=>{ee();var m=Q();S(()=>V(m,l.skipQuestionWhenReplaying.title)),d(M,m)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(O,x)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(P,y)=>{var O=de(()=>Wr());$t(P,{get title(){return s(O)},get url(){return ye.DeckOptions.audio},slot:"tooltip",helpSections:f,$$events:{mount:_=>{g(C,_.detail.modal),g(p,_.detail.carousel)}}})}}}),we()}function cc(){return[{label:Xn(),value:pt.DECK},{label:Zn(),value:pt.DECK_THEN_RANDOM_NOTES},{label:Jn(),value:pt.LOWEST_POSITION},{label:ea(),value:pt.HIGHEST_POSITION},{label:ta(),value:pt.RANDOM_NOTES},{label:ra(),value:pt.RANDOM_CARDS}]}function dc(){return[{label:sa(),value:ot.TEMPLATE},{label:na(),value:ot.NO_SORT},{label:aa(),value:ot.TEMPLATE_THEN_RANDOM},{label:oa(),value:ot.RANDOM_NOTE_THEN_TEMPLATE},{label:Cs(),value:ot.RANDOM_CARD}]}function qs(r){return[{label:ia(),value:rt.DAY},{label:la(),value:rt.DAY_THEN_DECK},{label:ua(),value:rt.DECK_THEN_DAY},{label:ca(),value:rt.INTERVALS_ASCENDING},{label:da(),value:rt.INTERVALS_DESCENDING},...mc(r),{label:fa(),value:rt.RETRIEVABILITY_ASCENDING},{label:ga(),value:rt.RETRIEVABILITY_DESCENDING},{label:Cs(),value:rt.RANDOM},{label:va(),value:rt.ADDED},{label:$a(),value:rt.REVERSE_ADDED}]}function cs(){return[{label:ma(),value:pr.MIX_WITH_REVIEWS},{label:pa(),value:pr.AFTER_REVIEWS},{label:ha(),value:pr.BEFORE_REVIEWS}]}function fc(){return[{label:ya(),value:St.SUSPEND},{label:Ca(),value:St.TAG_ONLY}]}function gc(){return[{label:wa(),value:br.DUE},{label:_a(),value:br.RANDOM}]}function vc(){return[{label:Pa(),value:Mt.BURY_CARD},{label:ka(),value:Mt.ANSWER_AGAIN},{label:ba(),value:Mt.ANSWER_GOOD},{label:xa(),value:Mt.ANSWER_HARD},{label:Sa(),value:Mt.SHOW_REMINDER}]}function $c(){return[{label:Oa(),value:Fr.SHOW_ANSWER},{label:Ra(),value:Fr.SHOW_REMINDER}]}function mc(r){const t=[{label:r?Aa():Ta(),value:rt.EASE_ASCENDING},{label:r?Ia():Da(),value:rt.EASE_DESCENDING}];return r&&t.reverse(),t}var pc=K("<!> <!> <!> <!> <!>",1);function hc(r,t){Ce(t,!1);const n=De(),e=()=>fe(c,"$config",n);let a=H(t,"state",8),o=H(t,"api",8);const c=a().currentConfig,u=a().defaults,l={secondsToShowQuestion:{title:La(),help:Ea()},secondsToShowAnswer:{title:Ma(),help:Na()},waitForAudio:{title:Va(),help:Fa()},questionAction:{title:Ha(),help:Ba()},answerAction:{title:za(),help:Ga()}},f=Object.values(l);let C=D(),p=D();function h(P){s(C).show(),s(p).to(P)}ke();var $=de(()=>jr());st(r,{get title(){return s($)},children:(P,y)=>{lt(P,{slotHost:Y,get api(){return o()},children:(O,_)=>{var x=pc(),R=ne(x);Y(R,{children:(T,M)=>{ft(T,{get defaultValue(){return u.secondsToShowQuestion},step:.1,get value(){return e().secondsToShowQuestion},set value(I){X(c,w(e).secondsToShowQuestion=I,w(e))},children:(I,m)=>{te(I,{$$events:{click:()=>h(Object.keys(l).indexOf("secondsToShowQuestion"))},children:(i,N)=>{ee();var L=Q();S(()=>V(L,l.secondsToShowQuestion.title)),d(i,L)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var B=v(R,2);Y(B,{children:(T,M)=>{ft(T,{get defaultValue(){return u.secondsToShowAnswer},step:.1,get value(){return e().secondsToShowAnswer},set value(I){X(c,w(e).secondsToShowAnswer=I,w(e))},children:(I,m)=>{te(I,{$$events:{click:()=>h(Object.keys(l).indexOf("secondsToShowAnswer"))},children:(i,N)=>{ee();var L=Q();S(()=>V(L,l.secondsToShowAnswer.title)),d(i,L)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var q=v(B,2);Y(q,{children:(T,M)=>{Qe(T,{get defaultValue(){return u.waitForAudio},get value(){return e().waitForAudio},set value(I){X(c,w(e).waitForAudio=I,w(e))},children:(I,m)=>{te(I,{$$events:{click:()=>h(Object.keys(l).indexOf("waitForAudio"))},children:(i,N)=>{ee();var L=Q();S(()=>V(L,l.waitForAudio.title)),d(i,L)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var G=v(q,2);Y(G,{children:(T,M)=>{var I=de($c);gt(T,{get defaultValue(){return u.questionAction},get choices(){return s(I)},get value(){return e().questionAction},set value(m){X(c,w(e).questionAction=m,w(e))},children:(m,i)=>{te(m,{$$events:{click:()=>h(Object.keys(l).indexOf("questionAction"))},children:(N,L)=>{ee();var b=Q();S(()=>V(b,l.questionAction.title)),d(N,b)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=v(G,2);Y(E,{children:(T,M)=>{var I=de(vc);gt(T,{get defaultValue(){return u.answerAction},get choices(){return s(I)},get value(){return e().answerAction},set value(m){X(c,w(e).answerAction=m,w(e))},children:(m,i)=>{te(m,{$$events:{click:()=>h(Object.keys(l).indexOf("answerAction"))},children:(N,L)=>{ee();var b=Q();S(()=>V(b,l.answerAction.title)),d(N,b)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(O,x)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(P,y)=>{var O=de(()=>jr());$t(P,{get title(){return s(O)},get url(){return ye.DeckOptions.autoAdvance},slot:"tooltip",helpSections:f,$$events:{mount:_=>{g(C,_.detail.modal),g(p,_.detail.carousel)}}})}}}),we()}var yc=K("<!> <!> <!>",1);function Cc(r,t){Ce(t,!1);const n=De(),e=()=>fe(c,"$config",n);let a=H(t,"state",8),o=H(t,"api",8);const c=a().currentConfig,u=a().defaults,l=`

`+Wa(),f={buryNewSiblings:{title:ja(),help:qa()+l},buryReviewSiblings:{title:Ua(),help:Qa()+l},buryInterdayLearningSiblings:{title:Ya(),help:Ka()+l}},C=Object.values(f);let p=D(),h=D();function $(y){s(p).show(),s(h).to(y)}ke();var P=de(()=>qr());st(r,{get title(){return s(P)},children:(y,O)=>{lt(y,{slotHost:Y,get api(){return o()},children:(_,x)=>{var R=yc(),B=ne(R);Y(B,{children:(E,T)=>{Qe(E,{get defaultValue(){return u.buryNew},get value(){return e().buryNew},set value(M){X(c,w(e).buryNew=M,w(e))},children:(M,I)=>{te(M,{$$events:{click:()=>$(Object.keys(f).indexOf("buryNewSiblings"))},children:(m,i)=>{ee();var N=Q();S(()=>V(N,f.buryNewSiblings.title)),d(m,N)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var q=v(B,2);Y(q,{children:(E,T)=>{Qe(E,{get defaultValue(){return u.buryReviews},get value(){return e().buryReviews},set value(M){X(c,w(e).buryReviews=M,w(e))},children:(M,I)=>{te(M,{$$events:{click:()=>$(Object.keys(f).indexOf("buryReviewSiblings"))},children:(m,i)=>{ee();var N=Q();S(()=>V(N,f.buryReviewSiblings.title)),d(m,N)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var G=v(q,2);Y(G,{children:(E,T)=>{Qe(E,{get defaultValue(){return u.buryInterdayLearning},get value(){return e().buryInterdayLearning},set value(M){X(c,w(e).buryInterdayLearning=M,w(e))},children:(M,I)=>{te(M,{$$events:{click:()=>$(Object.keys(f).indexOf("buryInterdayLearningSiblings"))},children:(m,i)=>{ee();var N=Q();S(()=>V(N,f.buryInterdayLearningSiblings.title)),d(m,N)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(_,R)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(y,O)=>{var _=de(()=>qr());$t(y,{get title(){return s(_)},get url(){return ye.Studying.siblingsAndBurying},slot:"tooltip",helpSections:C,$$events:{mount:x=>{g(p,x.detail.modal),g(h,x.detail.carousel)}}})}}}),we()}function wc(){}var _c=K('<hr class="dropdown-divider">');function Pc(r){var t=_c();d(r,t)}var kc=K('<div class="save svelte-ymxw35"> </div>'),bc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),xc=K("<!> <!> <!> <!> <!> <!>",1),Sc=K('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function Oc(r,t){Ce(t,!1);const n=window.getComputedStyle(document.body).direction=="rtl",e=ps();let a=H(t,"state",8);async function o(){if(await Ht(),a().defaultConfigSelected()){alert(Xa());return}const P=(a().removalWilLForceFullSync()?Za()+" ":"")+Ja({name:a().getCurrentName()});if(confirm($n(P)))try{a().removeCurrentConfig(),e("remove")}catch(y){alert(y)}}async function c(P){await Nr(),a().save(P)}const u="Control+Enter";let l=D(!1);ke();var f=Sc(),C=z(f),p=de(()=>dl(u));Ge(C,()=>({"--border-left-radius":n?"0":"var(--border-radius)","--border-right-radius":n?"var(--border-radius)":"0"})),gl(C.lastChild,{primary:!0,get tooltip(){return s(p)},$$events:{click:()=>c(sr.NORMAL)},children:(P,y)=>{var O=kc(),_=z(O,!0);S(()=>V(_,eo())),A(O),d(P,O)},$$slots:{default:!0}}),A(C);var h=v(C,2);cl(h,{keyCombination:u,$$events:{action:()=>c(sr.NORMAL)}});var $=v(h,2);nl($,{get show(){return s(l)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>g(l,!1)},$$slots:{reference:(P,y)=>{var O=bc(),_=ne(O);Ge(_,()=>({"--border-right-radius":n?"0":"var(--border-radius)","--border-left-radius":n?"var(--border-radius)":"0"})),$l(_.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>g(l,!s(l))},children:(x,R)=>{ar(x,{icon:Vs})},$$slots:{default:!0}}),A(_),d(P,O)},floating:(P,y)=>{al(P,{slot:"floating",children:(O,_)=>{var x=xc(),R=ne(x);Nt(R,{$$events:{click:()=>e("add")},children:(M,I)=>{ee();var m=Q();S(()=>V(m,ws())),d(M,m)},$$slots:{default:!0}});var B=v(R,2);Nt(B,{$$events:{click:()=>e("clone")},children:(M,I)=>{ee();var m=Q();S(()=>V(m,_s())),d(M,m)},$$slots:{default:!0}});var q=v(B,2);Nt(q,{$$events:{click:()=>e("rename")},children:(M,I)=>{ee();var m=Q();S(()=>V(m,Ps())),d(M,m)},$$slots:{default:!0}});var G=v(q,2);Nt(G,{$$events:{click:o},children:(M,I)=>{ee();var m=Q();S(()=>V(m,to())),d(M,m)},$$slots:{default:!0}});var E=v(G,2);Pc(E);var T=v(E,2);Nt(T,{$$events:{click:()=>c(sr.APPLY_TO_CHILDREN)},children:(M,I)=>{ee();var m=Q();S(()=>V(m,ro())),d(M,m)},$$slots:{default:!0}}),d(O,x)},$$slots:{default:!0}})}}}),A(f),d(r,f),we()}var Rc=K('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content svelte-18qg9px"><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" class="btn-close svelte-18qg9px" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text" class="form-control svelte-18qg9px"></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function Ac(r,t){Ce(t,!1);const n=De(),e=()=>fe(Ki,"$pageTheme",n),a=D();let o=H(t,"title",8),c=H(t,"prompt",8),u=H(t,"initialValue",8,""),l=H(t,"onOk",8);const f=Math.random().toString(36).substring(2),C=Rr(Fs);let p=D(),h,$=D();function P(){l()(s($).value),h.hide(),g(a,u())}function y(){h.hide(),g(a,u())}function O(){s($).focus(),x(!0)}function _(){x(!1)}const{set:x,remove:R}=ml(y);Tr(()=>{s(p).addEventListener("shown.bs.modal",O),s(p).addEventListener("hidden.bs.modal",_),h=new Xi(s(p),{keyboard:!1}),C.set(f,h)}),xn(()=>{R(),s(p).removeEventListener("shown.bs.modal",O),s(p).removeEventListener("hidden.bs.modal",_)}),oe(()=>Ze(u()),()=>{g(a,u())}),We(),ke();var B=Rc(),q=z(B),G=z(q),E=z(G),T=z(E),M=z(T,!0);A(T);var I=v(T,2);A(E);var m=v(E,2),i=z(m),N=z(i),L=z(N),b=z(L);A(L);var W=v(L,2);ht(W),Ft(W,U=>g($,U),()=>s($)),A(N),A(i),A(m);var F=v(m,2),se=z(F),Z=v(se,2);return A(F),A(G),A(q),A(B),Ft(B,U=>g(p,U),()=>s(p)),S(()=>{var U;_t(G,"default-colors",e().isDark),V(M,o()),_t(I,"invert",e().isDark),V(b,`${(U=c())!=null?U:""}:`),_t(W,"nightMode",e().isDark)}),Wt(W,()=>s(a),U=>g(a,U)),Re("submit",i,fl(P)),Re("click",se,y),Re("click",Z,P),d(r,B),qe(t,"modalKey",f),we({modalKey:f})}var Tc=K('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),Ic=K('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Dc(r,t){Ce(t,!1);const n=De(),e=()=>fe(u,"$configList",n),a=D(),o=D();let c=H(t,"state",8);const u=c().configList,l=ps(),f=()=>l("presetchange");function C(m){const i=so({decks:m.useCount});return`${m.name} (${i})`}function p(m){c().setCurrentIndex(m.detail.value),f()}function h(m){const i=m.trim();i.length&&(c().addConfig(i),f())}function $(m){const i=m.trim();i.length&&(c().cloneConfig(i),f())}function P(m){c().setCurrentName(m)}const y=Rr(Fs);let O=D(),_=D(""),x=D(""),R=D(wc);function B(){g(x,ws()),g(R,h),g(_,""),y.get(s(O)).show()}function q(){g(x,_s()),g(R,$),g(_,c().getCurrentName()),y.get(s(O)).show()}function G(){g(x,Ps()),g(R,P),g(_,c().getCurrentName()),y.get(s(O)).show()}oe(()=>e(),()=>{g(a,e().findIndex(m=>m.current))}),oe(()=>(e(),s(a)),()=>{g(o,C(e()[s(a)]))}),We(),ke();var E=Ic(),T=ne(E),M=de(()=>no());Ac(T,{get title(){return s(x)},get prompt(){return s(M)},get initialValue(){return s(_)},get onOk(){return s(R)},get modalKey(){return s(O)},set modalKey(m){g(O,m)},$$legacy:!0});var I=v(T,2);Ge(I,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),vl(I.lastChild,{breakpoint:"sm",children:(m,i)=>{var N=Tc(),L=z(N);kn(L,{class:"flex-grow-1 mr1",get label(){return s(o)},get list(){return e()},parser:W=>({content:C(W),value:W.idx}),get value(){return s(a)},set value(W){g(a,W)},$$events:{change:p},$$legacy:!0});var b=v(L,2);Oc(b,{get state(){return c()},$$events:{add:B,clone:q,rename:G,remove:f}}),A(N),d(m,N)},$$slots:{default:!0}}),A(I),d(r,E),we()}var Lc=K('<li class="svelte-11xpnuy"><button class="svelte-11xpnuy"> </button></li>'),Ec=K('<ul class="svelte-11xpnuy"></ul>');function ds(r,t){Ce(t,!1);let n=H(t,"tabs",8),e=H(t,"value",12),a=D(o());function o(){const f=n().slice().reverse().findIndex(C=>C.value!==null);return f===-1?0:n().length-f-1}function c(f){for(const[C,p]of n().entries())f===C?p.enable(e()):f>C?p.reset():p.disable()}const u=f=>()=>g(a,f);oe(()=>s(a),()=>{c(s(a))}),oe(()=>(Ze(n()),s(a)),()=>{var f;e((f=n()[s(a)].value)!=null?f:0)}),oe(()=>(Ze(n()),s(a),Ze(e())),()=>{n()[s(a)].setValue(e())}),We(),ke();var l=Ec();Bt(l,5,n,or,(f,C,p)=>{var h=Lc(),$=z(h),P=wn(()=>u(p)),y=z($,!0);A($),A(h),S(()=>{_t(h,"active",s(a)===p),V(y,s(C).title)}),Re("click",$,function(...O){var _;(_=s(P))==null||_.apply(this,O)}),d(f,h)}),A(l),d(r,l),we()}var Mc=K("<!> <!> <!> <!> <!>",1);function Nc(r,t){var L,b,W,F,se,Z;Ce(t,!1);const n=De(),e=()=>fe(p,"$config",n),a=()=>fe(h,"$limits",n),o=()=>fe(P,"$newCardsIgnoreReviewLimit",n),c=()=>fe(y,"$applyAllParentLimits",n),u=D();let l=H(t,"state",8),f=H(t,"api",8);function C(){at(B,s(B)[0]=new wt(rr(),e().newPerDay,U=>X(p,w(e).newPerDay=U,w(e)),e().newPerDay,null)),at(q,s(q)[0]=new wt(rr(),e().reviewsPerDay,U=>X(p,w(e).reviewsPerDay=U,w(e)),e().reviewsPerDay,null))}const p=l().currentConfig,h=l().deckLimits,$=l().defaults,P=l().newCardsIgnoreReviewLimit,y=l().applyAllParentLimits,O=`

`+ao()+`

`+oo(),_=`

`+io()+O,x=xr()+`

`+lo(),R=xr()+`

`+uo(),B=D([new wt(rr(),e().newPerDay,U=>X(p,w(e).newPerDay=U,w(e)),e().newPerDay,null),new wt(Ur(),(L=a().new)!=null?L:null,U=>X(h,w(a).new=U!=null?U:void 0,w(a)),null,null),new wt(Qr(),a().newTodayActive&&(b=a().newToday)!=null?b:null,U=>X(h,w(a).newToday=U!=null?U:void 0,w(a)),null,(W=a().newToday)!=null?W:null)]),q=D([new wt(rr(),e().reviewsPerDay,U=>X(p,w(e).reviewsPerDay=U,w(e)),e().reviewsPerDay,null),new wt(Ur(),(F=a().review)!=null?F:null,U=>X(h,w(a).review=U!=null?U:void 0,w(a)),null,null),new wt(Qr(),a().reviewTodayActive&&(se=a().reviewToday)!=null?se:null,U=>X(h,w(a).reviewToday=U!=null?U:void 0,w(a)),null,(Z=a().reviewToday)!=null?Z:null)]);let G=D(0),E=D(0);const T={newLimit:{title:ks(),help:co()+O,url:ye.DeckOptions.newCardsday},reviewLimit:{title:bs(),help:fo()+_,url:ye.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:xs(),help:x,url:ye.DeckOptions.newCardsday},applyAllParentLimits:{title:go(),help:R,url:ye.DeckOptions.newCardsday}},M=Object.values(T);let I=D(),m=D();function i(U){s(I).show(),s(m).to(U)}oe(()=>(s(G),s(E),vt),()=>{g(u,Math.min(9999,s(G)*10)>s(E)?vo({cards:s(G),expected:Math.min(9999,s(G)*10)}):"")}),We(),ke();var N=de(()=>Yr());return st(r,{get title(){return s(N)},children:(U,ue)=>{lt(U,{slotHost:Y,get api(){return f()},children:(_e,ce)=>{var xe=Mc(),be=ne(xe);Y(be,{children:(pe,Le)=>{Ue(pe,{get defaultValue(){return $.newPerDay},get value(){return s(G)},set value(re){g(G,re)},children:(re,Ne)=>{te(re,{$$events:{click:()=>i(Object.keys(T).indexOf("newLimit"))},children:(he,Ie)=>{ee();var Oe=Q();S(()=>V(Oe,T.newLimit.title)),d(he,Oe)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(re,Ne)=>{ds(re,{slot:"tabs",get tabs(){return s(B)},get value(){return s(G)},set value(he){g(G,he)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var le=v(be,2);Y(le,{children:(pe,Le)=>{Ue(pe,{get defaultValue(){return $.reviewsPerDay},get value(){return s(E)},set value(re){g(E,re)},children:(re,Ne)=>{te(re,{$$events:{click:()=>i(Object.keys(T).indexOf("reviewLimit"))},children:(he,Ie)=>{ee();var Oe=Q();S(()=>V(Oe,T.reviewLimit.title)),d(he,Oe)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(re,Ne)=>{ds(re,{slot:"tabs",get tabs(){return s(q)},get value(){return s(E)},set value(he){g(E,he)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var $e=v(le,2);Y($e,{children:(pe,Le)=>{ze(pe,{get warning(){return s(u)}})},$$slots:{default:!0}});var Se=v($e,2);Y(Se,{children:(pe,Le)=>{Qe(pe,{defaultValue:!1,get value(){return Rt(),o()},set value(re){yt(P,re)},children:(re,Ne)=>{te(re,{$$events:{click:()=>i(Object.keys(T).indexOf("newCardsIgnoreReviewLimit"))},children:(he,Ie)=>{At(he,{get title(){return T.newCardsIgnoreReviewLimit.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var je=v(Se,2);Y(je,{children:(pe,Le)=>{Qe(pe,{defaultValue:!1,get value(){return Rt(),c()},set value(re){yt(y,re)},children:(re,Ne)=>{te(re,{$$events:{click:()=>i(Object.keys(T).indexOf("applyAllParentLimits"))},children:(he,Ie)=>{At(he,{get title(){return T.applyAllParentLimits.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(_e,xe)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(U,ue)=>{var _e=de(()=>Yr());$t(U,{get title(){return s(_e)},get url(){return ye.DeckOptions.dailyLimits},slot:"tooltip",helpSections:M,$$events:{mount:ce=>{g(I,ce.detail.modal),g(m,ce.detail.carousel)}}})}}}),qe(t,"onPresetChange",C),we({onPresetChange:C})}var Vc=K("<!> <!> <!> <!> <!>",1);function Fc(r,t){Ce(t,!1);const n=De(),e=()=>fe(u,"$config",n),a=()=>fe(f,"$fsrs",n);let o=H(t,"state",8),c=H(t,"api",8);const u=o().currentConfig,l=o().defaults,f=o().fsrs,C=`

`+$o();let p=D([]);const h={newGatherPriority:{title:mo(),help:po()+C},newCardSortOrder:{title:ho(),help:yo()+C},newReviewPriority:{title:Co(),help:wo()+C},interdayStepPriority:{title:_o(),help:Po()+C},reviewSortOrder:{title:Ss(),help:ko()+C}},$=Object.values(h);let P=D(),y=D();function O(x){s(P).show(),s(y).to(x)}oe(()=>(e(),s(p),pt),()=>{switch(e().newCardGatherPriority){case pt.RANDOM_NOTES:g(p,[ot.TEMPLATE_THEN_RANDOM,ot.RANDOM_NOTE_THEN_TEMPLATE]);break;case pt.RANDOM_CARDS:g(p,[ot.TEMPLATE_THEN_RANDOM,ot.RANDOM_NOTE_THEN_TEMPLATE,ot.RANDOM_CARD]);break;default:g(p,[]);break}s(p).includes(e().newCardSortOrder)&&X(u,w(e).newCardSortOrder=0,w(e)),e().newCardSortOrder in ot||X(u,w(e).newCardSortOrder=0,w(e))}),We(),ke();var _=de(()=>Kr());st(r,{get title(){return s(_)},children:(x,R)=>{lt(x,{slotHost:Y,get api(){return c()},children:(B,q)=>{var G=Vc(),E=ne(G);Y(E,{children:(i,N)=>{var L=de(cc);gt(i,{get defaultValue(){return l.newCardGatherPriority},get choices(){return s(L)},get value(){return e().newCardGatherPriority},set value(b){X(u,w(e).newCardGatherPriority=b,w(e))},children:(b,W)=>{te(b,{$$events:{click:()=>O(Object.keys(h).indexOf("newGatherPriority"))},children:(F,se)=>{ee();var Z=Q();S(()=>V(Z,h.newGatherPriority.title)),d(F,Z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=v(E,2);Y(T,{children:(i,N)=>{var L=de(dc);gt(i,{get defaultValue(){return l.newCardSortOrder},get choices(){return s(L)},get disabledChoices(){return s(p)},get value(){return e().newCardSortOrder},set value(b){X(u,w(e).newCardSortOrder=b,w(e))},children:(b,W)=>{te(b,{$$events:{click:()=>O(Object.keys(h).indexOf("newCardSortOrder"))},children:(F,se)=>{ee();var Z=Q();S(()=>V(Z,h.newCardSortOrder.title)),d(F,Z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var M=v(T,2);Y(M,{children:(i,N)=>{var L=de(cs);gt(i,{get defaultValue(){return l.newMix},get choices(){return s(L)},get value(){return e().newMix},set value(b){X(u,w(e).newMix=b,w(e))},children:(b,W)=>{te(b,{$$events:{click:()=>O(Object.keys(h).indexOf("newReviewPriority"))},children:(F,se)=>{ee();var Z=Q();S(()=>V(Z,h.newReviewPriority.title)),d(F,Z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=v(M,2);Y(I,{children:(i,N)=>{var L=de(cs);gt(i,{get defaultValue(){return l.interdayLearningMix},get choices(){return s(L)},get value(){return e().interdayLearningMix},set value(b){X(u,w(e).interdayLearningMix=b,w(e))},children:(b,W)=>{te(b,{$$events:{click:()=>O(Object.keys(h).indexOf("interdayStepPriority"))},children:(F,se)=>{ee();var Z=Q();S(()=>V(Z,h.interdayStepPriority.title)),d(F,Z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var m=v(I,2);Y(m,{children:(i,N)=>{var L=de(()=>qs(a()));gt(i,{get defaultValue(){return l.reviewOrder},get choices(){return s(L)},get value(){return e().reviewOrder},set value(b){X(u,w(e).reviewOrder=b,w(e))},children:(b,W)=>{te(b,{$$events:{click:()=>O(Object.keys(h).indexOf("reviewSortOrder"))},children:(F,se)=>{ee();var Z=Q();S(()=>V(Z,h.reviewSortOrder.title)),d(F,Z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(B,G)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(x,R)=>{var B=de(()=>Kr());$t(x,{get title(){return s(B)},get url(){return ye.DeckOptions.displayOrder},slot:"tooltip",helpSections:$,$$events:{mount:q=>{g(P,q.detail.modal),g(y,q.detail.carousel)}}})}}}),we()}var Hc=K('<textarea class="w-100"></textarea>');function Bc(r,t){Ce(t,!1);let n=H(t,"value",12),e=H(t,"defaults",8),a=D();function o(l){return l.map(f=>f.toFixed(4)).join(", ")}function c(){n(this.value.replace(/ /g,"").split(",").filter(l=>l).map(l=>Number(l)))}oe(()=>Ze(n()),()=>{g(a,o(n()))}),We(),ke();var u=Hc();ms(u),S(()=>et(u,"placeholder",o(e()))),S(()=>Ir(u,s(a))),Re("blur",u,c),d(r,u),we()}var zc=K("<!> <!>",1);function Gc(r,t){let n=H(t,"value",12),e=H(t,"defaultValue",8),a=H(t,"defaults",8);var o=zc(),c=ne(o);Pt(c,t,"default",{});var u=v(c,2);xt(u,{children:(l,f)=>{Bc(l,{get defaults(){return a()},get value(){return n()},set value(C){n(C)},$$legacy:!0})},$$slots:{default:!0,revert:(l,f)=>{Gt(l,{slot:"revert",get defaultValue(){return e()},get value(){return n()},set value(C){n(C)},$$legacy:!0})}}}),d(r,o)}var Wc=K('<input type="text" class="w-100 mb-1">');function jc(r,t){let n=H(t,"value",12),e=H(t,"placeholder",8);xt(r,{children:(a,o)=>{var c=Wc();ht(c),S(()=>et(c,"placeholder",e())),Wt(c,n),d(a,c)},$$slots:{default:!0}})}var Ke=(r=>(r[r.time=0]="time",r[r.count=1]="count",r[r.memorized=2]="memorized",r))(Ke||{});function kr(r,t,n,e){const a=ts(r);if(a.selectAll(".lines").remove(),a.selectAll(".hover-columns").remove(),a.selectAll(".focus-line").remove(),a.selectAll(".legend").remove(),n.length==0)return rs(a,!1),[];const o=a.transition().duration(600),c=new Date,u=n.map(i=>({...i,date:new Date(c.getTime()+i.x*24*60*60*1e3)})),l=c,f=ss(u,i=>i.date),C=Vl().domain([l,f]).range([t.marginLeft,t.width-t.marginRight]);a.select(".x-ticks").call(i=>i.transition(o).call(hl(C).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const p=i=>e==0?_r(i,!0):i.toString(),h={1:u.map(i=>({...i,y:i.count})),0:u.map(i=>({...i,y:i.timeCost})),2:u.map(i=>({...i,y:i.memorized}))}[e],$=ss(h,i=>i.y),P=yl().range([t.height-t.marginBottom,t.marginTop]).domain([0,$]).nice();a.select(".y-ticks").call(i=>i.transition(o).call(Cl(P).ticks(t.height/50).tickSizeOuter(0).tickFormat(p))).attr("direction","ltr"),a.select(".y-ticks .y-axis-title").remove(),a.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("font-size","1rem").attr("dy","1.1em").attr("fill","currentColor");const y=h.map(i=>[C(i.date),P(i.y),i.label]),O=jl(y,i=>Object.assign(i,{z:i[0][2]}),i=>i[2]),_=Ul;a.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(O.entries())).join("path").attr("vector-effect","non-scaling-stroke").attr("stroke",(i,N)=>_[N%_.length]).attr("d",i=>wl()(i[1].map(N=>[N[0],N[1]]))).attr("data-group",i=>i[0]);const x=a.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),R=Array.from(O.values()).reduce((i,N)=>i.length>N.length?i:N),B=t.width/R.length;a.append("g").attr("class","hover-columns").selectAll("rect").data(R).join("rect").attr("x",i=>i[0]-B/2).attr("y",t.marginTop).attr("width",B).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",G).on("mouseout",()=>{x.style("opacity",0),ns()});const q={0:_r,1:i=>Os({reviews:Math.round(i)}),2:i=>So({memorized:Math.round(i).toFixed(0)})}[e];function G(i,N){_l(i,document.body);const L=C.invert(N[0]),b={};O.forEach((se,Z)=>{const U=Pl(ce=>C.invert(ce[0])).left,ue=U(se,L),_e=se[ue];_e&&(b[Z]=P.invert(_e[1]))}),x.attr("x1",N[0]).attr("x2",N[0]).style("opacity",1);const W=+((L.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let F=`Date: ${mn(L)}<br>In ${W} Days<br>`;for(const[se,Z]of Object.entries(b))a.select(`path[data-group="${se}"]`).classed("hidden")||(F+=`<span style="color:${_[(parseInt(se)-1)%_.length]}"></span> #${se}: ${q(Z)}<br>`);as(F,i.pageX,i.pageY)}const E=a.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(O.keys())).join("g").attr("transform",(i,N)=>`translate(0,${N*20})`).attr("cursor","pointer").on("click",(i,N)=>I(i,N)).on("mousemove",M).on("mouseout",ns),T={1:Oo,0:({count:i})=>_r(i),2:Ro}[e];function M(i,N){const L=h.filter(F=>F.label==N),b=e==2?L[L.length-1].memorized-L[0].memorized:Pu(L,F=>F.y),W=b/((L==null?void 0:L.length)||1);as(`#${N}:<br/>
                ${bo()}: ${T({count:W})}<br/>
                ${xo()}: ${q(b)}`,i.pageX,i.pageY)}E.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(i,N)=>_[N%_.length]),E.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(i=>`#${i}`);const I=(i,N)=>{const L=N,b=a.select(`path[data-group="${L}"]`),W=b.classed("hidden"),F=i.currentTarget;b.classed("hidden",!W),b.style("display",()=>W?null:"none"),ts(F).select("rect").style("opacity",W?1:.5)};return rs(a,!0),[]}var qc=K('<tr><td class="day svelte-47inpr"> </td><td colspan="3" class="svelte-47inpr"><input type="range" list="easy_day_steplist" class="svelte-47inpr"></td></tr>'),Uc=K('<div class="easy-days-settings svelte-47inpr"><table class="svelte-47inpr"><thead><tr><th class="svelte-47inpr"></th><th class="header min-col svelte-47inpr"><span> </span></th><th class="header text-center svelte-47inpr"><span> </span></th><th class="header normal-col svelte-47inpr"><span> </span></th></tr></thead><tbody></tbody></table></div>');function Us(r,t){Ce(t,!1);const n=[Ao(),To(),Io(),Do(),Lo(),Eo(),Mo()];let e=H(t,"values",28,()=>[0,0,0,0,0,0,0]);ke(),Y(r,{children:(a,o)=>{var c=Uc(),u=z(c),l=z(u),f=z(l),C=v(z(f)),p=z(C),h=z(p,!0);S(()=>V(h,No())),A(p),A(C);var $=v(C),P=z($),y=z(P,!0);S(()=>V(y,Vo())),A(P),A($);var O=v($),_=z(O),x=z(_,!0);S(()=>V(x,Fo())),A(_),A(O),A(f),A(l);var R=v(l);Bt(R,5,()=>n,or,(B,q,G)=>{var E=qc(),T=z(E),M=z(T,!0);A(T);var I=v(T),m=z(I);ht(m),et(m,"step",.5),et(m,"max",1),et(m,"min",0),A(I),A(E),S(()=>V(M,s(q))),Wt(m,()=>e()[G],i=>e(e()[G]=i,!0)),d(B,E)}),A(R),A(u),A(c),d(a,c)},$$slots:{default:!0}}),we()}var Qc=K('<label><input type="radio"> </label> <label><input type="radio"> </label> <label><input type="radio"> </label>',1),Yc=K('<div class="radio-group svelte-18vh0ci"><!></div> <div class="svg-container svelte-18vh0ci"><svg class="svelte-18vh0ci"><!><!><!><!></svg></div> <!>',1),Kc=K('<div class="modal svelte-18vh0ci" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header svelte-18vh0ci"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><!> <!> <!> <!> <!> <details><summary class="svelte-18vh0ci"> </summary> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <!> <!> <!> <!> <!> <!></details> <button> </button> <button> </button> <button> </button> <!> <!></div></div></div></div>');function Xc(r,t){Ce(t,!1);const n=De(),e=()=>fe(_,"$config",n),a=()=>fe(q,"$fsrs",n),o=()=>fe(I,"$newCardsIgnoreReviewLimit",n),c=D(),u=D(),l=D(),f=D(),C=[];let p=H(t,"shown",12,!1),h=H(t,"state",8),$=H(t,"simulateFsrsRequest",12),P=H(t,"computing",8),y=H(t,"openHelpModal",8),O=H(t,"onPresetChange",8);const _=h().currentConfig;let x=D(Ke.count),R=D([]),B=D(!1);const q=h().fsrs,G=Rl();let E=D(null),T=0,M=D([]);const I=h().newCardsIgnoreReviewLimit;let m=D(!0),i=D(e().leechAction==St.SUSPEND),N=D(e().leechThreshold);function L(j,ge){const ie=[];for(let ve=0;ve<j.length;ve++){let ae=0,Je=0;for(let Ee=Math.max(0,ve-ge+1);Ee<=ve;Ee++)ae+=j[Ee],Je++;ie.push(ae/Je)}return ie}function b(j,ge){return j.map((ie,ve)=>ie+ge[ve])}async function W(){let j;$($().daysToSimulate=s(c),!0),$($().deckSize=s(u),!0),$($().suspendAfterLapseCount=s(i)?s(N):void 0,!0),$($().easyDaysPercentages=s(f),!0);try{await nr(async()=>{g(B,!0),j=await nn($())},()=>{})}finally{if(g(B,!1),j){T+=1;const ge=b(j.dailyReviewCount,j.dailyNewCount),ie=j.accumulatedKnowledgeAcquisition;g(M,s(M).concat(j.dailyTimeCost.map((ve,ae)=>({x:ae,timeCost:ve,count:ge[ae],memorized:ie[ae],label:T})))),g(R,kr(s(E),G,s(M),s(x)))}}}function F(){g(M,s(M).filter(j=>j.label!==T)),T=Math.max(0,T-1),g(R,kr(s(E),G,s(M),s(x)))}oe(()=>{},()=>{g(c,365)}),oe(()=>{},()=>{g(u,0)}),oe(()=>s(c),()=>{g(l,Math.ceil(s(c)/365))}),oe(()=>(s(E),s(M),s(m),s(l),s(x)),()=>{if(s(E)){let j=s(M);if(s(m)){const ge=s(M).reduce((ie,ve)=>(ie[ve.label]=ie[ve.label]||[],ie[ve.label].push(ve),ie),{});j=Object.values(ge).flatMap(ie=>{const ve=L(ie.map(Ee=>Ee.timeCost),s(l)),ae=L(ie.map(Ee=>Ee.count),s(l)),Je=L(ie.map(Ee=>Ee.memorized),s(l));return ie.map((Ee,Ct)=>({...Ee,timeCost:ve[Ct],count:ae[Ct],memorized:Je[Ct]}))})}g(R,kr(s(E),G,j,s(x)))}}),oe(()=>e(),()=>{g(f,[...e().easyDaysPercentages])}),We(),ke();var se=Kc(),Z=z(se),U=z(Z),ue=z(U),_e=z(ue),ce=z(_e,!0);S(()=>V(ce,Rs())),A(_e);var xe=v(_e,2);A(ue);var be=v(ue,2),le=z(be);Ue(le,{defaultValue:365,min:1,max:3650,get value(){return s(c)},set value(j){g(c,j)},children:(j,ge)=>{te(j,{$$events:{click:()=>y()("simulateFsrsReview")},children:(ie,ve)=>{ee();var ae=Q();S(()=>V(ae,As())),d(ie,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var $e=v(le,2);Ue($e,{defaultValue:0,min:0,max:1e5,get value(){return s(u)},set value(j){g(u,j)},children:(j,ge)=>{te(j,{$$events:{click:()=>y()("simulateFsrsReview")},children:(ie,ve)=>{ee();var ae=Q();S(()=>V(ae,Ho())),d(ie,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Se=v($e,2);ft(Se,{get defaultValue(){return e().desiredRetention},min:.7,max:.99,percentage:!0,get value(){return $().desiredRetention},set value(j){$($().desiredRetention=j,!0)},children:(j,ge)=>{te(j,{$$events:{click:()=>y()("desiredRetention")},children:(ie,ve)=>{ee();var ae=Q();S(()=>V(ae,Dr())),d(ie,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var je=v(Se,2);Ue(je,{get defaultValue(){return e().newPerDay},min:0,max:9999,get value(){return $().newLimit},set value(j){$($().newLimit=j,!0)},children:(j,ge)=>{te(j,{$$events:{click:()=>y()("simulateFsrsReview")},children:(ie,ve)=>{ee();var ae=Q();S(()=>V(ae,ks())),d(ie,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var pe=v(je,2);Ue(pe,{get defaultValue(){return e().reviewsPerDay},min:0,max:9999,get value(){return $().reviewLimit},set value(j){$($().reviewLimit=j,!0)},children:(j,ge)=>{te(j,{$$events:{click:()=>y()("simulateFsrsReview")},children:(ie,ve)=>{ee();var ae=Q();S(()=>V(ae,bs())),d(ie,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Le=v(pe,2),re=z(Le),Ne=z(re,!0);S(()=>V(Ne,Ts())),A(re);var he=v(re,2);pl(he,()=>s(f),j=>{Us(j,{get values(){return s(f)},set values(ge){g(f,ge)},$$legacy:!0})}),A(Le);var Ie=v(Le,2),Oe=z(Ie),lr=z(Oe,!0);S(()=>V(lr,Bo())),A(Oe);var jt=v(Oe,2);Ue(jt,{get defaultValue(){return e().maximumReviewInterval},min:1,max:36500,get value(){return $().maxInterval},set value(j){$($().maxInterval=j,!0)},children:(j,ge)=>{te(j,{$$events:{click:()=>y()("simulateFsrsReview")},children:(ie,ve)=>{ee();var ae=Q();S(()=>V(ae,ys())),d(ie,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var mt=v(jt,2),ur=de(()=>qs(a()));gt(mt,{get defaultValue(){return e().reviewOrder},get choices(){return s(ur)},get value(){return $().reviewOrder},set value(j){$($().reviewOrder=j,!0)},children:(j,ge)=>{te(j,{$$events:{click:()=>y()("simulateFsrsReview")},children:(ie,ve)=>{ee();var ae=Q();S(()=>V(ae,Ss())),d(ie,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var qt=v(mt,2);Qe(qt,{get defaultValue(){return o()},get value(){return $().newCardsIgnoreReviewLimit},set value(j){$($().newCardsIgnoreReviewLimit=j,!0)},children:(j,ge)=>{te(j,{$$events:{click:()=>y()("simulateFsrsReview")},children:(ie,ve)=>{var ae=de(()=>xs());At(ie,{get title(){return s(ae)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ut=v(qt,2);Qe(Ut,{defaultValue:!0,get value(){return s(m)},set value(j){g(m,j)},children:(j,ge)=>{te(j,{$$events:{click:()=>y()("simulateFsrsReview")},children:(ie,ve)=>{ee();var ae=Q();S(()=>V(ae,zo())),d(ie,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Tt=v(Ut,2),cr=de(()=>e().leechAction==St.SUSPEND);Qe(Tt,{get defaultValue(){return s(cr)},get value(){return s(i)},set value(j){g(i,j)},children:(j,ge)=>{te(j,{$$events:{click:()=>y()("simulateFsrsReview")},children:(ie,ve)=>{ee();var ae=Q();S(()=>V(ae,Go())),d(ie,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var dr=v(Tt,2);{var fr=j=>{Ue(j,{get defaultValue(){return e().leechThreshold},min:1,max:9999,get value(){return s(N)},set value(ge){g(N,ge)},children:(ge,ie)=>{te(ge,{$$events:{click:()=>y()("simulateFsrsReview")},children:(ve,ae)=>{ee();var Je=Q();S(()=>V(Je,Is())),d(ve,Je)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Te(dr,j=>{s(i)&&j(fr)})}A(Ie);var ut=v(Ie,2),Qt=z(ut,!0);S(()=>V(Qt,Wo())),A(ut);var ct=v(ut,2),gr=z(ct,!0);S(()=>V(gr,jo())),A(ct);var dt=v(ct,2),Yt=z(dt,!0);S(()=>V(Yt,qo())),A(dt);var Kt=v(dt,2);{var vr=j=>{var ge=Q();S(()=>V(ge,Uo())),d(j,ge)};Te(Kt,j=>{s(B)&&j(vr)})}var It=v(Kt,2);kl(It,{children:(j,ge)=>{var ie=Yc(),ve=ne(ie),ae=z(ve);bl(ae,{children:(bt,Zt)=>{var Jt=Qc(),Lt=ne(Jt),k=z(Lt);ht(k);var J,Ae=v(k);S(()=>{var Ye;return V(Ae,` ${(Ye=Qo())!=null?Ye:""}`)}),A(Lt);var Ve=v(Lt,2),Pe=z(Ve);ht(Pe);var Fe,nt=v(Pe);S(()=>{var Ye;return V(nt,` ${(Ye=Yo())!=null?Ye:""}`)}),A(Ve);var er=v(Ve,2),Et=z(er);ht(Et);var Vr,Ys=v(Et);S(()=>{var Ye;return V(Ys,` ${(Ye=Ko())!=null?Ye:""}`)}),A(er),S(()=>{J!==(J=Ke.count)&&(k.value=(k.__value=Ke.count)==null?"":Ke.count),Fe!==(Fe=Ke.time)&&(Pe.value=(Pe.__value=Ke.time)==null?"":Ke.time),Vr!==(Vr=Ke.memorized)&&(Et.value=(Et.__value=Ke.memorized)==null?"":Ke.memorized)}),wr(C,[],k,()=>(Ke.count,s(x)),Ye=>g(x,Ye)),wr(C,[],Pe,()=>(Ke.time,s(x)),Ye=>g(x,Ye)),wr(C,[],Et,()=>(Ke.memorized,s(x)),Ye=>g(x,Ye)),d(bt,Jt)},$$slots:{default:!0}}),A(ve);var Je=v(ve,2),Ee=z(Je),Ct=z(Ee);Dl(Ct);var Dt=v(Ct);xl(Dt);var Xt=v(Dt);Sl(Xt,{bounds:G});var $r=v(Xt);Ol($r,{bounds:G}),A(Ee),Ft(Ee,bt=>g(E,bt),()=>s(E)),A(Je);var mr=v(Je,2);Ll(mr,{get tableData(){return s(R)}}),S(()=>et(Ee,"viewBox",`0 0 ${G.width} ${G.height}`)),d(j,ie)},$$slots:{default:!0}}),A(be),A(U),A(Z),A(se),S(()=>{var j,ge,ie;_t(se,"show",p()),_t(se,"d-block",p()),Ot(ut,`btn ${(j=P()?"btn-warning":"btn-primary")!=null?j:""} svelte-18vh0ci`),ut.disabled=P(),Ot(ct,`btn ${(ge=P()?"btn-warning":"btn-primary")!=null?ge:""} svelte-18vh0ci`),ct.disabled=P(),Ot(dt,`btn ${(ie=P()?"btn-warning":"btn-primary")!=null?ie:""} svelte-18vh0ci`),dt.disabled=P()}),Re("click",xe,()=>p(!1)),Re("click",ut,W),Re("click",ct,F),Re("click",dt,()=>{X(_,w(e).newPerDay=$().newLimit,w(e)),X(_,w(e).reviewsPerDay=$().reviewLimit,w(e)),X(_,w(e).maximumReviewInterval=$().maxInterval,w(e)),X(_,w(e).desiredRetention=$().desiredRetention,w(e)),yt(I,$().newCardsIgnoreReviewLimit),X(_,w(e).reviewOrder=$().reviewOrder,w(e)),X(_,w(e).leechAction=s(i)?St.SUSPEND:St.TAG_ONLY,w(e)),X(_,w(e).leechThreshold=s(N),w(e)),X(_,w(e).easyDaysPercentages=[...s(f)],w(e)),O()()}),d(r,se),we()}var Zc=K(" <!>",1),Jc=K("<div> </div>"),ed=K('<!> <!> <div class="ms-1 me-1"><!> <!> <button><!></button> <button><!></button> <div><!></div></div> <div class="m-1"><!> <button class="btn btn-primary svelte-mq5a9v"> </button></div> <div class="m-2"><!> <!></div> <div class="m-2"><details><summary> </summary> <!> <button><!></button> <!> <!></details></div> <div class="m-2"><button class="btn btn-primary svelte-mq5a9v"> </button></div> <!>',1);function td(r,t){Ce(t,!1);const n=De(),e=()=>fe(I,"$daysSinceLastOptimization",n),a=()=>fe(G,"$presetName",n),o=()=>fe(E,"$config",n),c=()=>fe(s(P),"$newCardsIgnoreReviewLimit",n),u=()=>fe(M,"$fsrsReschedule",n),l=D(),f=D(),C=D(),p=D(),h=D(),$=D(),P=D(),y=D(),O=D(),_=D(),x=D();let R=H(t,"state",8),B=H(t,"openHelpModal",8),q=H(t,"onPresetChange",8);const G=R().currentPresetName,E=R().currentConfig,T=R().defaults,M=R().fsrsReschedule,I=R().daysSinceLastOptimization;let m=D(),i=D(!1),N=D(!1),L=D(!1),b=D(0),W=D();const F=D(new an({daysToSimulate:365,lossAversion:2.5}));function se(k,J){const Ae=J.length>20?-J[20]:-.5,Ve=.9**(1/Ae)-1,Fe=Math.round(100/Ve*(Math.pow(k,1/Ae)-1));return Fe===100?"":ai({days:Fe})}function Z(k){return k<.7||k>.97?"alert-danger":k<.8||k>.95?"alert-warning":"alert-info"}function U(){return BigInt(o().ignoreRevlogsBeforeDate?new Date(o().ignoreRevlogsBeforeDate).getTime():0)}async function ue(){if(s(i)){await hr({});return}if(R().presetAssignmentsChanged()){alert(yr());return}g(i,!0),g(m,void 0);try{await nr(async()=>{const k=Vt(o()),J=o().relearnSteps;let Ae=0,Ve=0;for(let nt=0;nt<J.length&&(Ve+=J[nt],!(Ve>=1440));nt++)Ae++;const Pe=await on({search:o().paramSearch?o().paramSearch:s(C),ignoreRevlogsBeforeMs:U(),currentParams:k,numOfRelearningSteps:Ae});if(k.length&&k.every((nt,er)=>nt.toFixed(4)===Pe.params[er].toFixed(4))||Pe.params.length===0){const nt=Pe.fsrsItems?Xo():Zo();setTimeout(()=>alert(nt),200)}else X(E,w(o).fsrsParams6=Pe.params,w(o));s(m)&&at(m,s(m).current=s(m).total)},k=>{k.value.case==="computeParams"&&g(m,k.value.value)})}finally{g(i,!1)}}async function _e(){if(s(N)){await hr({});return}if(R().presetAssignmentsChanged()){alert(yr());return}g(N,!0),g(m,void 0);try{await nr(async()=>{const k=o().paramSearch?o().paramSearch:s(C),J=await ln({params:Vt(o()),search:k,ignoreRevlogsBeforeMs:U()});s(m)&&at(m,s(m).current=s(m).total),setTimeout(()=>alert(`Log loss: ${J.logLoss.toFixed(4)}, RMSE(bins): ${(J.rmseBins*100).toFixed(2)}%. ${Jo()}`),200)},k=>{k.value.case==="computeParams"&&g(m,k.value.value)})}finally{g(N,!1)}}async function ce(){if(s(L)){await hr({});return}if(R().presetAssignmentsChanged()){alert(yr());return}g(L,!0),g(W,void 0);try{await nr(async()=>{at(F,s(F).maxInterval=o().maximumReviewInterval),at(F,s(F).params=Vt(o())),at(F,s(F).search=`preset:"${R().getCurrentNameForSearch()}" -is:suspended`),at(F,s(F).easyDaysPercentages=o().easyDaysPercentages);const k=await un(s(F));g(b,k.optimalRetention),g(W,void 0)},k=>{k.value.case==="computeRetention"&&g(W,k.value.value)})}finally{g(L,!1)}}function xe(k){if(!k||!k.total)return"";const J=(k.current/k.total*100).toFixed(1);return k instanceof dn?`${J}%`:oi({pct:J,reviews:k.reviews})}function be(k){return k?ii({count:k.current}):""}function le(k){return k?li({num:k.toFixed(2)}):""}async function $e(){await Nr(),R().save(sr.COMPUTE_ALL_PARAMS)}let Se=D(!1);oe(()=>(e(),vt),()=>{g(l,e()>30?ei():"")}),oe(()=>a(),()=>{a()&&g(b,0)}),oe(()=>(s(i),s(N),s(L)),()=>{g(f,s(i)||s(N)||s(L))}),oe(()=>Ze(R()),()=>{g(C,`preset:"${R().getCurrentNameForSearch()}" -is:suspended`)}),oe(()=>o(),()=>{g(p,Number(o().desiredRetention.toFixed(2)))}),oe(()=>(s(p),o()),()=>{g(h,se(s(p),Vt(o())))}),oe(()=>s(p),()=>{g($,Z(s(p)))}),oe(()=>s(F),()=>{s(F).daysToSimulate>3650&&at(F,s(F).daysToSimulate=3650)}),oe(()=>Ze(R()),()=>{Ui(g(P,R().newCardsIgnoreReviewLimit),"$newCardsIgnoreReviewLimit",n)}),oe(()=>(o(),Ze(R()),c()),()=>{g(y,new cn({params:Vt(o()),desiredRetention:o().desiredRetention,newLimit:o().newPerDay,reviewLimit:o().reviewsPerDay,maxInterval:o().maximumReviewInterval,search:`preset:"${R().getCurrentNameForSearch()}" -is:suspended`,newCardsIgnoreReviewLimit:c(),easyDaysPercentages:o().easyDaysPercentages,reviewOrder:o().reviewOrder}))}),oe(()=>s(m),()=>{g(O,xe(s(m)))}),oe(()=>s(W),()=>{g(_,be(s(W)))}),oe(()=>s(m),()=>{var k,J;g(x,(J=(k=s(m))==null?void 0:k.reviews)!=null?J:void 0)}),We(),ke();var je=ed(),pe=ne(je);ft(pe,{get defaultValue(){return T.desiredRetention},min:.7,max:.99,percentage:!0,get value(){return o().desiredRetention},set value(k){X(E,w(o).desiredRetention=k,w(o))},children:(k,J)=>{te(k,{$$events:{click:()=>B()("desiredRetention")},children:(Ae,Ve)=>{ee();var Pe=Q();S(()=>V(Pe,Dr())),d(Ae,Pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Le=v(pe,2);ze(Le,{get warning(){return s(h)},get className(){return s($)}});var re=v(Le,2),Ne=z(re);Gc(Ne,{defaultValue:[],get defaults(){return T.fsrsParams6},get value(){return o().fsrsParams6},set value(k){X(E,w(o).fsrsParams6=k,w(o))},children:(k,J)=>{te(k,{$$events:{click:()=>B()("modelParams")},children:(Ae,Ve)=>{ee();var Pe=Q();S(()=>V(Pe,Ds())),d(Ae,Pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var he=v(Ne,2);jc(he,{get placeholder(){return s(C)},get value(){return o().paramSearch},set value(k){X(E,w(o).paramSearch=k,w(o))},$$legacy:!0});var Ie=v(he,2),Oe=z(Ie);{var lr=k=>{var J=Q();S(()=>V(J,Cr())),d(k,J)},jt=k=>{var J=Q();S(()=>V(J,ti())),d(k,J)};Te(Oe,k=>{s(i)?k(lr):k(jt,!1)})}A(Ie);var mt=v(Ie,2),ur=z(mt);{var qt=k=>{var J=Q();S(()=>V(J,Cr())),d(k,J)},Ut=k=>{var J=Q();S(()=>V(J,ri())),d(k,J)};Te(ur,k=>{s(N)?k(qt):k(Ut,!1)})}A(mt);var Tt=v(mt,2),cr=z(Tt);{var dr=k=>{var J=Q();S(()=>V(J,s(O))),d(k,J)},fr=k=>{var J=tt(),Ae=ne(J);{var Ve=Pe=>{var Fe=Q();S(()=>V(Fe,Os({reviews:s(x)}))),d(Pe,Fe)};Te(Ae,Pe=>{s(x)!==void 0&&Pe(Ve)},!0)}d(k,J)};Te(cr,k=>{s(i)||s(N)?k(dr):k(fr,!1)})}A(Tt),A(re);var ut=v(re,2),Qt=z(ut);ze(Qt,{get warning(){return s(l)},className:"alert-warning"});var ct=v(Qt,2),gr=z(ct,!0);S(()=>V(gr,si())),A(ct),A(ut);var dt=v(ut,2),Yt=z(dt);Qe(Yt,{defaultValue:!1,get value(){return Rt(),u()},set value(k){yt(M,k)},children:(k,J)=>{te(k,{$$events:{click:()=>B()("rescheduleCardsOnChange")},children:(Ae,Ve)=>{var Pe=de(()=>Es());At(Ae,{get title(){return s(Pe)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Kt=v(Yt,2);{var vr=k=>{var J=de(()=>ui());ze(k,{get warning(){return s(J)}})};Te(Kt,k=>{u()&&k(vr)})}A(dt);var It=v(dt,2),j=z(It),ge=z(j),ie=z(ge,!0);S(()=>V(ie,Ls())),A(ge);var ve=v(ge,2);Ue(ve,{defaultValue:365,min:1,max:3650,get value(){return s(F).daysToSimulate},set value(k){at(F,s(F).daysToSimulate=k)},children:(k,J)=>{te(k,{$$events:{click:()=>B()("computeOptimalRetention")},children:(Ae,Ve)=>{ee();var Pe=Q();S(()=>V(Pe,As())),d(Ae,Pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ae=v(ve,2),Je=z(ae);{var Ee=k=>{var J=Q();S(()=>V(J,Cr())),d(k,J)},Ct=k=>{var J=Q();S(()=>V(J,ni())),d(k,J)};Te(Je,k=>{s(L)?k(Ee):k(Ct,!1)})}A(ae);var Dt=v(ae,2);{var Xt=k=>{var J=Zc(),Ae=ne(J);S(()=>{var Fe;return V(Ae,`${(Fe=le(s(b)))!=null?Fe:""} `)});var Ve=v(Ae);{var Pe=Fe=>{var nt=de(()=>ci());ze(Fe,{get warning(){return s(nt)},className:"alert-warning"})};Te(Ve,Fe=>{s(b)-o().desiredRetention>=.01&&Fe(Pe)})}d(k,J)};Te(Dt,k=>{s(b)&&k(Xt)})}var $r=v(Dt,2);{var mr=k=>{var J=Jc(),Ae=z(J,!0);A(J),S(()=>V(Ae,s(_))),d(k,J)};Te($r,k=>{s(L)&&k(mr)})}A(j),A(It);var bt=v(It,2),Zt=z(bt),Jt=z(Zt,!0);S(()=>V(Jt,Rs())),A(Zt),A(bt);var Lt=v(bt,2);Xc(Lt,{get state(){return R()},get simulateFsrsRequest(){return s(y)},get computing(){return s(f)},get openHelpModal(){return B()},get onPresetChange(){return q()},get shown(){return s(Se)},set shown(k){g(Se,k)},$$legacy:!0}),S(()=>{var k,J,Ae;Ot(Ie,`btn ${(k=s(i)?"btn-warning":"btn-primary")!=null?k:""} svelte-mq5a9v`),Ie.disabled=!s(i)&&s(f),Ot(mt,`btn ${(J=s(N)?"btn-warning":"btn-primary")!=null?J:""} svelte-mq5a9v`),mt.disabled=!s(N)&&s(f),Ot(ae,`btn ${(Ae=s(L)?"btn-warning":"btn-primary")!=null?Ae:""} svelte-mq5a9v`),ae.disabled=!s(L)&&s(f)}),Re("click",Ie,()=>ue()),Re("click",mt,()=>_e()),Re("click",ct,()=>$e()),Re("click",ae,()=>ce()),Re("click",Zt,()=>g(Se,!0)),d(r,je),we()}var rd=K("<!> <!>",1);function sd(r,t){Ce(t,!1);const n=De(),e=()=>fe(u,"$fsrs",n);let a=H(t,"state",8),o=H(t,"api",8),c=H(t,"onPresetChange",8);const u=a().fsrs,l={fsrs:{title:"FSRS",help:di(),url:ye.DeckOptions.fsrs},desiredRetention:{title:Dr(),help:fi(),sched:Xe.FSRS},modelParams:{title:Ds(),help:gi()+`

`+vi(),sched:Xe.FSRS},rescheduleCardsOnChange:{title:Es(),help:$i(),sched:Xe.FSRS},computeOptimalRetention:{title:Ls(),help:mi(),sched:Xe.FSRS}},f=Object.values(l);let C=D(),p=D();function h($){s(C).show(),s(p).to($)}ke(),st(r,{title:"FSRS",children:($,P)=>{lt($,{slotHost:Y,get api(){return o()},children:(y,O)=>{var _=rd(),x=ne(_);Y(x,{children:(q,G)=>{Qe(q,{defaultValue:!1,get value(){return Rt(),e()},set value(E){yt(u,E)},children:(E,T)=>{te(E,{$$events:{click:()=>h(Object.keys(l).indexOf("fsrs"))},children:(M,I)=>{At(M,{get title(){return l.fsrs.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var R=v(x,2);{var B=q=>{td(q,{get state(){return a()},openHelpModal:G=>h(Object.keys(l).indexOf(G)),get onPresetChange(){return c()}})};Te(R,q=>{e()&&q(B)})}d(y,_)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:($,P)=>{$t($,{title:"FSRS",get url(){return ye.DeckOptions.fsrs},slot:"tooltip",get fsrs(){return e()},helpSections:f,$$events:{mount:y=>{g(C,y.detail.modal),g(p,y.detail.carousel)}}})}}}),we()}function nd(r,t){Ce(t,!1);let n=H(t,"html",8),e=H(t,"mounted",8);Tr(e()),ke();var a=tt(),o=ne(a);pi(o,n,!1,!1),d(r,a),we()}function ad(r){switch(r){case it.Seconds:return"s";case it.Minutes:return"m";case it.Hours:return"h";case it.Days:return"d";default:return""}}function od(r){switch(r){case"s":return it.Seconds;case"h":return it.Hours;case"d":return it.Days;default:return it.Minutes}}function id(r){const t=r*60;let n=El(t);return[it.Months,it.Years].includes(n)&&(n=it.Days),`${Math.round(Ml(n,t))}${ad(n)}`}function ld(r){const t=r.match(/(\d+)(.*)/);if(t){const[n,e,a]=t,o=od(a),c=Nl(o)*parseInt(e,10);return Math.min(c,2**31)/60}else return 0}function ud(r){return r.map(id).join(" ")}function cd(r){return r.split(" ").map(ld).filter(t=>t)}var dd=K('<input type="text" class="svelte-f5c9s0">');function fd(r,t){Ce(t,!1);let n=H(t,"value",12),e=D();function a(){n(cd(this.value))}oe(()=>Ze(n()),()=>{g(e,ud(n()))}),We(),ke();var o=dd();ht(o),S(()=>Ir(o,s(e))),Re("blur",o,a),d(r,o),we()}var gd=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),vd=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Qs(r,t){let n=H(t,"value",12),e=H(t,"defaultValue",8);var a=vd(),o=ne(a);Ge(o,()=>({"--cols":13})),Me(o.lastChild,{children:(c,u)=>{var l=gd(),f=ne(l);Ge(f,()=>({"--col-size":7})),kt(f.lastChild,{breakpoint:"xs",children:(p,h)=>{var $=tt(),P=ne($);Pt(P,t,"default",{}),d(p,$)},$$slots:{default:!0}}),A(f);var C=v(f,2);Ge(C,()=>({"--col-size":6})),kt(C.lastChild,{breakpoint:"xs",children:(p,h)=>{xt(p,{children:($,P)=>{fd($,{get value(){return n()},set value(y){n(y)},$$legacy:!0})},$$slots:{default:!0,revert:($,P)=>{Gt($,{slot:"revert",get defaultValue(){return e()},get value(){return n()},set value(y){n(y)},$$legacy:!0})}}})},$$slots:{default:!0}}),A(C),d(c,l)},$$slots:{default:!0}}),A(o),d(r,a)}var $d=K("<!> <!> <!> <!> <!> <!>",1);function md(r,t){Ce(t,!1);const n=De(),e=()=>fe(u,"$config",n),a=()=>fe(f,"$fsrs",n);let o=H(t,"state",8),c=H(t,"api",24,()=>({}));const u=o().currentConfig,l=o().defaults,f=o().fsrs;let C=D(),p=D();const h={relearningSteps:{title:hi(),help:yi(),url:ye.DeckOptions.relearningSteps},minimumInterval:{title:Ci(),help:wi(),url:ye.DeckOptions.minimumInterval,sched:Xe.SM2},leechThreshold:{title:Is(),help:_i(),url:ye.Leeches.leeches},leechAction:{title:Pi(),help:ki(),url:ye.Leeches.waiting}},$=Object.values(h);let P=D(),y=D();function O(x){s(P).show(),s(y).to(x)}oe(()=>(e(),a(),vt),()=>{const x=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;g(C,!a()&&x>e().minimumLapseInterval?bi():""),g(p,a()&&x>=1?Ms():"")}),We(),ke();var _=de(()=>Xr());st(r,{get title(){return s(_)},children:(x,R)=>{lt(x,{slotHost:Y,get api(){return c()},children:(B,q)=>{var G=$d(),E=ne(G);Y(E,{children:(L,b)=>{Qs(L,{get defaultValue(){return l.relearnSteps},get value(){return e().relearnSteps},set value(W){X(u,w(e).relearnSteps=W,w(e))},children:(W,F)=>{te(W,{$$events:{click:()=>O(Object.keys(h).indexOf("relearningSteps"))},children:(se,Z)=>{ee();var U=Q();S(()=>V(U,h.relearningSteps.title)),d(se,U)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=v(E,2);Y(T,{children:(L,b)=>{ze(L,{get warning(){return s(p)}})},$$slots:{default:!0}});var M=v(T,2);{var I=L=>{Y(L,{children:(b,W)=>{Ue(b,{get defaultValue(){return l.minimumLapseInterval},min:1,get value(){return e().minimumLapseInterval},set value(F){X(u,w(e).minimumLapseInterval=F,w(e))},children:(F,se)=>{te(F,{$$events:{click:()=>O(Object.keys(h).indexOf("minimumInterval"))},children:(Z,U)=>{ee();var ue=Q();S(()=>V(ue,h.minimumInterval.title)),d(Z,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})};Te(M,L=>{a()||L(I)})}var m=v(M,2);Y(m,{children:(L,b)=>{ze(L,{get warning(){return s(C)}})},$$slots:{default:!0}});var i=v(m,2);Y(i,{children:(L,b)=>{Ue(L,{get defaultValue(){return l.leechThreshold},min:1,get value(){return e().leechThreshold},set value(W){X(u,w(e).leechThreshold=W,w(e))},children:(W,F)=>{te(W,{$$events:{click:()=>O(Object.keys(h).indexOf("leechThreshold"))},children:(se,Z)=>{ee();var U=Q();S(()=>V(U,h.leechThreshold.title)),d(se,U)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var N=v(i,2);Y(N,{children:(L,b)=>{var W=de(fc);gt(L,{get defaultValue(){return l.leechAction},get choices(){return s(W)},breakpoint:"md",get value(){return e().leechAction},set value(F){X(u,w(e).leechAction=F,w(e))},children:(F,se)=>{te(F,{$$events:{click:()=>O(Object.keys(h).indexOf("leechAction"))},children:(Z,U)=>{ee();var ue=Q();S(()=>V(ue,h.leechAction.title)),d(Z,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(B,G)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(x,R)=>{var B=de(()=>Xr());$t(x,{get title(){return s(B)},get url(){return ye.DeckOptions.lapses},slot:"tooltip",get fsrs(){return a()},helpSections:$,$$events:{mount:q=>{g(P,q.detail.modal),g(y,q.detail.carousel)}}})}}}),we()}var pd=K("<!> <!> <!> <!>",1),hd=K("<!> <!> <!> <!> <!>",1);function yd(r,t){Ce(t,!1);const n=De(),e=()=>fe(f,"$config",n),a=()=>fe(p,"$fsrs",n),o=D(),c=D();let u=H(t,"state",8),l=H(t,"api",24,()=>({}));const f=u().currentConfig,C=u().defaults,p=u().fsrs;let h=D(),$=D();const P={learningSteps:{title:xi(),help:Si(),url:ye.DeckOptions.learningSteps},graduatingInterval:{title:Oi(),help:Ri(),url:ye.DeckOptions.graduatingInterval,sched:Xe.SM2},easyInterval:{title:Ai(),help:Ti(),url:ye.DeckOptions.easyInterval,sched:Xe.SM2},insertionOrder:{title:Ii(),help:Di(),url:ye.DeckOptions.insertionOrder}},y=Object.values(P);let O=D(),_=D();function x(B){s(O).show(),s(_).to(B)}oe(()=>(e(),a()),()=>{const B=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;g(h,B>e().graduatingIntervalGood?Li():""),g($,a()&&B>=1?Ms():"")}),oe(()=>(e(),vt),()=>{g(o,e().graduatingIntervalGood>e().graduatingIntervalEasy?Ei():"")}),oe(()=>(e(),vt),()=>{g(c,e().newCardInsertOrder==br.RANDOM?Mi():"")}),We(),ke();var R=de(()=>Zr());st(r,{get title(){return s(R)},children:(B,q)=>{lt(B,{slotHost:Y,get api(){return l()},children:(G,E)=>{var T=hd(),M=ne(T);Y(M,{children:(b,W)=>{Qs(b,{get defaultValue(){return C.learnSteps},get value(){return e().learnSteps},set value(F){X(f,w(e).learnSteps=F,w(e))},children:(F,se)=>{te(F,{$$events:{click:()=>x(Object.keys(P).indexOf("learningSteps"))},children:(Z,U)=>{ee();var ue=Q();S(()=>V(ue,P.learningSteps.title)),d(Z,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=v(M,2);Y(I,{children:(b,W)=>{ze(b,{get warning(){return s($)}})},$$slots:{default:!0}});var m=v(I,2);{var i=b=>{var W=pd(),F=ne(W);Y(F,{children:(ue,_e)=>{Ue(ue,{get defaultValue(){return C.graduatingIntervalGood},get value(){return e().graduatingIntervalGood},set value(ce){X(f,w(e).graduatingIntervalGood=ce,w(e))},children:(ce,xe)=>{te(ce,{$$events:{click:()=>x(Object.keys(P).indexOf("graduatingInterval"))},children:(be,le)=>{ee();var $e=Q();S(()=>V($e,P.graduatingInterval.title)),d(be,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var se=v(F,2);Y(se,{children:(ue,_e)=>{ze(ue,{get warning(){return s(h)}})},$$slots:{default:!0}});var Z=v(se,2);Y(Z,{children:(ue,_e)=>{Ue(ue,{get defaultValue(){return C.graduatingIntervalEasy},get value(){return e().graduatingIntervalEasy},set value(ce){X(f,w(e).graduatingIntervalEasy=ce,w(e))},children:(ce,xe)=>{te(ce,{$$events:{click:()=>x(Object.keys(P).indexOf("easyInterval"))},children:(be,le)=>{ee();var $e=Q();S(()=>V($e,P.easyInterval.title)),d(be,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var U=v(Z,2);Y(U,{children:(ue,_e)=>{ze(ue,{get warning(){return s(o)}})},$$slots:{default:!0}}),d(b,W)};Te(m,b=>{a()||b(i)})}var N=v(m,2);Y(N,{children:(b,W)=>{var F=de(gc);gt(b,{get defaultValue(){return C.newCardInsertOrder},get choices(){return s(F)},breakpoint:"md",get value(){return e().newCardInsertOrder},set value(se){X(f,w(e).newCardInsertOrder=se,w(e))},children:(se,Z)=>{te(se,{$$events:{click:()=>x(Object.keys(P).indexOf("insertionOrder"))},children:(U,ue)=>{ee();var _e=Q();S(()=>V(_e,P.insertionOrder.title)),d(U,_e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var L=v(N,2);Y(L,{children:(b,W)=>{ze(b,{get warning(){return s(c)}})},$$slots:{default:!0}}),d(G,T)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(B,q)=>{var G=de(()=>Zr());$t(B,{get title(){return s(G)},get url(){return ye.DeckOptions.newCards},slot:"tooltip",helpSections:y,get fsrs(){return a()},$$events:{mount:E=>{g(O,E.detail.modal),g(_,E.detail.carousel)}}})}}}),we()}var Cd=K('<div class="show-timer-switch" style="display: contents;"><!></div>'),wd=K('<div class="show-timer-switch" style="display: contents;"><!></div>'),_d=K("<!> <!> <!> <!>",1);function Pd(r,t){Ce(t,!1);const n=De(),e=()=>fe(u,"$config",n),a=D();let o=H(t,"state",8),c=H(t,"api",8);const u=o().currentConfig,l=o().defaults,f={maximumAnswerSecs:{title:Ni(),help:Vi()},showAnswerTimer:{title:Fi(),help:Hi()},stopTimerOnAnswer:{title:Bi(),help:zi()}},C=Object.values(f);let p=D(),h=D();function $(y){s(p).show(),s(h).to(y)}oe(()=>(e(),vt),()=>{g(a,e().capAnswerTimeToSecs>600?Gi():"")}),We(),ke();var P=de(()=>Jr());st(r,{get title(){return s(P)},children:(y,O)=>{lt(y,{slotHost:Y,get api(){return c()},children:(_,x)=>{var R=_d(),B=ne(R);Y(B,{children:(T,M)=>{Ue(T,{get defaultValue(){return l.capAnswerTimeToSecs},min:1,max:7200,get value(){return e().capAnswerTimeToSecs},set value(I){X(u,w(e).capAnswerTimeToSecs=I,w(e))},children:(I,m)=>{te(I,{$$events:{click:()=>$(Object.keys(f).indexOf("maximumAnswerSecs"))},children:(i,N)=>{ee();var L=Q();S(()=>V(L,f.maximumAnswerSecs.title)),d(i,L)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var q=v(B,2);Y(q,{children:(T,M)=>{ze(T,{get warning(){return s(a)}})},$$slots:{default:!0}});var G=v(q,2);Y(G,{children:(T,M)=>{var I=Cd(),m=z(I);Qe(m,{get defaultValue(){return l.showTimer},get value(){return e().showTimer},set value(i){X(u,w(e).showTimer=i,w(e))},children:(i,N)=>{te(i,{$$events:{click:()=>$(Object.keys(f).indexOf("showAnswerTimer"))},children:(L,b)=>{ee();var W=Q();S(()=>V(W,f.showAnswerTimer.title)),d(L,W)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),A(I),d(T,I)},$$slots:{default:!0}});var E=v(G,2);Y(E,{children:(T,M)=>{var I=wd(),m=z(I);Qe(m,{get defaultValue(){return l.stopTimerOnAnswer},get value(){return e().stopTimerOnAnswer},set value(i){X(u,w(e).stopTimerOnAnswer=i,w(e))},children:(i,N)=>{te(i,{$$events:{click:()=>$(Object.keys(f).indexOf("stopTimerOnAnswer"))},children:(L,b)=>{ee();var W=Q();S(()=>V(W,f.stopTimerOnAnswer.title)),d(L,W)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),A(I),d(T,I)},$$slots:{default:!0}}),d(_,R)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(y,O)=>{var _=de(()=>Jr());$t(y,{get title(){return s(_)},get url(){return ye.DeckOptions.timer},slot:"tooltip",helpSections:C,$$events:{mount:x=>{g(p,x.detail.modal),g(h,x.detail.carousel)}}})}}}),we()}var kd=K("<!> <!> <!>",1),bd=K('<datalist id="easy_day_steplist"><option>0.5</option></datalist> <!>',1);function xd(r,t){Ce(t,!1);const n=De(),e=()=>fe($,"$config",n),a=()=>fe(p,"$fsrsEnabled",n),o=()=>fe(h,"$reschedule",n),c=D(),u=D(),l=D();let f=H(t,"state",8),C=H(t,"api",8);const p=f().fsrs,h=f().fsrsReschedule,$=f().currentConfig,P=f().defaults,y=e().easyDaysPercentages.slice();oe(()=>e(),()=>{e().easyDaysPercentages.length!==7&&X($,w(e).easyDaysPercentages=P.easyDaysPercentages.slice(),w(e))}),oe(()=>e(),()=>{g(c,e().easyDaysPercentages.some((R,B)=>R!==y[B]))}),oe(()=>(e(),vt),()=>{g(u,e().easyDaysPercentages.some(R=>R===1)?"":Wi())}),oe(()=>(s(c),a(),o(),vt),()=>{g(l,s(c)&&!(a()&&o())?ji():"")}),We(),ke();var O=bd(),_=v(ne(O),2),x=de(()=>Ts());st(_,{get title(){return s(x)},children:(R,B)=>{lt(R,{slotHost:Y,get api(){return C()},children:(q,G)=>{var E=kd(),T=ne(E);Us(T,{get values(){return e().easyDaysPercentages},set values(m){X($,w(e).easyDaysPercentages=m,w(e))},$$legacy:!0});var M=v(T,2);Y(M,{children:(m,i)=>{ze(m,{get warning(){return s(u)}})},$$slots:{default:!0}});var I=v(M,2);Y(I,{children:(m,i)=>{ze(m,{get warning(){return s(l)}})},$$slots:{default:!0}}),d(q,E)},$$slots:{default:!0}})},$$slots:{default:!0}}),d(r,O),we()}var Sd=K("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),Od=K('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function Rd(r,t){Ce(t,!1);const n=De(),e=()=>fe(o,"$addons",n);let a=H(t,"state",8);const o=a().addonComponents;function c(){return a().currentAuxData}function u(T){yt(o,[...e(),T])}function l(T,M){yt(o,[...e(),{component:nd,html:T,mounted:M}])}const f={},C={},p={},h={},$={},P={},y={},O={},_={},x={};let R=D();ke();var B=Od(),q=ne(B);Dc(q,{get state(){return a()},$$events:{presetchange(...T){var M;(M=s(R))==null||M.apply(this,T)}}});var G=v(q,2),E=z(G);return Ge(E,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Qi(E.lastChild,{breakpoint:"sm",class:"container-columns",children:(T,M)=>{var I=Sd(),m=ne(I),i=z(m);Me(i,{class:"row-columns",children:(le,$e)=>{Nc(le,{get state(){return a()},api:C,get onPresetChange(){return s(R)},set onPresetChange(Se){g(R,Se)},$$legacy:!0})},$$slots:{default:!0}});var N=v(i,2);Me(N,{class:"row-columns",children:(le,$e)=>{yd(le,{get state(){return a()},api:p})},$$slots:{default:!0}});var L=v(N,2);Me(L,{class:"row-columns",children:(le,$e)=>{md(le,{get state(){return a()},api:h})},$$slots:{default:!0}});var b=v(L,2);Me(b,{class:"row-columns",children:(le,$e)=>{Fc(le,{get state(){return a()},api:P})},$$slots:{default:!0}});var W=v(b,2);Me(W,{class:"row-columns",children:(le,$e)=>{sd(le,{get state(){return a()},api:{},get onPresetChange(){return s(R)},set onPresetChange(Se){g(R,Se)},$$legacy:!0})},$$slots:{default:!0}}),A(m);var F=v(m,2),se=z(F);Me(se,{class:"row-columns",children:(le,$e)=>{Cc(le,{get state(){return a()},api:$})},$$slots:{default:!0}});var Z=v(se,2);Me(Z,{class:"row-columns",children:(le,$e)=>{uc(le,{get state(){return a()},api:O})},$$slots:{default:!0}});var U=v(Z,2);Me(U,{class:"row-columns",children:(le,$e)=>{Pd(le,{get state(){return a()},api:y})},$$slots:{default:!0}});var ue=v(U,2);Me(ue,{class:"row-columns",children:(le,$e)=>{hc(le,{get state(){return a()},api:y})},$$slots:{default:!0}});var _e=v(ue,2);{var ce=le=>{Me(le,{class:"row-columns",children:($e,Se)=>{Ou($e,{get state(){return a()}})},$$slots:{default:!0}})};Te(_e,le=>{e().length&&le(ce)})}var xe=v(_e,2);Me(xe,{class:"row-columns",children:(le,$e)=>{xd(le,{get state(){return a()},api:x})},$$slots:{default:!0}});var be=v(xe,2);Me(be,{class:"row-columns",children:(le,$e)=>{ic(le,{get state(){return a()},api:_})},$$slots:{default:!0}}),A(F),d(T,I)},$$slots:{default:!0}}),A(E),A(G),d(r,B),qe(t,"auxData",c),qe(t,"addSvelteAddon",u),qe(t,"addHtmlAddon",l),qe(t,"options",f),qe(t,"dailyLimits",C),qe(t,"newOptions",p),qe(t,"lapseOptions",h),qe(t,"buryOptions",$),qe(t,"displayOrder",P),qe(t,"timerOptions",y),qe(t,"audioOptions",O),qe(t,"advancedOptions",_),qe(t,"easyDays",x),we({auxData:c,addSvelteAddon:u,addHtmlAddon:l,options:f,dailyLimits:C,newOptions:p,lapseOptions:h,buryOptions:$,displayOrder:P,timerOptions:y,audioOptions:O,advancedOptions:_,easyDays:x})}function pf(r,t){Ce(t,!1);let n=H(t,"data",8),e=D();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await Nr(),(!await n().state.isModified()||confirm(qi()))&&fn({})},Tr(()=>{globalThis.$deckOptions=new Promise((a,o)=>{a(s(e))}),n().state.resolveOriginalConfigs(),gn({})}),ke(),Ft(Rd(r,{get state(){return n().state},$$legacy:!0}),a=>g(e,a),()=>s(e)),we()}export{pf as component,mf as universal};
