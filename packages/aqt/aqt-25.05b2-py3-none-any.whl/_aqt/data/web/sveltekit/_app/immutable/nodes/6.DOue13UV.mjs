var mn=Object.defineProperty;var pn=(r,t,a)=>t in r?mn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a;var me=(r,t,a)=>pn(r,typeof t!="symbol"?t+"":t,a);import{L as hn,M as yn,N as Cn,O as wn,P as _n,s as pt,Q as Pn,S as dt,T as st,U as tt,V as fr,W as Rt,X as pr,Y as Bt,Z as Br,_ as rr,$ as kn,a0 as bn,a1 as zr,a2 as xn,a3 as Sn,a4 as On,a5 as Rn,a6 as An,a7 as In}from"../chunks/BFcSvz-c.mjs";import{e as Dn,f as Tn,b as Ln}from"../chunks/CHgEBfdo.mjs";import{s as v,b9 as ms,g as n,L as ps,K as C,aN as jt,x as En,ba as Mn,p as _e,e as Je,f as re,c as f,d as Pe,aq as Nn,b2 as _r,b3 as Vn,i as K,h as B,V as g,r as R,b as S,n as J,l as oe,a as Ge,m as I,T as Ke,t as Q,b5 as Gt,al as ve,Z as Fn}from"../chunks/DV-2yDg-.mjs";import{w as He,g as Fe,d as Hn,r as hs,a as Bn}from"../chunks/DqGH9kBy.mjs";import{c as Jt}from"../chunks/C0VzVgoS.mjs";import{b as Pr,i as Gr,S as zn}from"../chunks/q9maetcp.mjs";import"../chunks/Bg9kRutz.mjs";import{i as ke}from"../chunks/nnh_QitT.mjs";import{b as Wt}from"../chunks/Dz-DtsIW.mjs";import{p as V,i as Re,s as ys}from"../chunks/x5bsbXB-.mjs";import{q as Gn,s as N,r as Cs,e as xe,c as ws,o as kr,p as Wn}from"../chunks/C_re1EiV.mjs";import{dY as _s,u as Ze,dZ as hr,av as ft,d_ as jn,d$ as qn,t as mt,e0 as br,e1 as Un,T as ze,e2 as Ps,e3 as Qn,e4 as Wr,e5 as Yn,e6 as jr,e7 as Kn,e8 as Xn,e9 as Zn,ea as Jn,eb as ea,ec as ta,ed as ra,ee as sa,ef as na,eg as aa,eh as oa,ei as ia,ej as la,ek as ua,b7 as lt,el as ca,em as qr,en as da,eo as fa,ep as ga,eq as va,er as Ur,es as $a,et as ma,eu as pa,ev as ha,ew as ya,ex as Ca,ey as wa,ez as _a,eA as Pa,eB as ka,eC as ks,eD as ba,eE as xa,eF as Sa,eG as Oa,eH as Ra,eI as Aa,eJ as Ia,eK as Da,eL as Ta,eM as La,eN as Ea,eO as Ma,eP as Na,eQ as Va,eR as Fa,eS as Ha,eT as Ba,eU as za,eV as Ga,eW as Wa,eX as ja,eY as qa,eZ as Ua,e_ as Qa,e$ as Ya,f0 as Ka,f1 as Xa,f2 as Za,f3 as Ja,f4 as eo,f5 as to,f6 as ro,f7 as so,f8 as no,f9 as ao,fa as oo,fb as io,fc as Qr,fd as lo,fe as uo,ff as co,fg as fo,fh as go,fi as vo,fj as $o,fk as Yr,fl as mo,fm as po,fn as ho,fo as yo,fp as bs,fq as xs,fr as Ss,fs as Co,ft as wo,fu as _o,fv as Po,fw as ko,fx as bo,fy as xo,fz as So,fA as Oo,fB as er,fC as Kr,fD as Xr,fE as Os,fF as Ro,fG as Rs,fH as Ao,fI as As,fJ as Io,fK as Do,fL as Zr,fM as To,fN as Lo,fO as Eo,fP as Mo,fQ as No,fR as Vo,fS as Fo,fT as Ho,fU as Bo,fV as Is,fW as zo,fX as Jr,cl as Go,cj as Wo,cz as Ds,fY as jo,cQ as qo,cm as Uo,fZ as Qo,f_ as Yo,f$ as Ko,g0 as Xo,g1 as Zo,g2 as Jo,g3 as ei,g4 as ti,g5 as ri,g6 as si,g7 as Ts,g8 as ni,g9 as ai,ga as xr,gb as Ls,gc as oi,gd as ii,ge as li,gf as Es,gg as Ms,gh as yr,gi as ui,gj as ci,gk as di,gl as fi,gm as gi,gn as vi,dt as $i,go as mi,q as At,gp as pi,gq as hi,gr as yi,gs as es,gt as Ci,gu as wi,gv as _i,gw as Pi,gx as Ns,gy as ki,gz as bi,gA as xi,gB as Si,gC as Oi,gD as Vs,gE as Ri,gF as Ai,gG as Ii,gH as Di,gI as Ti,gJ as Li,gK as Ei,U as Mi,gL as Ni,gM as Vi,gN as Fi,gO as Hi,gP as Bi,gQ as zi,gR as Gi,gS as Wi,gT as Fs,gU as ts,gV as ji,gW as qi,gX as Ui,gY as Qi,gZ as Yi,g_ as Ki,g$ as Xi,h0 as Zi,h1 as Ji,h2 as el,h3 as tl,h4 as rs,h5 as rl,h6 as sl,h7 as nl,h8 as al,h9 as ol,ha as il,hb as ll,hc as ss,hd as ul,he as cl,hf as dl}from"../chunks/BiKpa2f-.mjs";import{b as We}from"../chunks/DpsVa0Mt.mjs";import{s as De,a as $e,m as It,b as gt,d as Z,e as fl}from"../chunks/DDtyVqW1.mjs";import{C as gl}from"../chunks/D2jkqkKt.mjs";import{e as qt,i as ar,s as vl,R as Me,p as $l}from"../chunks/BcMgA1Yz.mjs";import{c as Cr}from"../chunks/BLWFwbTg.mjs";import{T as rt}from"../chunks/C3rarh8G.mjs";import{H as we,b as Qe,a as ut,M as ml}from"../chunks/BbA1NO4v.mjs";import{d as Ut,M as Hs,S as pl,l as hl,t as yl,u as Cl,v as wl,a as _l,W as Pl,P as kl,D as zt}from"../chunks/CLt-kVn4.mjs";import{a as bl}from"../chunks/CcaWrs5J.mjs";import{C as wt,R as Qt,a as ee,S as je,E as it}from"../chunks/rh8WnBH3.mjs";import{c as Yt,b as gr}from"../chunks/Bj9ye7vG.mjs";import{a as sr,Z as xl,I as ns,c as Bs,_ as Sl}from"../chunks/D8Qru_pE.mjs";import{C as ht}from"../chunks/D7_czLJ9.mjs";import{j as Ol,S as Rl,g as Al,p as Il}from"../chunks/C0jgmsWw.mjs";import{W as Be}from"../chunks/CB0B2BdO.mjs";import{m as zs}from"../chunks/Dbye-yJ_.mjs";import{L as Dl,S as Tl}from"../chunks/DTLniEvz.mjs";import{I as Ll}from"../chunks/DZXzKJuX.mjs";import{r as El}from"../chunks/C6bBlKB0.mjs";import{r as nr}from"../chunks/gIolIubw.mjs";import{k as Ml}from"../chunks/B-nA_Kf0.mjs";import{ac as Sr,y as as,z as os,A as is,C as Nl,B as Vl,D as Fl,E as Hl,H as ls,F as Bl,G as us,b as zl,I as Gl,M as Wl,K as jl,J as ql,N as Ul,L as Ql}from"../chunks/B81RkpQY.mjs";import{I as Yl,i as Kl,c as Xl,C as Zl,T as Jl}from"../chunks/D9dlq4yy.mjs";import{t as vr,b as nt,c as eu,u as tu,e as ru}from"../chunks/CWHBiW5F.mjs";import{t as su}from"../chunks/Dc6AXCf2.mjs";import{S as cs,a as nu}from"../chunks/DB8w6JNV.mjs";function au(r){v(r,r.v+1)}function ou(r){let t=0,a=En(0),e;return()=>{ms()&&(n(a),ps(()=>(t===0&&(e=C(()=>r(()=>au(a)))),t+=1,()=>{jt().then(()=>{t-=1,t===0&&(e==null||e(),e=void 0)})})))}}function iu(r,t){let a=r();const e=He(a,s=>{let i=a!==r();const d=Mn(()=>{ps(()=>{const l=r();i&&s(l)})});return i=!0,d});return t?{set:t,update:s=>t(s(r())),subscribe:e.subscribe}:{subscribe:e.subscribe}}function lu(r){let t;const a=ou(s=>{let i=!1;const d=r.subscribe(l=>{t=l,i&&s()});return i=!0,d});function e(){return ms()?(a(),t):Fe(r)}return"set"in r?{get current(){return e()},set current(s){r.set(s)}}:{get current(){return e()}}}const uu=Object.freeze(Object.defineProperty({__proto__:null,derived:Hn,fromStore:lu,get:Fe,readable:hs,readonly:Bn,toStore:iu,writable:He},Symbol.toStringTag,{value:"Module"}));function cu(r,t,...a){return du(r,Kl,t,a)}function du(r,t,a,e){return function s(i,d){if(d>=e.length)return a(i);const l=new Yl,o=e[d++];let $=-1;for(const y of i){const p=o(y,++$,i),h=l.get(p);h?h.push(y):l.set(p,[y])}for(const[y,p]of l)l.set(y,s(p,d));return t(l)}(r,0)}const fu=Xl("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function gu(r,t){for(var a=-1,e=r==null?0:r.length,s=Array(e);++a<e;)s[a]=t(r[a],a,r);return s}var ds=cs?cs.prototype:void 0,fs=ds?ds.toString:void 0;function Gs(r){if(typeof r=="string")return r;if(Ut(r))return gu(r,Gs)+"";if(Sr(r))return fs?fs.call(r):"";var t=r+"";return t=="0"&&1/r==-1/0?"-0":t}function vu(r){return r}var $u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mu=/^\w*$/;function Or(r,t){if(Ut(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Sr(r)?!0:mu.test(r)||!$u.test(r)||t!=null&&r in Object(t)}var pu="Expected a function";function Rr(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(pu);var a=function(){var e=arguments,s=t?t.apply(this,e):e[0],i=a.cache;if(i.has(s))return i.get(s);var d=r.apply(this,e);return a.cache=i.set(s,d)||i,d};return a.cache=new(Rr.Cache||Hs),a}Rr.Cache=Hs;var hu=500;function yu(r){var t=Rr(r,function(e){return a.size===hu&&a.clear(),e}),a=t.cache;return t}var Cu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wu=/\\(\\)?/g,_u=yu(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(Cu,function(a,e,s,i){t.push(s?i.replace(wu,"$1"):e||a)}),t});function Pu(r){return r==null?"":Gs(r)}function Ws(r,t){return Ut(r)?r:Or(r,t)?[r]:_u(Pu(r))}function or(r){if(typeof r=="string"||Sr(r))return r;var t=r+"";return t=="0"&&1/r==-1/0?"-0":t}function js(r,t){t=Ws(t,r);for(var a=0,e=t.length;r!=null&&a<e;)r=r[or(t[a++])];return a&&a==e?r:void 0}function ku(r,t,a){var e=r==null?void 0:js(r,t);return e===void 0?a:e}var bu=1,xu=2;function Su(r,t,a,e){var s=a.length,i=s;if(r==null)return!i;for(r=Object(r);s--;){var d=a[s];if(d[2]?d[1]!==r[d[0]]:!(d[0]in r))return!1}for(;++s<i;){d=a[s];var l=d[0],o=r[l],$=d[1];if(d[2]){if(o===void 0&&!(l in r))return!1}else{var y=new pl,p;if(!(p===void 0?Pr($,o,bu|xu,e,y):p))return!1}}return!0}function qs(r){return r===r&&!nu(r)}function Ou(r){for(var t=hl(r),a=t.length;a--;){var e=t[a],s=r[e];t[a]=[e,s,qs(s)]}return t}function Us(r,t){return function(a){return a==null?!1:a[r]===t&&(t!==void 0||r in Object(a))}}function Ru(r){var t=Ou(r);return t.length==1&&t[0][2]?Us(t[0][0],t[0][1]):function(a){return a===r||Su(a,r,t)}}function Au(r,t){return r!=null&&t in Object(r)}function Iu(r,t,a){t=Ws(t,r);for(var e=-1,s=t.length,i=!1;++e<s;){var d=or(t[e]);if(!(i=r!=null&&a(r,d)))break;r=r[d]}return i||++e!=s?i:(s=r==null?0:r.length,!!s&&yl(s)&&Cl(d,s)&&(Ut(r)||wl(r)))}function Du(r,t){return r!=null&&Iu(r,t,Au)}var Tu=1,Lu=2;function Eu(r,t){return Or(r)&&qs(t)?Us(or(r),t):function(a){var e=ku(a,r);return e===void 0&&e===t?Du(a,r):Pr(t,e,Tu|Lu)}}function Mu(r){return function(t){return t==null?void 0:t[r]}}function Nu(r){return function(t){return js(t,r)}}function Vu(r){return Or(r)?Mu(or(r)):Nu(r)}function Fu(r){return typeof r=="function"?r:r==null?vu:typeof r=="object"?Ut(r)?Eu(r[0],r[1]):Ru(r):Vu(r)}function Hu(r,t,a){a=typeof a=="function"?a:void 0;var e=a?a(r,t):void 0;return e===void 0?Pr(r,t,void 0,a):!!e}function Bu(r,t){for(var a,e=-1,s=r.length;++e<s;){var i=t(r[e]);i!==void 0&&(a=a===void 0?i:a+i)}return a}function zu(r,t){return r&&r.length?Bu(r,Fu(t)):0}function wr(){let r;return[new Promise(a=>r=a),r]}class Gu{constructor(t,a){me(this,"currentConfig");me(this,"currentAuxData");me(this,"configList");me(this,"cardStateCustomizer");me(this,"currentDeck");me(this,"deckLimits");me(this,"defaults");me(this,"addonComponents");me(this,"newCardsIgnoreReviewLimit");me(this,"applyAllParentLimits");me(this,"fsrs");me(this,"fsrsReschedule",He(!1));me(this,"daysSinceLastOptimization");me(this,"currentPresetName");me(this,"originalConfigsPromise");me(this,"originalConfigsResolve");me(this,"targetDeckId");me(this,"configs");me(this,"selectedIdx");me(this,"configListSetter");me(this,"modifiedConfigs",new Set);me(this,"removedConfigs",[]);me(this,"schemaModified");me(this,"_presetAssignmentsChanged",!1);me(this,"loadedPresets",new Set);var e,s;this.targetDeckId=t,this.currentDeck=a.currentDeck,this.defaults=a.defaults.config,this.configs=a.allConfig.map(i=>({config:i.config,useCount:i.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(i=>i.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=He(a.cardStateCustomizer),this.deckLimits=He((s=(e=a.currentDeck)==null?void 0:e.limits)!=null?s:ju()),this.newCardsIgnoreReviewLimit=He(a.newCardsIgnoreReviewLimit),this.applyAllParentLimits=He(a.applyAllParentLimits),this.fsrs=He(a.fsrs),this.daysSinceLastOptimization=He(a.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=He(this.getCurrentConfig()),this.currentAuxData=He(this.getCurrentAuxData()),this.currentPresetName=He(this.configs[this.selectedIdx].config.name),this.configList=hs(this.getConfigList(),i=>{this.configListSetter=i}),this.schemaModified=a.schemaModified,this.addonComponents=He([]),Fe(this.configList),this.currentConfig.subscribe(i=>this.onCurrentConfigChanged(i)),this.currentAuxData.subscribe(i=>this.onCurrentAuxDataChanged(i)),this.loadedPresets.add(this.configs[this.selectedIdx].config.id),[this.originalConfigsPromise,this.originalConfigsResolve]=wr()}async markCurrentPresetAsLoaded(){const t=this.configs[this.selectedIdx].config.id,a=this.loadedPresets;if(t&&!a.has(t)){a.add(t);const e=await this.originalConfigsPromise,s=e.configs.findIndex(i=>i.id===t);s!==-1&&(e.configs[s]=Jt(this.configs[this.selectedIdx].config))}}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList(),jt().then(()=>this.markCurrentPresetAsLoaded())}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const a=this.ensureNewNameUnique(t),e=this.configs[this.selectedIdx].config;e.name=a,e.id&&this.modifiedConfigs.add(e.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,a){const e=this.ensureNewNameUnique(t),i={config:new hn({id:0n,name:e,config:new yn(Jt(a))}),useCount:0};this.configs.push(i),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1);const a=Math.max(0,this.selectedIdx-1);this.setCurrentIndex(a)}dataForSaving(t){const e=[...this.configs.map(s=>s.config).filter((s,i)=>i!==this.selectedIdx&&(s.id===0n||this.modifiedConfigs.has(s.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:e,mode:t,cardStateCustomizer:Fe(this.cardStateCustomizer),limits:Fe(this.deckLimits),newCardsIgnoreReviewLimit:Fe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Fe(this.applyAllParentLimits),fsrs:Fe(this.fsrs),fsrsReschedule:Fe(this.fsrsReschedule)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await Cn(this.dataForSaving(t))}onCurrentConfigChanged(t){const a=this.configs[this.selectedIdx].config;Gr(t,a.config)||(a.config=t,a.id&&this.modifiedConfigs.add(a.id))}onCurrentAuxDataChanged(t){const a=this.getCurrentAuxData();Gr(a,t)||this.currentConfig.update(e=>{const s=new TextEncoder().encode(JSON.stringify(t));return e.other=s,e})}ensureNewNameUnique(t){return this.configs.findIndex(e=>e.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return Jt(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return Wu(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((a,e)=>Dn(a.config.name,e.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(a=>a.config.name==t)}getConfigList(){return this.configs.map((a,e)=>{const s=a.useCount+(e===this.selectedIdx?1:0);return{name:a.config.name,current:e===this.selectedIdx,idx:e,useCount:s}})}getAllConfigs(){return Jt({configs:this.configs.map(t=>t.config),cardStateCustomizer:Fe(this.cardStateCustomizer),limits:Fe(this.deckLimits),newCardsIgnoreReviewLimit:Fe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Fe(this.applyAllParentLimits),fsrs:Fe(this.fsrs),fsrsReschedule:Fe(this.fsrsReschedule),currentConfig:Fe(this.currentConfig)})}async isModified(){const t=await this.originalConfigsPromise,a=this.getAllConfigs();return!Hu(t,a,(e,s)=>{if(typeof e=="number"&&typeof s=="number")return Math.fround(e)===Math.fround(s)})}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function Wu(r){if(!r.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(r))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function ju(){return new wn({})}class $t{constructor(t,a,e,s,i){me(this,"title");me(this,"value");me(this,"setter");me(this,"disabledValue");me(this,"startValue");me(this,"initialValue");this.title=t,this.value=this.initialValue=a,this.setter=e,this.disabledValue=s,this.startValue=i}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var a,e;this.value=(e=(a=this.value)!=null?a:this.startValue)!=null?e:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}async function Ar(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await jt()}function tr(r){return r.fsrsParams6?r.fsrsParams6:r.fsrsParams5?r.fsrsParams5:r.fsrsParams4}const qu=async({params:r})=>{const t=Number(r.deckId),a=BigInt(t),e=await _n({did:a});return{state:new Gu(BigInt(a),e)}},Mf=Object.freeze(Object.defineProperty({__proto__:null,load:qu},Symbol.toStringTag,{value:"Module"}));_s("svelte",Gn);_s("svelte/store",uu);function Uu(r,t){_e(t,!1);const a=De(),e=()=>$e(d,"$components",a),s=()=>$e(l,"$auxData",a);let i=V(t,"state",8);const d=i().addonComponents,l=i().currentAuxData;ke();var o=Je(),$=re(o);{var y=p=>{rt(p,{title:"Add-ons",children:(h,O)=>{var P=Je(),c=re(P);qt(c,1,e,ar,(b,m)=>{var D=Je(),L=re(D);Cr(L,()=>n(m).component,(E,z)=>{z(E,ys(()=>n(m),{get data(){return It(),s()},set data(W){gt(l,W)},$$legacy:!0}))}),f(b,D)}),f(h,P)},$$slots:{default:!0}})};Re($,p=>{e().length&&p(y)})}f(r,o),Pe()}function $r(r,t){let a,e;if(t instanceof Element){if(a=t,e=Array.prototype.indexOf.call(r,a),e<0)return null}else if(typeof t=="string"){const s=r.namedItem(t);if(!s||(a=s,e=Array.prototype.indexOf.call(r,a),e<0))return null}else if(t<0){e=r.length+t;const s=r.item(e);if(!s)return null;a=s}else{e=t;const s=r.item(e);if(!s)return null;a=s}return[a,e]}class Qu{constructor(t){me(this,"parent");this.parent=t}insertElement(t,a){const e=$r(this.parent.children,a);if(!e)return-1;const[s,i]=e;return this.parent.insertBefore(t,s[0]),i}appendElement(t,a){var l;const e=$r(this.parent.children,a);if(!e)return-1;const[s,i]=e,d=(l=s.nextElementSibling)!=null?l:null;return this.parent.insertBefore(t,d),i+1}updateElement(t,a){const e=$r(this.parent.children,a);return e?(t(...e),!0):!1}}function Yu(r){return new Qu(r)}function Ku(r){return r.nodeType===Node.ELEMENT_NODE}function Xu(r){function t(e){Nn(r,e)}return[{get(){return _r(r)},available(){return Vn(r)}},t]}function Zu(r,t,a,e){const s=He([]);s.subscribe(t);function i(P,c){s.update(b=>(b.splice(P,0,c),b))}const[d,l]=wr(),o=d.then(Yu),$=He([]);async function y(P,c){const[b,m]=wr(),D=await o,L=r();function E(_){return!P.id||_.id===P.id}async function z(_,T){for(const k of _)for(const w of k.addedNodes){if(!Ku(w)||!E(w))continue;const F=c(w,D);return F>=0&&i(F,L),m(void 0),T.disconnect()}}new MutationObserver(z).observe(D.parent,{childList:!0});const H={component:P,hostProps:L};return $.update(_=>(_.push(H),_)),await b,{destroy(){$.update(_=>(bl(_,H),_))}}}async function p(P,c){return(await o).updateElement((m,D)=>{s.update(L=>(L[D]=P(L[D]),L))},c)}const h=e({addComponent:y,updateProps:p});function O(){const P=r();return s.update(c=>(c.push(P),c)),P}return a({getProps:O}),{dynamicSlotted:$,resolveSlotContainer:l,slotsInterface:h}}function Ju(){return{detach:He(!1)}}function ec({addComponent:r,updateProps:t}){function a(l,o=0){return r(l,($,y)=>y.insertElement($,o))}function e(l,o=-1){return r(l,($,y)=>y.appendElement($,o))}function s(l){return t(o=>(o.detach.set(!1),o),l)}function i(l){return t(o=>(o.detach.set(!0),o),l)}function d(l){return t(o=>(o.detach.update($=>!$),o),l)}return{insert:a,append:e,show:s,hide:i,toggle:d}}const tc=Symbol("dynamicSlotting"),[gs,rc]=Xu(tc);var sc=K('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function at(r,t){_e(t,!1);const a=De(),e=()=>$e(h,"$dynamicSlotted",a);function s(m){return m}let i=V(t,"slotHost",8),d=V(t,"createProps",8,Ju),l=V(t,"updatePropsList",8,s),o=V(t,"setSlotHostContext",8,rc),$=V(t,"createInterface",8,ec);const{slotsInterface:y,resolveSlotContainer:p,dynamicSlotted:h}=Zu(d(),l(),o(),$());let O=V(t,"api",8);Object.assign(O(),y),ke();var P=sc(),c=B(P);pt(c,t,"default",{});var b=g(c,2);qt(b,1,e,({component:m,hostProps:D})=>m.id,(m,D)=>{let L=()=>n(D).component,E=()=>n(D).hostProps;var z=Je(),W=re(z);Cr(W,i,(H,_)=>{_(H,{get id(){return L().id},get hostProps(){return E()},children:(T,k)=>{var w=Je(),u=re(w);Cr(u,()=>L().component,(F,M)=>{M(F,ys(()=>L().props))}),f(T,w)},$$slots:{default:!0}})}),f(m,z)}),R(P),_l(P,m=>p==null?void 0:p(m)),f(r,P),Pe()}var nc=K('<div class="item svelte-u5rx4p"><!></div>');function Y(r,t){var y;_e(t,!1);const a=De(),e=()=>$e(d,"$detach",a);let s=V(t,"id",8,void 0),i=V(t,"hostProps",8,void 0);gs.available()||console.log("Item: should always have a slotHostContext");const{detach:d}=(y=i())!=null?y:gs.get().getProps();ke();var l=nc(),o=B(l);{var $=p=>{var h=Je(),O=re(h);pt(O,t,"default",{}),f(p,h)};Re(o,p=>{e()||p($)})}R(l),S(()=>Ze(l,"id",s())),f(r,l),Pe()}var ac=K(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function Dt(r,t){_e(t,!1);let a=V(t,"title",8);ke(),J();var e=ac(),s=re(e),i=g(s);S(()=>Ze(i,"title",hr()));var d=B(i);sr(d,{icon:xl}),R(i),S(()=>{var l;return N(s,`${(l=a())!=null?l:""} `)}),f(r,e),Pe()}var oc=K('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),ic=K('<div class="m-2"><!></div>');function lc(r,t){let a=V(t,"value",12),e=V(t,"title",8);var s=ic(),i=B(s);wt(i,{children:(d,l)=>{var o=oc(),$=B(o),y=B($);Dt(y,{get title(){return e()}}),R($);var p=g($,2),h=B(p);Cs(h),R(p),R(o),Yt(h,a),f(d,o)},$$slots:{default:!0,revert:(d,l)=>{Qt(d,{slot:"revert",defaultValue:"",get value(){return a()},set value(o){a(o)},$$legacy:!0})}}}),R(s),f(r,s)}var uc=K('<span class="invisible svelte-xwrhci"> </span>'),cc=K('<span class="suffix svelte-xwrhci"></span>'),dc=K('<div class="spinner decrement svelte-xwrhci" tabindex="-1" role="button"><!></div> <div class="spinner increment svelte-xwrhci" tabindex="-1" role="button"><!></div>',1),fc=K('<div class="spin-box svelte-xwrhci"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-xwrhci"> <!> <!></div>');function Qs(r,t){_e(t,!1);const a=I();let e=V(t,"value",12),s=V(t,"step",8,1),i=V(t,"min",8,1),d=V(t,"max",8,9999),l=V(t,"percentage",8,!1),o=I(),$=I(!1),y=I();function p(x){Number.isNaN(x)||e(Math.min(d(),Math.max(i(),x))),jt().then(()=>{Gt(o,n(o).value=n(O)),L(n(O))})}function h(x){if(Math.floor(x)===x)return 0;const q=x.toString().split(".")[1].length||0,G=l()?q-2:q;return Math.max(0,G)}let O=I();function P(){p(parseFloat(this.value)/n(y))}function c(x){n($)&&(p(e()+(x.deltaY<0?s():-s())),x.preventDefault())}function b(x){p(e()+x),n(W)&&setTimeout(()=>b(x),H)}const m=[1500,1250,1e3,750,500,250];async function D(x){v(W,!0),H=128,v(_,setTimeout(x,250));for(const q of m)H=await new Promise(G=>setTimeout(()=>G(n(W)?H/2:128),q))}function L(x){v(z,Un({pct:x}).replaceAll("%","-%-").split("-"))}function E(){L(n(o).value)}let z=I(),W=I(!1),H,_=I();oe(()=>Ke(l()),()=>{v(y,l()?100:1)}),oe(()=>(Ke(e()),n(y),Ke(s())),()=>{v(O,(e()*n(y)).toFixed(h(s())))}),oe(()=>n(O),()=>{L(n(O))}),oe(()=>(Ke(l()),n(z)),()=>{v(a,l()&&!n(z)[0]?"2.2ch":void 0)}),Ge(),ke();var T=fc(),k=B(T);ft(k),Wt(k,x=>v(o,x),()=>n(o));var w=g(k,2);{var u=x=>{var q=cc();qt(q,5,()=>n(z),ar,(G,te)=>{var X=Je(),U=re(X);{var de=ce=>{var be=Q("%");f(ce,be)},ye=ce=>{var be=uc(),pe=B(be,!0);R(be),S(()=>N(pe,n(te))),f(ce,be)};Re(U,ce=>{n(te)=="%"?ce(de):ce(ye,!1)})}f(G,X)}),R(q),f(x,q)};Re(w,x=>{l()&&x(u)})}var F=g(w,2);{var M=x=>{var q=dc(),G=re(q);S(()=>Ze(G,"title",jn()));var te=B(G);ns(te,{children:(de,ye)=>{sr(de,{icon:Bs})},$$slots:{default:!0}}),R(G);var X=g(G,2);S(()=>Ze(X,"title",qn()));var U=B(X);ns(U,{children:(de,ye)=>{sr(de,{icon:Sl})},$$slots:{default:!0}}),R(X),S(()=>{mt(G,"active",e()>i()),mt(X,"active",e()<d())}),xe("click",G,()=>{n(o).focus(),e()>i()&&b(-s())}),xe("mousedown",G,()=>D(()=>{e()>i()&&b(-s())})),xe("mouseup",G,()=>{clearTimeout(n(_)),v(W,!1)}),xe("click",X,()=>{n(o).focus(),e()<d()&&b(s())}),xe("mousedown",X,()=>D(()=>{e()<d()&&b(s())})),xe("mouseup",X,()=>{clearTimeout(n(_)),v(W,!1)}),f(x,q)};Re(F,x=>{Ol()&&x(M)})}R(T),S(()=>{Ze(k,"min",i()*n(y)),Ze(k,"max",d()*n(y)),Ze(k,"step",s()*n(y)),br(k,n(O)),vl(k,"padding-left",n(a))}),xe("blur",k,P),xe("input",k,E),xe("focusin",k,()=>v($,!0)),xe("focusout",k,()=>v($,!1)),xe("wheel",T,c),f(r,T),Pe()}var gc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),vc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function ot(r,t){let a=V(t,"value",12),e=V(t,"defaultValue",8),s=V(t,"min",8,0),i=V(t,"max",8,9999),d=V(t,"step",8,.01),l=V(t,"percentage",8,!1);var o=vc(),$=re(o);ze($,()=>({"--cols":13})),Me($.lastChild,{children:(y,p)=>{var h=gc(),O=re(h);ze(O,()=>({"--col-size":7})),ht(O.lastChild,{breakpoint:"xs",children:(c,b)=>{var m=Je(),D=re(m);pt(D,t,"default",{}),f(c,m)},$$slots:{default:!0}}),R(O);var P=g(O,2);ze(P,()=>({"--col-size":6})),ht(P.lastChild,{breakpoint:"xs",children:(c,b)=>{wt(c,{children:(m,D)=>{Qs(m,{get min(){return s()},get max(){return i()},get step(){return d()},get percentage(){return l()},get value(){return a()},set value(L){a(L)},$$legacy:!0})},$$slots:{default:!0,revert:(m,D)=>{Qt(m,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(L){a(L)},$$legacy:!0})}}})},$$slots:{default:!0}}),R(P),f(y,h)},$$slots:{default:!0}}),R($),f(r,o)}var $c=K("<!> <!>",1),mc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),pc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Ye(r,t){let a=V(t,"value",12),e=V(t,"defaultValue",8),s=V(t,"min",8,0),i=V(t,"max",8,9999);var d=pc(),l=re(d);ze(l,()=>({"--cols":13})),Me(l.lastChild,{children:(o,$)=>{var y=mc(),p=re(y);ze(p,()=>({"--col-size":7})),ht(p.lastChild,{breakpoint:"xs",children:(O,P)=>{var c=Je(),b=re(c);pt(b,t,"default",{}),f(O,c)},$$slots:{default:!0}}),R(p);var h=g(p,2);ze(h,()=>({"--col-size":6})),ht(h.lastChild,{breakpoint:"xs",children:(O,P)=>{Me(O,{class:"flex-grow-1",children:(c,b)=>{var m=$c(),D=re(m);pt(D,t,"tabs",{});var L=g(D,2);wt(L,{children:(E,z)=>{Qs(E,{get min(){return s()},get max(){return i()},get value(){return a()},set value(W){a(W)},$$legacy:!0})},$$slots:{default:!0,revert:(E,z)=>{Qt(E,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(W){a(W)},$$legacy:!0})}}}),f(c,m)},$$slots:{default:!0}})},$$slots:{default:!0}}),R(h),f(o,y)},$$slots:{default:!0}}),R(l),f(r,d)}var hc=K('<input type="date" class="svelte-1xsggh9">'),yc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Cc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),wc=K("<div><!></div>");function _c(r,t){_e(t,!1);let a=V(t,"date",12);oe(()=>Ke(a()),()=>{a(a()?a():"1970-01-01")}),Ge();var e=wc(),s=B(e);wt(s,{children:(i,d)=>{var l=Cc(),o=re(l);ze(o,()=>({"--cols":13})),Me(o.lastChild,{children:($,y)=>{var p=yc(),h=re(p);ze(h,()=>({"--col-size":7})),ht(h.lastChild,{breakpoint:"xs",children:(P,c)=>{var b=Je(),m=re(b);pt(m,t,"default",{}),f(P,b)},$$slots:{default:!0}}),R(h);var O=g(h,2);ze(O,()=>({"--col-size":6})),ht(O.lastChild,{breakpoint:"xs",children:(P,c)=>{var b=hc();ft(b),Yt(b,a),f(P,b)},$$slots:{default:!0}}),R(O),f($,p)},$$slots:{default:!0}}),R(o),f(i,l)},$$slots:{default:!0}}),R(e),f(r,e),Pe()}var Pc=K("<!> <!> <!> <!> <!>",1),kc=K("<!> <!> <!>",1),bc=K("<!> <!> <!> <!>",1);function xc(r,t){_e(t,!1);const a=De(),e=()=>$e(p,"$config",a),s=()=>$e(P,"$fsrs",a),i=()=>$e(O,"$cardStateCustomizer",a),d=I(),l=I(),o=I();let $=V(t,"state",8),y=V(t,"api",8);const p=$().currentConfig,h=$().defaults,O=$().cardStateCustomizer,P=$().fsrs,c={maximumInterval:{title:Ps(),help:Qn(),url:we.DeckOptions.maximumInterval},historicalRetention:{title:Wr(),help:Yn(),sched:Qe.FSRS},ignoreRevlogsBeforeMs:{title:jr(),help:Kn(),sched:Qe.FSRS},startingEase:{title:Xn(),help:Zn(),url:we.DeckOptions.startingEase,sched:Qe.SM2},easyBonus:{title:Jn(),help:ea(),url:we.DeckOptions.easyBonus,sched:Qe.SM2},intervalModifier:{title:ta(),help:ra(),url:we.DeckOptions.intervalModifier,sched:Qe.SM2},hardInterval:{title:sa(),help:na(),url:we.DeckOptions.hardInterval,sched:Qe.SM2},newInterval:{title:aa(),help:oa(),url:we.DeckOptions.newInterval,sched:Qe.SM2},customScheduling:{title:ia(),help:la(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling"}},b=Object.values(c);let m=I(null),D="";function L(u){D!=u&&(z&&u&&u!="1970-01-01"?(D=u,Pn({search:e().paramSearch||`preset:"${$().getCurrentNameForSearch()}" -is:suspended`,ignoreRevlogsBeforeDate:u}).then(F=>{v(m,F)})):v(m,null),z=!0)}let E=I(void 0),z=!0;const W=1e3;let H=I("alert-warning"),_=I(),T=I();function k(u){n(_).show(),n(T).to(u)}oe(()=>e(),()=>{v(d,e().maximumReviewInterval<50?"alert-danger":"alert-warning")}),oe(()=>(e(),lt),()=>{v(l,e().maximumReviewInterval<180?ua():"")}),oe(()=>(n(E),e()),()=>{clearTimeout(n(E)),v(E,setTimeout(()=>{L(e().ignoreRevlogsBeforeDate)},W))}),oe(()=>n(m),()=>{n(m)&&(Number(n(m).included)/Number(n(m).total)<.1?v(H,"alert-danger"):n(m).included!=n(m).total?v(H,"alert-warning"):v(H,"alert-info"))}),oe(()=>(n(m),lt),()=>{v(o,n(m)?ca({included:n(m).included.toString(),totalCards:n(m).total.toString()}):"")}),Ge(),ke();var w=ve(()=>qr());rt(r,{get title(){return n(w)},children:(u,F)=>{at(u,{slotHost:Y,get api(){return y()},children:(M,x)=>{var q=bc(),G=re(q);Y(G,{children:(ce,be)=>{Ye(ce,{get defaultValue(){return h.maximumReviewInterval},min:1,max:365*100,get value(){return e().maximumReviewInterval},set value(pe){Z(p,C(e).maximumReviewInterval=pe,C(e))},children:(pe,ue)=>{ee(pe,{$$events:{click:()=>k(Object.keys(c).indexOf("maximumInterval"))},children:(fe,Oe)=>{J();var Ae=Q();S(()=>N(Ae,c.maximumInterval.title)),f(fe,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var te=g(G,2);Y(te,{children:(ce,be)=>{Be(ce,{get warning(){return n(l)},get className(){return n(d)}})},$$slots:{default:!0}});var X=g(te,2);{var U=ce=>{var be=Pc(),pe=re(be);Y(pe,{children:(he,Ee)=>{ot(he,{get defaultValue(){return h.initialEase},min:1.31,max:5,get value(){return e().initialEase},set value(se){Z(p,C(e).initialEase=se,C(e))},children:(se,Ne)=>{ee(se,{$$events:{click:()=>k(Object.keys(c).indexOf("startingEase"))},children:(Ce,Xe)=>{J();var Se=Q();S(()=>N(Se,c.startingEase.title)),f(Ce,Se)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ue=g(pe,2);Y(ue,{children:(he,Ee)=>{ot(he,{get defaultValue(){return h.easyMultiplier},min:1,max:5,get value(){return e().easyMultiplier},set value(se){Z(p,C(e).easyMultiplier=se,C(e))},children:(se,Ne)=>{ee(se,{$$events:{click:()=>k(Object.keys(c).indexOf("easyBonus"))},children:(Ce,Xe)=>{J();var Se=Q();S(()=>N(Se,c.easyBonus.title)),f(Ce,Se)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var fe=g(ue,2);Y(fe,{children:(he,Ee)=>{ot(he,{get defaultValue(){return h.intervalMultiplier},min:.5,max:2,get value(){return e().intervalMultiplier},set value(se){Z(p,C(e).intervalMultiplier=se,C(e))},children:(se,Ne)=>{ee(se,{$$events:{click:()=>k(Object.keys(c).indexOf("intervalModifier"))},children:(Ce,Xe)=>{J();var Se=Q();S(()=>N(Se,c.intervalModifier.title)),f(Ce,Se)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Oe=g(fe,2);Y(Oe,{children:(he,Ee)=>{ot(he,{get defaultValue(){return h.hardMultiplier},min:.5,max:1.3,get value(){return e().hardMultiplier},set value(se){Z(p,C(e).hardMultiplier=se,C(e))},children:(se,Ne)=>{ee(se,{$$events:{click:()=>k(Object.keys(c).indexOf("hardInterval"))},children:(Ce,Xe)=>{J();var Se=Q();S(()=>N(Se,c.hardInterval.title)),f(Ce,Se)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Ae=g(Oe,2);Y(Ae,{children:(he,Ee)=>{ot(he,{get defaultValue(){return h.lapseMultiplier},max:1,get value(){return e().lapseMultiplier},set value(se){Z(p,C(e).lapseMultiplier=se,C(e))},children:(se,Ne)=>{ee(se,{$$events:{click:()=>k(Object.keys(c).indexOf("newInterval"))},children:(Ce,Xe)=>{J();var Se=Q();S(()=>N(Se,c.newInterval.title)),f(Ce,Se)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(ce,be)},de=ce=>{var be=kc(),pe=re(be);ot(pe,{get defaultValue(){return h.historicalRetention},min:.5,max:1,percentage:!0,get value(){return e().historicalRetention},set value(Oe){Z(p,C(e).historicalRetention=Oe,C(e))},children:(Oe,Ae)=>{ee(Oe,{$$events:{click:()=>k(Object.keys(c).indexOf("historicalRetention"))},children:(he,Ee)=>{J();var se=Q();S(()=>N(se,Wr())),f(he,se)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ue=g(pe,2);Y(ue,{children:(Oe,Ae)=>{_c(Oe,{get date(){return e().ignoreRevlogsBeforeDate},set date(he){Z(p,C(e).ignoreRevlogsBeforeDate=he,C(e))},children:(he,Ee)=>{ee(he,{$$events:{click:()=>k(Object.keys(c).indexOf("ignoreRevlogsBeforeMs"))},children:(se,Ne)=>{J();var Ce=Q();S(()=>N(Ce,jr())),f(se,Ce)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var fe=g(ue,2);Y(fe,{children:(Oe,Ae)=>{Be(Oe,{get warning(){return n(o)},get className(){return n(H)}})},$$slots:{default:!0}}),f(ce,be)};Re(X,ce=>{s()?ce(de,!1):ce(U)})}var ye=g(X,2);Y(ye,{children:(ce,be)=>{lc(ce,{get title(){return c.customScheduling.title},get value(){return It(),i()},set value(pe){gt(O,pe)},$$events:{click:()=>k(Object.keys(c).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),f(M,q)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(u,F)=>{var M=ve(()=>qr());ut(u,{get title(){return n(M)},get url(){return we.DeckOptions.advanced},slot:"tooltip",get fsrs(){return s()},helpSections:b,$$events:{mount:x=>{v(_,x.detail.modal),v(T,x.detail.carousel)}}})}}}),Pe()}var Sc=K("<!> <!>",1);function Oc(r,t){_e(t,!1);const a=De(),e=()=>$e(d,"$config",a);let s=V(t,"state",8),i=V(t,"api",8);const d=s().currentConfig,l=s().defaults,o={disableAutoplay:{title:da(),help:fa()},skipQuestionWhenReplaying:{title:ga(),help:va()}},$=Object.values(o);let y=I(),p=I();function h(P){n(y).show(),n(p).to(P)}ke();var O=ve(()=>Ur());rt(r,{get title(){return n(O)},children:(P,c)=>{at(P,{slotHost:Y,get api(){return i()},children:(b,m)=>{var D=Sc(),L=re(D);Y(L,{children:(z,W)=>{je(z,{get defaultValue(){return l.disableAutoplay},get value(){return e().disableAutoplay},set value(H){Z(d,C(e).disableAutoplay=H,C(e))},children:(H,_)=>{ee(H,{$$events:{click:()=>h(Object.keys(o).indexOf("disableAutoplay"))},children:(T,k)=>{J();var w=Q();S(()=>N(w,o.disableAutoplay.title)),f(T,w)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=g(L,2);Y(E,{children:(z,W)=>{je(z,{get defaultValue(){return l.skipQuestionWhenReplayingAnswer},get value(){return e().skipQuestionWhenReplayingAnswer},set value(H){Z(d,C(e).skipQuestionWhenReplayingAnswer=H,C(e))},children:(H,_)=>{ee(H,{$$events:{click:()=>h(Object.keys(o).indexOf("skipQuestionWhenReplaying"))},children:(T,k)=>{J();var w=Q();S(()=>N(w,o.skipQuestionWhenReplaying.title)),f(T,w)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(b,D)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(P,c)=>{var b=ve(()=>Ur());ut(P,{get title(){return n(b)},get url(){return we.DeckOptions.audio},slot:"tooltip",helpSections:$,$$events:{mount:m=>{v(y,m.detail.modal),v(p,m.detail.carousel)}}})}}}),Pe()}function Rc(){return[{label:$a(),value:dt.DECK},{label:ma(),value:dt.DECK_THEN_RANDOM_NOTES},{label:pa(),value:dt.LOWEST_POSITION},{label:ha(),value:dt.HIGHEST_POSITION},{label:ya(),value:dt.RANDOM_NOTES},{label:Ca(),value:dt.RANDOM_CARDS}]}function Ac(){return[{label:wa(),value:st.TEMPLATE},{label:_a(),value:st.NO_SORT},{label:Pa(),value:st.TEMPLATE_THEN_RANDOM},{label:ka(),value:st.RANDOM_NOTE_THEN_TEMPLATE},{label:ks(),value:st.RANDOM_CARD}]}function Ys(r){return[{label:ba(),value:tt.DAY},{label:xa(),value:tt.DAY_THEN_DECK},{label:Sa(),value:tt.DECK_THEN_DAY},{label:Oa(),value:tt.INTERVALS_ASCENDING},{label:Ra(),value:tt.INTERVALS_DESCENDING},...Ec(r),{label:Aa(),value:tt.RETRIEVABILITY_ASCENDING},{label:Ia(),value:tt.RETRIEVABILITY_DESCENDING},{label:ks(),value:tt.RANDOM},{label:Da(),value:tt.ADDED},{label:Ta(),value:tt.REVERSE_ADDED}]}function vs(){return[{label:La(),value:fr.MIX_WITH_REVIEWS},{label:Ea(),value:fr.AFTER_REVIEWS},{label:Ma(),value:fr.BEFORE_REVIEWS}]}function Ic(){return[{label:Na(),value:Rt.SUSPEND},{label:Va(),value:Rt.TAG_ONLY}]}function Dc(){return[{label:Fa(),value:pr.DUE},{label:Ha(),value:pr.RANDOM}]}function Tc(){return[{label:Ba(),value:Bt.BURY_CARD},{label:za(),value:Bt.ANSWER_AGAIN},{label:Ga(),value:Bt.ANSWER_GOOD},{label:Wa(),value:Bt.ANSWER_HARD},{label:ja(),value:Bt.SHOW_REMINDER}]}function Lc(){return[{label:qa(),value:Br.SHOW_ANSWER},{label:Ua(),value:Br.SHOW_REMINDER}]}function Ec(r){const t=[{label:r?Qa():Ya(),value:tt.EASE_ASCENDING},{label:r?Ka():Xa(),value:tt.EASE_DESCENDING}];return r&&t.reverse(),t}var Mc=K("<!> <!> <!> <!> <!>",1);function Nc(r,t){_e(t,!1);const a=De(),e=()=>$e(d,"$config",a);let s=V(t,"state",8),i=V(t,"api",8);const d=s().currentConfig,l=s().defaults,o={secondsToShowQuestion:{title:Za(),help:Ja()},secondsToShowAnswer:{title:eo(),help:to()},waitForAudio:{title:ro(),help:so()},questionAction:{title:no(),help:ao()},answerAction:{title:oo(),help:io()}},$=Object.values(o);let y=I(),p=I();function h(P){n(y).show(),n(p).to(P)}ke();var O=ve(()=>Qr());rt(r,{get title(){return n(O)},children:(P,c)=>{at(P,{slotHost:Y,get api(){return i()},children:(b,m)=>{var D=Mc(),L=re(D);Y(L,{children:(_,T)=>{ot(_,{get defaultValue(){return l.secondsToShowQuestion},step:.1,get value(){return e().secondsToShowQuestion},set value(k){Z(d,C(e).secondsToShowQuestion=k,C(e))},children:(k,w)=>{ee(k,{$$events:{click:()=>h(Object.keys(o).indexOf("secondsToShowQuestion"))},children:(u,F)=>{J();var M=Q();S(()=>N(M,o.secondsToShowQuestion.title)),f(u,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=g(L,2);Y(E,{children:(_,T)=>{ot(_,{get defaultValue(){return l.secondsToShowAnswer},step:.1,get value(){return e().secondsToShowAnswer},set value(k){Z(d,C(e).secondsToShowAnswer=k,C(e))},children:(k,w)=>{ee(k,{$$events:{click:()=>h(Object.keys(o).indexOf("secondsToShowAnswer"))},children:(u,F)=>{J();var M=Q();S(()=>N(M,o.secondsToShowAnswer.title)),f(u,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var z=g(E,2);Y(z,{children:(_,T)=>{je(_,{get defaultValue(){return l.waitForAudio},get value(){return e().waitForAudio},set value(k){Z(d,C(e).waitForAudio=k,C(e))},children:(k,w)=>{ee(k,{$$events:{click:()=>h(Object.keys(o).indexOf("waitForAudio"))},children:(u,F)=>{J();var M=Q();S(()=>N(M,o.waitForAudio.title)),f(u,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=g(z,2);Y(W,{children:(_,T)=>{var k=ve(Lc);it(_,{get defaultValue(){return l.questionAction},get choices(){return n(k)},get value(){return e().questionAction},set value(w){Z(d,C(e).questionAction=w,C(e))},children:(w,u)=>{ee(w,{$$events:{click:()=>h(Object.keys(o).indexOf("questionAction"))},children:(F,M)=>{J();var x=Q();S(()=>N(x,o.questionAction.title)),f(F,x)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=g(W,2);Y(H,{children:(_,T)=>{var k=ve(Tc);it(_,{get defaultValue(){return l.answerAction},get choices(){return n(k)},get value(){return e().answerAction},set value(w){Z(d,C(e).answerAction=w,C(e))},children:(w,u)=>{ee(w,{$$events:{click:()=>h(Object.keys(o).indexOf("answerAction"))},children:(F,M)=>{J();var x=Q();S(()=>N(x,o.answerAction.title)),f(F,x)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(b,D)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(P,c)=>{var b=ve(()=>Qr());ut(P,{get title(){return n(b)},get url(){return we.DeckOptions.autoAdvance},slot:"tooltip",helpSections:$,$$events:{mount:m=>{v(y,m.detail.modal),v(p,m.detail.carousel)}}})}}}),Pe()}var Vc=K("<!> <!> <!>",1);function Fc(r,t){_e(t,!1);const a=De(),e=()=>$e(d,"$config",a);let s=V(t,"state",8),i=V(t,"api",8);const d=s().currentConfig,l=s().defaults,o=`

`+lo(),$={buryNewSiblings:{title:uo(),help:co()+o},buryReviewSiblings:{title:fo(),help:go()+o},buryInterdayLearningSiblings:{title:vo(),help:$o()+o}},y=Object.values($);let p=I(),h=I();function O(c){n(p).show(),n(h).to(c)}ke();var P=ve(()=>Yr());rt(r,{get title(){return n(P)},children:(c,b)=>{at(c,{slotHost:Y,get api(){return i()},children:(m,D)=>{var L=Vc(),E=re(L);Y(E,{children:(H,_)=>{je(H,{get defaultValue(){return l.buryNew},get value(){return e().buryNew},set value(T){Z(d,C(e).buryNew=T,C(e))},children:(T,k)=>{ee(T,{$$events:{click:()=>O(Object.keys($).indexOf("buryNewSiblings"))},children:(w,u)=>{J();var F=Q();S(()=>N(F,$.buryNewSiblings.title)),f(w,F)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var z=g(E,2);Y(z,{children:(H,_)=>{je(H,{get defaultValue(){return l.buryReviews},get value(){return e().buryReviews},set value(T){Z(d,C(e).buryReviews=T,C(e))},children:(T,k)=>{ee(T,{$$events:{click:()=>O(Object.keys($).indexOf("buryReviewSiblings"))},children:(w,u)=>{J();var F=Q();S(()=>N(F,$.buryReviewSiblings.title)),f(w,F)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=g(z,2);Y(W,{children:(H,_)=>{je(H,{get defaultValue(){return l.buryInterdayLearning},get value(){return e().buryInterdayLearning},set value(T){Z(d,C(e).buryInterdayLearning=T,C(e))},children:(T,k)=>{ee(T,{$$events:{click:()=>O(Object.keys($).indexOf("buryInterdayLearningSiblings"))},children:(w,u)=>{J();var F=Q();S(()=>N(F,$.buryInterdayLearningSiblings.title)),f(w,F)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(m,L)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(c,b)=>{var m=ve(()=>Yr());ut(c,{get title(){return n(m)},get url(){return we.Studying.siblingsAndBurying},slot:"tooltip",helpSections:y,$$events:{mount:D=>{v(p,D.detail.modal),v(h,D.detail.carousel)}}})}}}),Pe()}function Hc(){}var Bc=K('<hr class="dropdown-divider">');function zc(r){var t=Bc();f(r,t)}var Gc=K('<div class="save svelte-ymxw35"> </div>'),Wc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),jc=K("<!> <!> <!> <!> <!> <!>",1),qc=K('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function Uc(r,t){_e(t,!1);const a=window.getComputedStyle(document.body).direction=="rtl",e=ws();let s=V(t,"state",8);async function i(){if(await jt(),s().defaultConfigSelected()){alert(mo());return}const P=(s().removalWilLForceFullSync()?po()+" ":"")+ho({name:s().getCurrentName()});if(confirm(Tn(P)))try{s().removeCurrentConfig(),e("remove")}catch(c){alert(c)}}async function d(P){await Ar(),s().save(P)}const l="Control+Enter";let o=I(!1);ke();var $=qc(),y=B($),p=ve(()=>Al(l));ze(y,()=>({"--border-left-radius":a?"0":"var(--border-radius)","--border-right-radius":a?"var(--border-radius)":"0"})),Dl(y.lastChild,{primary:!0,get tooltip(){return n(p)},$$events:{click:()=>d(rr.NORMAL)},children:(P,c)=>{var b=Gc(),m=B(b,!0);S(()=>N(m,yo())),R(b),f(P,b)},$$slots:{default:!0}}),R(y);var h=g(y,2);Rl(h,{keyCombination:l,$$events:{action:()=>d(rr.NORMAL)}});var O=g(h,2);Pl(O,{get show(){return n(o)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>v(o,!1)},$$slots:{reference:(P,c)=>{var b=Wc(),m=re(b);ze(m,()=>({"--border-right-radius":a?"0":"var(--border-radius)","--border-left-radius":a?"var(--border-radius)":"0"})),Ll(m.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>v(o,!n(o))},children:(D,L)=>{sr(D,{icon:Bs})},$$slots:{default:!0}}),R(m),f(P,b)},floating:(P,c)=>{kl(P,{slot:"floating",children:(b,m)=>{var D=jc(),L=re(D);zt(L,{$$events:{click:()=>e("add")},children:(T,k)=>{J();var w=Q();S(()=>N(w,bs())),f(T,w)},$$slots:{default:!0}});var E=g(L,2);zt(E,{$$events:{click:()=>e("clone")},children:(T,k)=>{J();var w=Q();S(()=>N(w,xs())),f(T,w)},$$slots:{default:!0}});var z=g(E,2);zt(z,{$$events:{click:()=>e("rename")},children:(T,k)=>{J();var w=Q();S(()=>N(w,Ss())),f(T,w)},$$slots:{default:!0}});var W=g(z,2);zt(W,{$$events:{click:i},children:(T,k)=>{J();var w=Q();S(()=>N(w,Co())),f(T,w)},$$slots:{default:!0}});var H=g(W,2);zc(H);var _=g(H,2);zt(_,{$$events:{click:()=>d(rr.APPLY_TO_CHILDREN)},children:(T,k)=>{J();var w=Q();S(()=>N(w,wo())),f(T,w)},$$slots:{default:!0}}),f(b,D)},$$slots:{default:!0}})}}}),R($),f(r,$),Pe()}var Qc=K('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content svelte-18qg9px"><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" class="btn-close svelte-18qg9px" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text" class="form-control svelte-18qg9px"></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function Yc(r,t){_e(t,!1);const a=De(),e=()=>$e($l,"$pageTheme",a),s=I();let i=V(t,"title",8),d=V(t,"prompt",8),l=V(t,"initialValue",8,""),o=V(t,"onOk",8);const $=Math.random().toString(36).substring(2),y=_r(zs);let p=I(),h,O=I();function P(){o()(n(O).value),h.hide(),v(s,l())}function c(){h.hide(),v(s,l())}function b(){n(O).focus(),D(!0)}function m(){D(!1)}const{set:D,remove:L}=El(c);kr(()=>{n(p).addEventListener("shown.bs.modal",b),n(p).addEventListener("hidden.bs.modal",m),h=new ml(n(p),{keyboard:!1}),y.set($,h)}),Wn(()=>{L(),n(p).removeEventListener("shown.bs.modal",b),n(p).removeEventListener("hidden.bs.modal",m)}),oe(()=>Ke(l()),()=>{v(s,l())}),Ge(),ke();var E=Qc(),z=B(E),W=B(z),H=B(W),_=B(H),T=B(_,!0);R(_);var k=g(_,2);R(H);var w=g(H,2),u=B(w),F=B(u),M=B(F),x=B(M);R(M);var q=g(M,2);ft(q),Wt(q,U=>v(O,U),()=>n(O)),R(F),R(u),R(w);var G=g(w,2),te=B(G),X=g(te,2);return R(G),R(W),R(z),R(E),Wt(E,U=>v(p,U),()=>n(p)),S(()=>{var U;mt(W,"default-colors",e().isDark),N(T,i()),mt(k,"invert",e().isDark),N(x,`${(U=d())!=null?U:""}:`),mt(q,"nightMode",e().isDark)}),Yt(q,()=>n(s),U=>v(s,U)),xe("submit",u,Il(P)),xe("click",te,c),xe("click",X,P),f(r,E),We(t,"modalKey",$),Pe({modalKey:$})}var Kc=K('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),Xc=K('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Zc(r,t){_e(t,!1);const a=De(),e=()=>$e(l,"$configList",a),s=I(),i=I();let d=V(t,"state",8);const l=d().configList,o=ws(),$=()=>o("presetchange");function y(w){const u=_o({decks:w.useCount});return`${w.name} (${u})`}function p(w){d().setCurrentIndex(w.detail.value),$()}function h(w){const u=w.trim();u.length&&(d().addConfig(u),$())}function O(w){const u=w.trim();u.length&&(d().cloneConfig(u),$())}function P(w){d().setCurrentName(w)}const c=_r(zs);let b=I(),m=I(""),D=I(""),L=I(Hc);function E(){v(D,bs()),v(L,h),v(m,""),c.get(n(b)).show()}function z(){v(D,xs()),v(L,O),v(m,d().getCurrentName()),c.get(n(b)).show()}function W(){v(D,Ss()),v(L,P),v(m,d().getCurrentName()),c.get(n(b)).show()}oe(()=>e(),()=>{v(s,e().findIndex(w=>w.current))}),oe(()=>(e(),n(s)),()=>{v(i,y(e()[n(s)]))}),Ge(),ke();var H=Xc(),_=re(H),T=ve(()=>Po());Yc(_,{get title(){return n(D)},get prompt(){return n(T)},get initialValue(){return n(m)},get onOk(){return n(L)},get modalKey(){return n(b)},set modalKey(w){v(b,w)},$$legacy:!0});var k=g(_,2);ze(k,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),Tl(k.lastChild,{breakpoint:"sm",children:(w,u)=>{var F=Kc(),M=B(F);zn(M,{class:"flex-grow-1 mr1",get label(){return n(i)},get list(){return e()},parser:q=>({content:y(q),value:q.idx}),get value(){return n(s)},set value(q){v(s,q)},$$events:{change:p},$$legacy:!0});var x=g(M,2);Uc(x,{get state(){return d()},$$events:{add:E,clone:z,rename:W,remove:$}}),R(F),f(w,F)},$$slots:{default:!0}}),R(k),f(r,H),Pe()}var Jc=K('<li class="svelte-11xpnuy"><button class="svelte-11xpnuy"> </button></li>'),ed=K('<ul class="svelte-11xpnuy"></ul>');function $s(r,t){_e(t,!1);let a=V(t,"tabs",8),e=V(t,"value",12),s=I(i());function i(){const $=a().slice().reverse().findIndex(y=>y.value!==null);return $===-1?0:a().length-$-1}function d($){for(const[y,p]of a().entries())$===y?p.enable(e()):$>y?p.reset():p.disable()}const l=$=>()=>v(s,$);oe(()=>n(s),()=>{d(n(s))}),oe(()=>(Ke(a()),n(s)),()=>{var $;e(($=a()[n(s)].value)!=null?$:0)}),oe(()=>(Ke(a()),n(s),Ke(e())),()=>{a()[n(s)].setValue(e())}),Ge(),ke();var o=ed();qt(o,5,a,ar,($,y,p)=>{var h=Jc(),O=B(h),P=Fn(()=>l(p)),c=B(O,!0);R(O),R(h),S(()=>{mt(h,"active",n(s)===p),N(c,n(y).title)}),xe("click",O,function(...b){var m;(m=n(P))==null||m.apply(this,b)}),f($,h)}),R(o),f(r,o),Pe()}var td=K("<!> <!> <!> <!> <!>",1);function rd(r,t){var M,x,q,G,te,X;_e(t,!1);const a=De(),e=()=>$e(p,"$config",a),s=()=>$e(h,"$limits",a),i=()=>$e(P,"$newCardsIgnoreReviewLimit",a),d=()=>$e(c,"$applyAllParentLimits",a),l=I();let o=V(t,"state",8),$=V(t,"api",8);function y(){Gt(E,n(E)[0]=new $t(er(),e().newPerDay,U=>Z(p,C(e).newPerDay=U,C(e)),e().newPerDay,null)),Gt(z,n(z)[0]=new $t(er(),e().reviewsPerDay,U=>Z(p,C(e).reviewsPerDay=U,C(e)),e().reviewsPerDay,null))}const p=o().currentConfig,h=o().deckLimits,O=o().defaults,P=o().newCardsIgnoreReviewLimit,c=o().applyAllParentLimits,b=`

`+ko()+`

`+bo(),m=`

`+xo()+b,D=hr()+`

`+So(),L=hr()+`

`+Oo(),E=I([new $t(er(),e().newPerDay,U=>Z(p,C(e).newPerDay=U,C(e)),e().newPerDay,null),new $t(Kr(),(M=s().new)!=null?M:null,U=>Z(h,C(s).new=U!=null?U:void 0,C(s)),null,null),new $t(Xr(),s().newTodayActive&&(x=s().newToday)!=null?x:null,U=>Z(h,C(s).newToday=U!=null?U:void 0,C(s)),null,(q=s().newToday)!=null?q:null)]),z=I([new $t(er(),e().reviewsPerDay,U=>Z(p,C(e).reviewsPerDay=U,C(e)),e().reviewsPerDay,null),new $t(Kr(),(G=s().review)!=null?G:null,U=>Z(h,C(s).review=U!=null?U:void 0,C(s)),null,null),new $t(Xr(),s().reviewTodayActive&&(te=s().reviewToday)!=null?te:null,U=>Z(h,C(s).reviewToday=U!=null?U:void 0,C(s)),null,(X=s().reviewToday)!=null?X:null)]);let W=I(0),H=I(0);const _={newLimit:{title:Os(),help:Ro()+b,url:we.DeckOptions.newCardsday},reviewLimit:{title:Rs(),help:Ao()+m,url:we.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:As(),help:D,url:we.DeckOptions.newCardsday},applyAllParentLimits:{title:Io(),help:L,url:we.DeckOptions.newCardsday}},T=Object.values(_);let k=I(),w=I();function u(U){n(k).show(),n(w).to(U)}oe(()=>(n(W),n(H),lt),()=>{v(l,Math.min(9999,n(W)*10)>n(H)?Do({cards:n(W),expected:Math.min(9999,n(W)*10)}):"")}),Ge(),ke();var F=ve(()=>Zr());return rt(r,{get title(){return n(F)},children:(U,de)=>{at(U,{slotHost:Y,get api(){return $()},children:(ye,ce)=>{var be=td(),pe=re(be);Y(pe,{children:(he,Ee)=>{Ye(he,{get defaultValue(){return O.newPerDay},get value(){return n(W)},set value(se){v(W,se)},children:(se,Ne)=>{ee(se,{$$events:{click:()=>u(Object.keys(_).indexOf("newLimit"))},children:(Ce,Xe)=>{J();var Se=Q();S(()=>N(Se,_.newLimit.title)),f(Ce,Se)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(se,Ne)=>{$s(se,{slot:"tabs",get tabs(){return n(E)},get value(){return n(W)},set value(Ce){v(W,Ce)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var ue=g(pe,2);Y(ue,{children:(he,Ee)=>{Ye(he,{get defaultValue(){return O.reviewsPerDay},get value(){return n(H)},set value(se){v(H,se)},children:(se,Ne)=>{ee(se,{$$events:{click:()=>u(Object.keys(_).indexOf("reviewLimit"))},children:(Ce,Xe)=>{J();var Se=Q();S(()=>N(Se,_.reviewLimit.title)),f(Ce,Se)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(se,Ne)=>{$s(se,{slot:"tabs",get tabs(){return n(z)},get value(){return n(H)},set value(Ce){v(H,Ce)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var fe=g(ue,2);Y(fe,{children:(he,Ee)=>{Be(he,{get warning(){return n(l)}})},$$slots:{default:!0}});var Oe=g(fe,2);Y(Oe,{children:(he,Ee)=>{je(he,{defaultValue:!1,get value(){return It(),i()},set value(se){gt(P,se)},children:(se,Ne)=>{ee(se,{$$events:{click:()=>u(Object.keys(_).indexOf("newCardsIgnoreReviewLimit"))},children:(Ce,Xe)=>{Dt(Ce,{get title(){return _.newCardsIgnoreReviewLimit.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Ae=g(Oe,2);Y(Ae,{children:(he,Ee)=>{je(he,{defaultValue:!1,get value(){return It(),d()},set value(se){gt(c,se)},children:(se,Ne)=>{ee(se,{$$events:{click:()=>u(Object.keys(_).indexOf("applyAllParentLimits"))},children:(Ce,Xe)=>{Dt(Ce,{get title(){return _.applyAllParentLimits.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(ye,be)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(U,de)=>{var ye=ve(()=>Zr());ut(U,{get title(){return n(ye)},get url(){return we.DeckOptions.dailyLimits},slot:"tooltip",helpSections:T,$$events:{mount:ce=>{v(k,ce.detail.modal),v(w,ce.detail.carousel)}}})}}}),We(t,"onPresetChange",y),Pe({onPresetChange:y})}var sd=K("<!> <!> <!> <!> <!>",1);function nd(r,t){_e(t,!1);const a=De(),e=()=>$e(l,"$config",a),s=()=>$e($,"$fsrs",a);let i=V(t,"state",8),d=V(t,"api",8);const l=i().currentConfig,o=i().defaults,$=i().fsrs,y=`

`+To();let p=I([]);const h={newGatherPriority:{title:Lo(),help:Eo()+y},newCardSortOrder:{title:Mo(),help:No()+y},newReviewPriority:{title:Vo(),help:Fo()+y},interdayStepPriority:{title:Ho(),help:Bo()+y},reviewSortOrder:{title:Is(),help:zo()+y}},O=Object.values(h);let P=I(),c=I();function b(D){n(P).show(),n(c).to(D)}oe(()=>(e(),n(p),dt),()=>{switch(e().newCardGatherPriority){case dt.RANDOM_NOTES:v(p,[st.TEMPLATE_THEN_RANDOM,st.RANDOM_NOTE_THEN_TEMPLATE]);break;case dt.RANDOM_CARDS:v(p,[st.TEMPLATE_THEN_RANDOM,st.RANDOM_NOTE_THEN_TEMPLATE,st.RANDOM_CARD]);break;default:v(p,[]);break}n(p).includes(e().newCardSortOrder)&&Z(l,C(e).newCardSortOrder=0,C(e)),e().newCardSortOrder in st||Z(l,C(e).newCardSortOrder=0,C(e))}),Ge(),ke();var m=ve(()=>Jr());rt(r,{get title(){return n(m)},children:(D,L)=>{at(D,{slotHost:Y,get api(){return d()},children:(E,z)=>{var W=sd(),H=re(W);Y(H,{children:(u,F)=>{var M=ve(Rc);it(u,{get defaultValue(){return o.newCardGatherPriority},get choices(){return n(M)},get value(){return e().newCardGatherPriority},set value(x){Z(l,C(e).newCardGatherPriority=x,C(e))},children:(x,q)=>{ee(x,{$$events:{click:()=>b(Object.keys(h).indexOf("newGatherPriority"))},children:(G,te)=>{J();var X=Q();S(()=>N(X,h.newGatherPriority.title)),f(G,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var _=g(H,2);Y(_,{children:(u,F)=>{var M=ve(Ac);it(u,{get defaultValue(){return o.newCardSortOrder},get choices(){return n(M)},get disabledChoices(){return n(p)},get value(){return e().newCardSortOrder},set value(x){Z(l,C(e).newCardSortOrder=x,C(e))},children:(x,q)=>{ee(x,{$$events:{click:()=>b(Object.keys(h).indexOf("newCardSortOrder"))},children:(G,te)=>{J();var X=Q();S(()=>N(X,h.newCardSortOrder.title)),f(G,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=g(_,2);Y(T,{children:(u,F)=>{var M=ve(vs);it(u,{get defaultValue(){return o.newMix},get choices(){return n(M)},get value(){return e().newMix},set value(x){Z(l,C(e).newMix=x,C(e))},children:(x,q)=>{ee(x,{$$events:{click:()=>b(Object.keys(h).indexOf("newReviewPriority"))},children:(G,te)=>{J();var X=Q();S(()=>N(X,h.newReviewPriority.title)),f(G,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var k=g(T,2);Y(k,{children:(u,F)=>{var M=ve(vs);it(u,{get defaultValue(){return o.interdayLearningMix},get choices(){return n(M)},get value(){return e().interdayLearningMix},set value(x){Z(l,C(e).interdayLearningMix=x,C(e))},children:(x,q)=>{ee(x,{$$events:{click:()=>b(Object.keys(h).indexOf("interdayStepPriority"))},children:(G,te)=>{J();var X=Q();S(()=>N(X,h.interdayStepPriority.title)),f(G,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var w=g(k,2);Y(w,{children:(u,F)=>{var M=ve(()=>Ys(s()));it(u,{get defaultValue(){return o.reviewOrder},get choices(){return n(M)},get value(){return e().reviewOrder},set value(x){Z(l,C(e).reviewOrder=x,C(e))},children:(x,q)=>{ee(x,{$$events:{click:()=>b(Object.keys(h).indexOf("reviewSortOrder"))},children:(G,te)=>{J();var X=Q();S(()=>N(X,h.reviewSortOrder.title)),f(G,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(E,W)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(D,L)=>{var E=ve(()=>Jr());ut(D,{get title(){return n(E)},get url(){return we.DeckOptions.displayOrder},slot:"tooltip",helpSections:O,$$events:{mount:z=>{v(P,z.detail.modal),v(c,z.detail.carousel)}}})}}}),Pe()}var ad=K('<textarea class="w-100"></textarea>');function od(r,t){_e(t,!1);let a=V(t,"value",12),e=V(t,"defaults",8),s=I();function i(o){return o.map($=>$.toFixed(4)).join(", ")}function d(){a(this.value.replace(/ /g,"").split(",").filter(o=>o).map(o=>Number(o)))}oe(()=>Ke(a()),()=>{v(s,i(a()))}),Ge(),ke();var l=ad();Cs(l),S(()=>Ze(l,"placeholder",i(e()))),S(()=>br(l,n(s))),xe("blur",l,d),f(r,l),Pe()}var id=K("<!> <!>",1);function ld(r,t){let a=V(t,"value",12),e=V(t,"defaultValue",8),s=V(t,"defaults",8);var i=id(),d=re(i);pt(d,t,"default",{});var l=g(d,2);wt(l,{children:(o,$)=>{od(o,{get defaults(){return s()},get value(){return a()},set value(y){a(y)},$$legacy:!0})},$$slots:{default:!0,revert:(o,$)=>{Qt(o,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(y){a(y)},$$legacy:!0})}}}),f(r,i)}var ud=K('<input type="text" class="w-100 mb-1">');function cd(r,t){let a=V(t,"value",12),e=V(t,"placeholder",8);wt(r,{children:(s,i)=>{var d=ud();ft(d),S(()=>Ze(d,"placeholder",e())),Yt(d,a),f(s,d)},$$slots:{default:!0}})}var Ue=(r=>(r[r.time=0]="time",r[r.count=1]="count",r[r.memorized=2]="memorized",r))(Ue||{});function mr(r,t,a,e){const s=as(r);if(s.selectAll(".lines").remove(),s.selectAll(".hover-columns").remove(),s.selectAll(".focus-line").remove(),s.selectAll(".legend").remove(),a.length==0)return os(s,!1),[];const i=s.transition().duration(600),d=new Date,l=a.map(u=>({...u,date:new Date(d.getTime()+u.x*24*60*60*1e3)})),o=d,$=is(l,u=>u.date),y=su().domain([o,$]).range([t.marginLeft,t.width-t.marginRight]);s.select(".x-ticks").call(u=>u.transition(i).call(Nl(y).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const p=u=>e==0?vr(u,!0):u.toString(),h={1:l.map(u=>({...u,y:u.count})),0:l.map(u=>({...u,y:u.timeCost})),2:l.map(u=>({...u,y:u.memorized}))}[e],O=is(h,u=>u.y),P=Vl().range([t.height-t.marginBottom,t.marginTop]).domain([0,O]).nice();s.select(".y-ticks").call(u=>u.transition(i).call(Fl(P).ticks(t.height/50).tickSizeOuter(0).tickFormat(p))).attr("direction","ltr"),s.select(".y-ticks .y-axis-title").remove(),s.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("font-size","1rem").attr("dy","1.1em").attr("fill","currentColor");const c=h.map(u=>[y(u.date),P(u.y),u.label]),b=cu(c,u=>Object.assign(u,{z:u[0][2]}),u=>u[2]),m=fu;s.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(b.entries())).join("path").attr("vector-effect","non-scaling-stroke").attr("stroke",(u,F)=>m[F%m.length]).attr("d",u=>Hl()(u[1].map(F=>[F[0],F[1]]))).attr("data-group",u=>u[0]);const D=s.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),L=Array.from(b.values()).reduce((u,F)=>u.length>F.length?u:F),E=t.width/L.length;s.append("g").attr("class","hover-columns").selectAll("rect").data(L).join("rect").attr("x",u=>u[0]-E/2).attr("y",t.marginTop).attr("width",E).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",W).on("mouseout",()=>{D.style("opacity",0),ls()});const z={0:vr,1:u=>Ds({reviews:Math.round(u)}),2:u=>jo({memorized:Math.round(u).toFixed(0)})}[e];function W(u,F){Bl(u,document.body);const M=y.invert(F[0]),x={};b.forEach((te,X)=>{const U=zl(ce=>y.invert(ce[0])).left,de=U(te,M),ye=te[de];ye&&(x[X]=P.invert(ye[1]))}),D.attr("x1",F[0]).attr("x2",F[0]).style("opacity",1);const q=+((M.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let G=`Date: ${Ln(M)}<br>In ${q} Days<br>`;for(const[te,X]of Object.entries(x))s.select(`path[data-group="${te}"]`).classed("hidden")||(G+=`<span style="color:${m[(parseInt(te)-1)%m.length]}">■</span> #${te}: ${z(X)}<br>`);us(G,u.pageX,u.pageY)}const H=s.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(b.keys())).join("g").attr("transform",(u,F)=>`translate(0,${F*20})`).attr("cursor","pointer").on("click",(u,F)=>k(u,F)).on("mousemove",T).on("mouseout",ls),_={1:qo,0:({count:u})=>vr(u),2:Uo}[e];function T(u,F){const M=h.filter(G=>G.label==F),x=e==2?M[M.length-1].memorized-M[0].memorized:zu(M,G=>G.y),q=x/((M==null?void 0:M.length)||1);us(`#${F}:<br/>
                ${Go()}: ${_({count:q})}<br/>
                ${Wo()}: ${z(x)}`,u.pageX,u.pageY)}H.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(u,F)=>m[F%m.length]),H.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(u=>`#${u}`);const k=(u,F)=>{const M=F,x=s.select(`path[data-group="${M}"]`),q=x.classed("hidden"),G=u.currentTarget;x.classed("hidden",!q),x.style("display",()=>q?null:"none"),as(G).select("rect").style("opacity",q?1:.5)};return os(s,!0),[]}var dd=K('<tr><td class="day svelte-47inpr"> </td><td colspan="3" class="svelte-47inpr"><input type="range" list="easy_day_steplist" class="svelte-47inpr"></td></tr>'),fd=K('<div class="easy-days-settings svelte-47inpr"><table class="svelte-47inpr"><thead><tr><th class="svelte-47inpr"></th><th class="header min-col svelte-47inpr"><span> </span></th><th class="header text-center svelte-47inpr"><span> </span></th><th class="header normal-col svelte-47inpr"><span> </span></th></tr></thead><tbody></tbody></table></div>');function Ks(r,t){_e(t,!1);const a=[Qo(),Yo(),Ko(),Xo(),Zo(),Jo(),ei()];let e=V(t,"values",28,()=>[0,0,0,0,0,0,0]);ke(),Y(r,{children:(s,i)=>{var d=fd(),l=B(d),o=B(l),$=B(o),y=g(B($)),p=B(y),h=B(p,!0);S(()=>N(h,ti())),R(p),R(y);var O=g(y),P=B(O),c=B(P,!0);S(()=>N(c,ri())),R(P),R(O);var b=g(O),m=B(b),D=B(m,!0);S(()=>N(D,si())),R(m),R(b),R($),R(o);var L=g(o);qt(L,5,()=>a,ar,(E,z,W)=>{var H=dd(),_=B(H),T=B(_,!0);R(_);var k=g(_),w=B(k);ft(w),Ze(w,"step",.5),Ze(w,"max",1),Ze(w,"min",0),R(k),R(H),S(()=>N(T,n(z))),Yt(w,()=>e()[W],u=>e(e()[W]=u,!0)),f(E,H)}),R(L),R(l),R(d),f(s,d)},$$slots:{default:!0}}),Pe()}var gd=K(" <!>",1),vd=K("<div> </div>"),$d=K('<label><input type="radio"> </label> <label><input type="radio"> </label> <label><input type="radio"> </label>',1),md=K('<div class="radio-group svelte-18vh0ci"><!></div> <div class="svg-container svelte-18vh0ci"><svg class="svelte-18vh0ci"><!><!><!><!></svg></div> <!>',1),pd=K('<div class="modal svelte-18vh0ci" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header svelte-18vh0ci"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><!> <!> <!> <!> <!> <details><summary class="svelte-18vh0ci"> </summary> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <!> <!> <!> <!> <!> <!></details> <div class="m-2"><details><summary class="svelte-18vh0ci"> </summary> <button><!></button> <!> <!></details></div> <button> </button> <button> </button> <button> </button> <!> <!></div></div></div></div>');function hd(r,t){_e(t,!1);const a=De(),e=()=>$e(L,"$config",a),s=()=>$e(H,"$fsrs",a),i=()=>$e(u,"$newCardsIgnoreReviewLimit",a),d=I(),l=I(),o=I(),$=I(),y=I(),p=I(),h=[];let O=V(t,"shown",12,!1),P=V(t,"state",8),c=V(t,"simulateFsrsRequest",12),b=V(t,"computing",8),m=V(t,"openHelpModal",8),D=V(t,"onPresetChange",8);const L=P().currentConfig;let E=I(Ue.count),z=I([]),W=I(!1);const H=P().fsrs,_=Ql();let T=I(null),k=0,w=I([]);const u=P().newCardsIgnoreReviewLimit;let F=I(!0),M=I(e().leechAction==Rt.SUSPEND),x=I(e().leechThreshold),q=I(null),G=I(!1),te=I(void 0);function X(A,ae){const ne=[];for(let ge=0;ge<A.length;ge++){let le=0,Te=0;for(let Le=Math.max(0,ge-ae+1);Le<=ge;Le++)le+=A[Le],Te++;ne.push(le/Te)}return ne}function U(A,ae){return A.map((ne,ge)=>ne+ae[ge])}function de(A){return A?pi({num:A.toFixed(2)}):""}function ye(){c(c().daysToSimulate=n(d),!0),c(c().deckSize=n(l),!0),c(c().suspendAfterLapseCount=n(M)?n(x):void 0,!0),c(c().easyDaysPercentages=n(p),!0)}function ce(A){return A?hi({count:A.current}):""}async function be(){let A;ye();try{await nr(async()=>{v(G,!0),A=await kn(c())},ae=>{ae.value.case==="computeRetention"&&v(te,ae.value.value)})}finally{v(G,!1),A&&v(q,A.optimalRetention)}}async function pe(){let A;ye();try{await nr(async()=>{v(W,!0),A=await bn(c())},()=>{})}finally{if(v(W,!1),A){k+=1;const ae=U(A.dailyReviewCount,A.dailyNewCount),ne=A.accumulatedKnowledgeAcquisition;v(w,n(w).concat(A.dailyTimeCost.map((ge,le)=>({x:le,timeCost:ge,count:ae[le],memorized:ne[le],label:k})))),v(z,mr(n(T),_,n(w),n(E)))}}}function ue(){v(w,n(w).filter(A=>A.label!==k)),k=Math.max(0,k-1),v(z,mr(n(T),_,n(w),n(E)))}oe(()=>{},()=>{v(d,365)}),oe(()=>{},()=>{v(l,0)}),oe(()=>n(d),()=>{v(o,Math.ceil(n(d)/365))}),oe(()=>(n(W),n(G)),()=>{v($,n(W)||n(G))}),oe(()=>n(te),()=>{v(y,ce(n(te)))}),oe(()=>(n(T),n(w),n(F),n(o),n(E)),()=>{if(n(T)){let A=n(w);if(n(F)){const ae=n(w).reduce((ne,ge)=>(ne[ge.label]=ne[ge.label]||[],ne[ge.label].push(ge),ne),{});A=Object.values(ae).flatMap(ne=>{const ge=X(ne.map(Le=>Le.timeCost),n(o)),le=X(ne.map(Le=>Le.count),n(o)),Te=X(ne.map(Le=>Le.memorized),n(o));return ne.map((Le,Ot)=>({...Le,timeCost:ge[Ot],count:le[Ot],memorized:Te[Ot]}))})}v(z,mr(n(T),_,A,n(E)))}}),oe(()=>e(),()=>{v(p,[...e().easyDaysPercentages])}),Ge(),ke();var fe=pd(),Oe=B(fe),Ae=B(Oe),he=B(Ae),Ee=B(he),se=B(Ee,!0);S(()=>N(se,Ts())),R(Ee);var Ne=g(Ee,2);R(he);var Ce=g(he,2),Xe=B(Ce);Ye(Xe,{defaultValue:365,min:1,max:3650,get value(){return n(d)},set value(A){v(d,A)},children:(A,ae)=>{ee(A,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ne,ge)=>{J();var le=Q();S(()=>N(le,ni())),f(ne,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Se=g(Xe,2);Ye(Se,{defaultValue:0,min:0,max:1e5,get value(){return n(l)},set value(A){v(l,A)},children:(A,ae)=>{ee(A,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ne,ge)=>{J();var le=Q();S(()=>N(le,ai())),f(ne,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var _t=g(Se,2);ot(_t,{get defaultValue(){return e().desiredRetention},min:.7,max:.99,percentage:!0,get value(){return c().desiredRetention},set value(A){c(c().desiredRetention=A,!0)},children:(A,ae)=>{ee(A,{$$events:{click:()=>m()("desiredRetention")},children:(ne,ge)=>{J();var le=Q();S(()=>N(le,xr())),f(ne,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Tt=g(_t,2);Ye(Tt,{get defaultValue(){return e().newPerDay},min:0,max:9999,get value(){return c().newLimit},set value(A){c(c().newLimit=A,!0)},children:(A,ae)=>{ee(A,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ne,ge)=>{J();var le=Q();S(()=>N(le,Os())),f(ne,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Pt=g(Tt,2);Ye(Pt,{get defaultValue(){return e().reviewsPerDay},min:0,max:9999,get value(){return c().reviewLimit},set value(A){c(c().reviewLimit=A,!0)},children:(A,ae)=>{ee(A,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ne,ge)=>{J();var le=Q();S(()=>N(le,Rs())),f(ne,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Lt=g(Pt,2),yt=B(Lt),Kt=B(yt,!0);S(()=>N(Kt,Ls())),R(yt);var ir=g(yt,2);Ml(ir,()=>n(p),A=>{Ks(A,{get values(){return n(p)},set values(ae){v(p,ae)},$$legacy:!0})}),R(Lt);var Et=g(Lt,2),Ct=B(Et),Mt=B(Ct,!0);S(()=>N(Mt,oi())),R(Ct);var Xt=g(Ct,2);Ye(Xt,{get defaultValue(){return e().maximumReviewInterval},min:1,max:36500,get value(){return c().maxInterval},set value(A){c(c().maxInterval=A,!0)},children:(A,ae)=>{ee(A,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ne,ge)=>{J();var le=Q();S(()=>N(le,Ps())),f(ne,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Zt=g(Xt,2),j=ve(()=>Ys(s()));it(Zt,{get defaultValue(){return e().reviewOrder},get choices(){return n(j)},get value(){return c().reviewOrder},set value(A){c(c().reviewOrder=A,!0)},children:(A,ae)=>{ee(A,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ne,ge)=>{J();var le=Q();S(()=>N(le,Is())),f(ne,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ie=g(Zt,2);je(ie,{get defaultValue(){return i()},get value(){return c().newCardsIgnoreReviewLimit},set value(A){c(c().newCardsIgnoreReviewLimit=A,!0)},children:(A,ae)=>{ee(A,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ne,ge)=>{var le=ve(()=>As());Dt(ne,{get title(){return n(le)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ve=g(ie,2);je(Ve,{defaultValue:!0,get value(){return n(F)},set value(A){v(F,A)},children:(A,ae)=>{ee(A,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ne,ge)=>{J();var le=Q();S(()=>N(le,ii())),f(ne,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var et=g(Ve,2),Ie=ve(()=>e().leechAction==Rt.SUSPEND);je(et,{get defaultValue(){return n(Ie)},get value(){return n(M)},set value(A){v(M,A)},children:(A,ae)=>{ee(A,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ne,ge)=>{J();var le=Q();S(()=>N(le,li())),f(ne,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var vt=g(et,2);{var ct=A=>{Ye(A,{get defaultValue(){return e().leechThreshold},min:1,max:9999,get value(){return n(x)},set value(ae){v(x,ae)},children:(ae,ne)=>{ee(ae,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ge,le)=>{J();var Te=Q();S(()=>N(Te,Es())),f(ge,Te)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Re(vt,A=>{n(M)&&A(ct)})}R(Et);var Nt=g(Et,2),Ir=B(Nt),lr=B(Ir),Zs=B(lr,!0);S(()=>N(Zs,Ms())),R(lr);var kt=g(lr,2),Js=B(kt);{var en=A=>{var ae=Q();S(()=>N(ae,yr())),f(A,ae)},tn=A=>{var ae=Q();S(()=>N(ae,ui())),f(A,ae)};Re(Js,A=>{n(G)?A(en):A(tn,!1)})}R(kt);var Dr=g(kt,2);{var rn=A=>{var ae=gd(),ne=re(ae);S(()=>{var Te;return N(ne,`${(Te=de(n(q)))!=null?Te:""} `)});var ge=g(ne);{var le=Te=>{var Le=ve(()=>yi());Be(Te,{get warning(){return n(Le)},className:"alert-warning"})};Re(ge,Te=>{n(q)-e().desiredRetention>=.01&&Te(le)})}f(A,ae)};Re(Dr,A=>{n(q)&&A(rn)})}var sn=g(Dr,2);{var nn=A=>{var ae=vd(),ne=B(ae,!0);R(ae),S(()=>N(ne,n(y))),f(A,ae)};Re(sn,A=>{n(G)&&A(nn)})}R(Ir),R(Nt);var bt=g(Nt,2),an=B(bt,!0);S(()=>N(an,ci())),R(bt);var xt=g(bt,2),on=B(xt,!0);S(()=>N(on,di())),R(xt);var St=g(xt,2),ln=B(St,!0);S(()=>N(ln,fi())),R(St);var Tr=g(St,2);{var un=A=>{var ae=Q();S(()=>N(ae,gi())),f(A,ae)};Re(Tr,A=>{n($)&&A(un)})}var cn=g(Tr,2);Gl(cn,{children:(A,ae)=>{var ne=md(),ge=re(ne),le=B(ge);Wl(le,{children:(ur,Yd)=>{var Mr=$d(),cr=re(Mr),Vt=B(cr);ft(Vt);var Nr,gn=g(Vt);S(()=>{var qe;return N(gn,` ${(qe=vi())!=null?qe:""}`)}),R(cr);var dr=g(cr,2),Ft=B(dr);ft(Ft);var Vr,vn=g(Ft);S(()=>{var qe;return N(vn,` ${(qe=$i())!=null?qe:""}`)}),R(dr);var Fr=g(dr,2),Ht=B(Fr);ft(Ht);var Hr,$n=g(Ht);S(()=>{var qe;return N($n,` ${(qe=mi())!=null?qe:""}`)}),R(Fr),S(()=>{Nr!==(Nr=Ue.count)&&(Vt.value=(Vt.__value=Ue.count)==null?"":Ue.count),Vr!==(Vr=Ue.time)&&(Ft.value=(Ft.__value=Ue.time)==null?"":Ue.time),Hr!==(Hr=Ue.memorized)&&(Ht.value=(Ht.__value=Ue.memorized)==null?"":Ue.memorized)}),gr(h,[],Vt,()=>(Ue.count,n(E)),qe=>v(E,qe)),gr(h,[],Ft,()=>(Ue.time,n(E)),qe=>v(E,qe)),gr(h,[],Ht,()=>(Ue.memorized,n(E)),qe=>v(E,qe)),f(ur,Mr)},$$slots:{default:!0}}),R(ge);var Te=g(ge,2),Le=B(Te),Ot=B(Le);Zl(Ot);var Lr=g(Ot);jl(Lr);var Er=g(Lr);ql(Er,{bounds:_});var dn=g(Er);Ul(dn,{bounds:_}),R(Le),Wt(Le,ur=>v(T,ur),()=>n(T)),R(Te);var fn=g(Te,2);Jl(fn,{get tableData(){return n(z)}}),S(()=>Ze(Le,"viewBox",`0 0 ${_.width} ${_.height}`)),f(A,ne)},$$slots:{default:!0}}),R(Ce),R(Ae),R(Oe),R(fe),S(()=>{var A,ae,ne,ge;mt(fe,"show",O()),mt(fe,"d-block",O()),At(kt,`btn ${(A=n(G)?"btn-warning":"btn-primary")!=null?A:""} svelte-18vh0ci`),kt.disabled=!n(G)&&b(),At(bt,`btn ${(ae=b()?"btn-warning":"btn-primary")!=null?ae:""} svelte-18vh0ci`),bt.disabled=b(),At(xt,`btn ${(ne=b()?"btn-warning":"btn-primary")!=null?ne:""} svelte-18vh0ci`),xt.disabled=b(),At(St,`btn ${(ge=b()?"btn-warning":"btn-primary")!=null?ge:""} svelte-18vh0ci`),St.disabled=b()}),xe("click",Ne,()=>O(!1)),xe("click",kt,()=>be()),xe("click",bt,pe),xe("click",xt,ue),xe("click",St,()=>{Z(L,C(e).newPerDay=c().newLimit,C(e)),Z(L,C(e).reviewsPerDay=c().reviewLimit,C(e)),Z(L,C(e).maximumReviewInterval=c().maxInterval,C(e)),Z(L,C(e).desiredRetention=c().desiredRetention,C(e)),gt(u,c().newCardsIgnoreReviewLimit),Z(L,C(e).reviewOrder=c().reviewOrder,C(e)),Z(L,C(e).leechAction=n(M)?Rt.SUSPEND:Rt.TAG_ONLY,C(e)),Z(L,C(e).leechThreshold=n(x),C(e)),Z(L,C(e).easyDaysPercentages=[...n(p)],C(e)),D()()}),f(r,fe),Pe()}var yd=K('<!> <!> <div class="ms-1 me-1"><!> <!> <button><!></button> <button><!></button> <div><!></div></div> <div class="m-1"><!> <button class="btn btn-primary svelte-mq5a9v"> </button></div> <div class="m-2"><!> <!></div> <div class="m-2"><button class="btn btn-primary svelte-mq5a9v"> </button></div> <!>',1);function Cd(r,t){_e(t,!1);const a=De(),e=()=>$e(H,"$daysSinceLastOptimization",a),s=()=>$e(E,"$config",a),i=()=>$e(n(O),"$newCardsIgnoreReviewLimit",a),d=()=>$e(W,"$fsrsReschedule",a),l=I(),o=I(),$=I(),y=I(),p=I(),h=I(),O=I(),P=I(),c=I(),b=I();let m=V(t,"state",8),D=V(t,"openHelpModal",8),L=V(t,"onPresetChange",8);const E=m().currentConfig,z=m().defaults,W=m().fsrsReschedule,H=m().daysSinceLastOptimization;let _=I(),T=I(!1),k=I(!1);function w(j,ie){const Ve=ie.length>20?-ie[20]:-.5,et=.9**(1/Ve)-1,vt=Math.round(100/et*(Math.pow(j,1/Ve)-1));return vt===100?"":Si({days:vt})}function u(j){return j<.7||j>.97?"alert-danger":j<.8||j>.95?"alert-warning":"alert-info"}function F(){return BigInt(s().ignoreRevlogsBeforeDate?new Date(s().ignoreRevlogsBeforeDate).getTime():0)}async function M(){if(n(T)){await zr({});return}if(m().presetAssignmentsChanged()){alert(es());return}v(T,!0),v(_,void 0);try{await nr(async()=>{const j=tr(s()),ie=s().relearnSteps;let Ve=0,et=0;for(let ct=0;ct<ie.length&&(et+=ie[ct],!(et>=1440));ct++)Ve++;const Ie=await xn({search:s().paramSearch?s().paramSearch:n($),ignoreRevlogsBeforeMs:F(),currentParams:j,numOfRelearningSteps:Ve});if(j.length&&j.every((ct,Nt)=>ct.toFixed(4)===Ie.params[Nt].toFixed(4))||Ie.params.length===0){const ct=Ie.fsrsItems?Ci():wi();setTimeout(()=>alert(ct),200)}else Z(E,C(s).fsrsParams6=Ie.params,C(s));n(_)&&Gt(_,n(_).current=n(_).total)},j=>{j.value.case==="computeParams"&&v(_,j.value.value)})}finally{v(T,!1)}}async function x(){if(n(k)){await zr({});return}if(m().presetAssignmentsChanged()){alert(es());return}v(k,!0),v(_,void 0);try{await nr(async()=>{const j=s().paramSearch?s().paramSearch:n($),ie=await Sn({params:tr(s()),search:j,ignoreRevlogsBeforeMs:F()});n(_)&&Gt(_,n(_).current=n(_).total),setTimeout(()=>alert(`Log loss: ${ie.logLoss.toFixed(4)}, RMSE(bins): ${(ie.rmseBins*100).toFixed(2)}%. ${_i()}`),200)},j=>{j.value.case==="computeParams"&&v(_,j.value.value)})}finally{v(k,!1)}}function q(j){if(!j||!j.total)return"";const ie=(j.current/j.total*100).toFixed(1);return j instanceof Rn?`${ie}%`:Oi({pct:ie,reviews:j.reviews})}async function G(){await Ar(),m().save(rr.COMPUTE_ALL_PARAMS)}let te=I(!1);oe(()=>(e(),lt),()=>{v(l,e()>30?Pi():"")}),oe(()=>(n(T),n(k)),()=>{v(o,n(T)||n(k))}),oe(()=>Ke(m()),()=>{v($,`preset:"${m().getCurrentNameForSearch()}" -is:suspended`)}),oe(()=>s(),()=>{v(y,Number(s().desiredRetention.toFixed(2)))}),oe(()=>(n(y),s()),()=>{v(p,w(n(y),tr(s())))}),oe(()=>n(y),()=>{v(h,u(n(y)))}),oe(()=>Ke(m()),()=>{fl(v(O,m().newCardsIgnoreReviewLimit),"$newCardsIgnoreReviewLimit",a)}),oe(()=>(s(),Ke(m()),i()),()=>{v(P,new On({params:tr(s()),desiredRetention:s().desiredRetention,newLimit:s().newPerDay,reviewLimit:s().reviewsPerDay,maxInterval:s().maximumReviewInterval,search:`preset:"${m().getCurrentNameForSearch()}" -is:suspended`,newCardsIgnoreReviewLimit:i(),easyDaysPercentages:s().easyDaysPercentages,reviewOrder:s().reviewOrder}))}),oe(()=>n(_),()=>{v(c,q(n(_)))}),oe(()=>n(_),()=>{var j,ie;v(b,(ie=(j=n(_))==null?void 0:j.reviews)!=null?ie:void 0)}),Ge(),ke();var X=yd(),U=re(X);ot(U,{get defaultValue(){return z.desiredRetention},min:.7,max:.99,percentage:!0,get value(){return s().desiredRetention},set value(j){Z(E,C(s).desiredRetention=j,C(s))},children:(j,ie)=>{ee(j,{$$events:{click:()=>D()("desiredRetention")},children:(Ve,et)=>{J();var Ie=Q();S(()=>N(Ie,xr())),f(Ve,Ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var de=g(U,2);Be(de,{get warning(){return n(p)},get className(){return n(h)}});var ye=g(de,2),ce=B(ye);ld(ce,{defaultValue:[],get defaults(){return z.fsrsParams6},get value(){return s().fsrsParams6},set value(j){Z(E,C(s).fsrsParams6=j,C(s))},children:(j,ie)=>{ee(j,{$$events:{click:()=>D()("modelParams")},children:(Ve,et)=>{J();var Ie=Q();S(()=>N(Ie,Ns())),f(Ve,Ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var be=g(ce,2);cd(be,{get placeholder(){return n($)},get value(){return s().paramSearch},set value(j){Z(E,C(s).paramSearch=j,C(s))},$$legacy:!0});var pe=g(be,2),ue=B(pe);{var fe=j=>{var ie=Q();S(()=>N(ie,yr())),f(j,ie)},Oe=j=>{var ie=Q();S(()=>N(ie,ki())),f(j,ie)};Re(ue,j=>{n(T)?j(fe):j(Oe,!1)})}R(pe);var Ae=g(pe,2),he=B(Ae);{var Ee=j=>{var ie=Q();S(()=>N(ie,yr())),f(j,ie)},se=j=>{var ie=Q();S(()=>N(ie,bi())),f(j,ie)};Re(he,j=>{n(k)?j(Ee):j(se,!1)})}R(Ae);var Ne=g(Ae,2),Ce=B(Ne);{var Xe=j=>{var ie=Q();S(()=>N(ie,n(c))),f(j,ie)},Se=j=>{var ie=Je(),Ve=re(ie);{var et=Ie=>{var vt=Q();S(()=>N(vt,Ds({reviews:n(b)}))),f(Ie,vt)};Re(Ve,Ie=>{n(b)!==void 0&&Ie(et)},!0)}f(j,ie)};Re(Ce,j=>{n(T)||n(k)?j(Xe):j(Se,!1)})}R(Ne),R(ye);var _t=g(ye,2),Tt=B(_t);Be(Tt,{get warning(){return n(l)},className:"alert-warning"});var Pt=g(Tt,2),Lt=B(Pt,!0);S(()=>N(Lt,xi())),R(Pt),R(_t);var yt=g(_t,2),Kt=B(yt);je(Kt,{defaultValue:!1,get value(){return It(),d()},set value(j){gt(W,j)},children:(j,ie)=>{ee(j,{$$events:{click:()=>D()("rescheduleCardsOnChange")},children:(Ve,et)=>{var Ie=ve(()=>Vs());Dt(Ve,{get title(){return n(Ie)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ir=g(Kt,2);{var Et=j=>{var ie=ve(()=>Ri());Be(j,{get warning(){return n(ie)}})};Re(ir,j=>{d()&&j(Et)})}R(yt);var Ct=g(yt,2),Mt=B(Ct),Xt=B(Mt,!0);S(()=>N(Xt,Ts())),R(Mt),R(Ct);var Zt=g(Ct,2);hd(Zt,{get state(){return m()},get simulateFsrsRequest(){return n(P)},get computing(){return n(o)},get openHelpModal(){return D()},get onPresetChange(){return L()},get shown(){return n(te)},set shown(j){v(te,j)},$$legacy:!0}),S(()=>{var j,ie;At(pe,`btn ${(j=n(T)?"btn-warning":"btn-primary")!=null?j:""} svelte-mq5a9v`),pe.disabled=!n(T)&&n(o),At(Ae,`btn ${(ie=n(k)?"btn-warning":"btn-primary")!=null?ie:""} svelte-mq5a9v`),Ae.disabled=!n(k)&&n(o)}),xe("click",pe,()=>M()),xe("click",Ae,()=>x()),xe("click",Pt,()=>G()),xe("click",Mt,()=>v(te,!0)),f(r,X),Pe()}var wd=K("<!> <!>",1);function _d(r,t){_e(t,!1);const a=De(),e=()=>$e(l,"$fsrs",a);let s=V(t,"state",8),i=V(t,"api",8),d=V(t,"onPresetChange",8);const l=s().fsrs,o={fsrs:{title:"FSRS",help:Ai(),url:we.DeckOptions.fsrs},desiredRetention:{title:xr(),help:Ii(),sched:Qe.FSRS},modelParams:{title:Ns(),help:Di()+`

`+Ti(),sched:Qe.FSRS},rescheduleCardsOnChange:{title:Vs(),help:Li(),sched:Qe.FSRS},computeOptimalRetention:{title:Ms(),help:Ei(),sched:Qe.FSRS}},$=Object.values(o);let y=I(),p=I();function h(O){n(y).show(),n(p).to(O)}ke(),rt(r,{title:"FSRS",children:(O,P)=>{at(O,{slotHost:Y,get api(){return i()},children:(c,b)=>{var m=wd(),D=re(m);Y(D,{children:(z,W)=>{je(z,{defaultValue:!1,get value(){return It(),e()},set value(H){gt(l,H)},children:(H,_)=>{ee(H,{$$events:{click:()=>h(Object.keys(o).indexOf("fsrs"))},children:(T,k)=>{Dt(T,{get title(){return o.fsrs.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var L=g(D,2);{var E=z=>{Cd(z,{get state(){return s()},openHelpModal:W=>h(Object.keys(o).indexOf(W)),get onPresetChange(){return d()}})};Re(L,z=>{e()&&z(E)})}f(c,m)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(O,P)=>{ut(O,{title:"FSRS",get url(){return we.DeckOptions.fsrs},slot:"tooltip",get fsrs(){return e()},helpSections:$,$$events:{mount:c=>{v(y,c.detail.modal),v(p,c.detail.carousel)}}})}}}),Pe()}function Pd(r,t){_e(t,!1);let a=V(t,"html",8),e=V(t,"mounted",8);kr(e()),ke();var s=Je(),i=re(s);Mi(i,a,!1,!1),f(r,s),Pe()}function kd(r){switch(r){case nt.Seconds:return"s";case nt.Minutes:return"m";case nt.Hours:return"h";case nt.Days:return"d";default:return""}}function bd(r){switch(r){case"s":return nt.Seconds;case"h":return nt.Hours;case"d":return nt.Days;default:return nt.Minutes}}function xd(r){const t=r*60;let a=eu(t);return[nt.Months,nt.Years].includes(a)&&(a=nt.Days),`${Math.round(tu(a,t))}${kd(a)}`}function Sd(r){const t=r.match(/(\d+)(.*)/);if(t){const[a,e,s]=t,i=bd(s),d=ru(i)*parseInt(e,10);return Math.min(d,2**31)/60}else return 0}function Od(r){return r.map(xd).join(" ")}function Rd(r){return r.split(" ").map(Sd).filter(t=>t)}var Ad=K('<input type="text" class="svelte-f5c9s0">');function Id(r,t){_e(t,!1);let a=V(t,"value",12),e=I();function s(){a(Rd(this.value))}oe(()=>Ke(a()),()=>{v(e,Od(a()))}),Ge(),ke();var i=Ad();ft(i),S(()=>br(i,n(e))),xe("blur",i,s),f(r,i),Pe()}var Dd=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Td=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Xs(r,t){let a=V(t,"value",12),e=V(t,"defaultValue",8);var s=Td(),i=re(s);ze(i,()=>({"--cols":13})),Me(i.lastChild,{children:(d,l)=>{var o=Dd(),$=re(o);ze($,()=>({"--col-size":7})),ht($.lastChild,{breakpoint:"xs",children:(p,h)=>{var O=Je(),P=re(O);pt(P,t,"default",{}),f(p,O)},$$slots:{default:!0}}),R($);var y=g($,2);ze(y,()=>({"--col-size":6})),ht(y.lastChild,{breakpoint:"xs",children:(p,h)=>{wt(p,{children:(O,P)=>{Id(O,{get value(){return a()},set value(c){a(c)},$$legacy:!0})},$$slots:{default:!0,revert:(O,P)=>{Qt(O,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(c){a(c)},$$legacy:!0})}}})},$$slots:{default:!0}}),R(y),f(d,o)},$$slots:{default:!0}}),R(i),f(r,s)}var Ld=K("<!> <!> <!> <!> <!> <!>",1);function Ed(r,t){_e(t,!1);const a=De(),e=()=>$e(l,"$config",a),s=()=>$e($,"$fsrs",a);let i=V(t,"state",8),d=V(t,"api",24,()=>({}));const l=i().currentConfig,o=i().defaults,$=i().fsrs;let y=I(),p=I();const h={relearningSteps:{title:Ni(),help:Vi(),url:we.DeckOptions.relearningSteps},minimumInterval:{title:Fi(),help:Hi(),url:we.DeckOptions.minimumInterval,sched:Qe.SM2},leechThreshold:{title:Es(),help:Bi(),url:we.Leeches.leeches},leechAction:{title:zi(),help:Gi(),url:we.Leeches.waiting}},O=Object.values(h);let P=I(),c=I();function b(D){n(P).show(),n(c).to(D)}oe(()=>(e(),s(),lt),()=>{const D=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;v(y,!s()&&D>e().minimumLapseInterval?Wi():""),v(p,s()&&D>=1?Fs():"")}),Ge(),ke();var m=ve(()=>ts());rt(r,{get title(){return n(m)},children:(D,L)=>{at(D,{slotHost:Y,get api(){return d()},children:(E,z)=>{var W=Ld(),H=re(W);Y(H,{children:(M,x)=>{Xs(M,{get defaultValue(){return o.relearnSteps},get value(){return e().relearnSteps},set value(q){Z(l,C(e).relearnSteps=q,C(e))},children:(q,G)=>{ee(q,{$$events:{click:()=>b(Object.keys(h).indexOf("relearningSteps"))},children:(te,X)=>{J();var U=Q();S(()=>N(U,h.relearningSteps.title)),f(te,U)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var _=g(H,2);Y(_,{children:(M,x)=>{Be(M,{get warning(){return n(p)}})},$$slots:{default:!0}});var T=g(_,2);{var k=M=>{Y(M,{children:(x,q)=>{Ye(x,{get defaultValue(){return o.minimumLapseInterval},min:1,get value(){return e().minimumLapseInterval},set value(G){Z(l,C(e).minimumLapseInterval=G,C(e))},children:(G,te)=>{ee(G,{$$events:{click:()=>b(Object.keys(h).indexOf("minimumInterval"))},children:(X,U)=>{J();var de=Q();S(()=>N(de,h.minimumInterval.title)),f(X,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})};Re(T,M=>{s()||M(k)})}var w=g(T,2);Y(w,{children:(M,x)=>{Be(M,{get warning(){return n(y)}})},$$slots:{default:!0}});var u=g(w,2);Y(u,{children:(M,x)=>{Ye(M,{get defaultValue(){return o.leechThreshold},min:1,get value(){return e().leechThreshold},set value(q){Z(l,C(e).leechThreshold=q,C(e))},children:(q,G)=>{ee(q,{$$events:{click:()=>b(Object.keys(h).indexOf("leechThreshold"))},children:(te,X)=>{J();var U=Q();S(()=>N(U,h.leechThreshold.title)),f(te,U)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var F=g(u,2);Y(F,{children:(M,x)=>{var q=ve(Ic);it(M,{get defaultValue(){return o.leechAction},get choices(){return n(q)},breakpoint:"md",get value(){return e().leechAction},set value(G){Z(l,C(e).leechAction=G,C(e))},children:(G,te)=>{ee(G,{$$events:{click:()=>b(Object.keys(h).indexOf("leechAction"))},children:(X,U)=>{J();var de=Q();S(()=>N(de,h.leechAction.title)),f(X,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(E,W)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(D,L)=>{var E=ve(()=>ts());ut(D,{get title(){return n(E)},get url(){return we.DeckOptions.lapses},slot:"tooltip",get fsrs(){return s()},helpSections:O,$$events:{mount:z=>{v(P,z.detail.modal),v(c,z.detail.carousel)}}})}}}),Pe()}var Md=K("<!> <!> <!> <!>",1),Nd=K("<!> <!> <!> <!> <!>",1);function Vd(r,t){_e(t,!1);const a=De(),e=()=>$e($,"$config",a),s=()=>$e(p,"$fsrs",a),i=I(),d=I();let l=V(t,"state",8),o=V(t,"api",24,()=>({}));const $=l().currentConfig,y=l().defaults,p=l().fsrs;let h=I(),O=I();const P={learningSteps:{title:ji(),help:qi(),url:we.DeckOptions.learningSteps},graduatingInterval:{title:Ui(),help:Qi(),url:we.DeckOptions.graduatingInterval,sched:Qe.SM2},easyInterval:{title:Yi(),help:Ki(),url:we.DeckOptions.easyInterval,sched:Qe.SM2},insertionOrder:{title:Xi(),help:Zi(),url:we.DeckOptions.insertionOrder}},c=Object.values(P);let b=I(),m=I();function D(E){n(b).show(),n(m).to(E)}oe(()=>(e(),s()),()=>{const E=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;v(h,E>e().graduatingIntervalGood?Ji():""),v(O,s()&&E>=1?Fs():"")}),oe(()=>(e(),lt),()=>{v(i,e().graduatingIntervalGood>e().graduatingIntervalEasy?el():"")}),oe(()=>(e(),lt),()=>{v(d,e().newCardInsertOrder==pr.RANDOM?tl():"")}),Ge(),ke();var L=ve(()=>rs());rt(r,{get title(){return n(L)},children:(E,z)=>{at(E,{slotHost:Y,get api(){return o()},children:(W,H)=>{var _=Nd(),T=re(_);Y(T,{children:(x,q)=>{Xs(x,{get defaultValue(){return y.learnSteps},get value(){return e().learnSteps},set value(G){Z($,C(e).learnSteps=G,C(e))},children:(G,te)=>{ee(G,{$$events:{click:()=>D(Object.keys(P).indexOf("learningSteps"))},children:(X,U)=>{J();var de=Q();S(()=>N(de,P.learningSteps.title)),f(X,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var k=g(T,2);Y(k,{children:(x,q)=>{Be(x,{get warning(){return n(O)}})},$$slots:{default:!0}});var w=g(k,2);{var u=x=>{var q=Md(),G=re(q);Y(G,{children:(de,ye)=>{Ye(de,{get defaultValue(){return y.graduatingIntervalGood},get value(){return e().graduatingIntervalGood},set value(ce){Z($,C(e).graduatingIntervalGood=ce,C(e))},children:(ce,be)=>{ee(ce,{$$events:{click:()=>D(Object.keys(P).indexOf("graduatingInterval"))},children:(pe,ue)=>{J();var fe=Q();S(()=>N(fe,P.graduatingInterval.title)),f(pe,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var te=g(G,2);Y(te,{children:(de,ye)=>{Be(de,{get warning(){return n(h)}})},$$slots:{default:!0}});var X=g(te,2);Y(X,{children:(de,ye)=>{Ye(de,{get defaultValue(){return y.graduatingIntervalEasy},get value(){return e().graduatingIntervalEasy},set value(ce){Z($,C(e).graduatingIntervalEasy=ce,C(e))},children:(ce,be)=>{ee(ce,{$$events:{click:()=>D(Object.keys(P).indexOf("easyInterval"))},children:(pe,ue)=>{J();var fe=Q();S(()=>N(fe,P.easyInterval.title)),f(pe,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var U=g(X,2);Y(U,{children:(de,ye)=>{Be(de,{get warning(){return n(i)}})},$$slots:{default:!0}}),f(x,q)};Re(w,x=>{s()||x(u)})}var F=g(w,2);Y(F,{children:(x,q)=>{var G=ve(Dc);it(x,{get defaultValue(){return y.newCardInsertOrder},get choices(){return n(G)},breakpoint:"md",get value(){return e().newCardInsertOrder},set value(te){Z($,C(e).newCardInsertOrder=te,C(e))},children:(te,X)=>{ee(te,{$$events:{click:()=>D(Object.keys(P).indexOf("insertionOrder"))},children:(U,de)=>{J();var ye=Q();S(()=>N(ye,P.insertionOrder.title)),f(U,ye)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var M=g(F,2);Y(M,{children:(x,q)=>{Be(x,{get warning(){return n(d)}})},$$slots:{default:!0}}),f(W,_)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(E,z)=>{var W=ve(()=>rs());ut(E,{get title(){return n(W)},get url(){return we.DeckOptions.newCards},slot:"tooltip",helpSections:c,get fsrs(){return s()},$$events:{mount:H=>{v(b,H.detail.modal),v(m,H.detail.carousel)}}})}}}),Pe()}var Fd=K('<div class="show-timer-switch" style="display: contents;"><!></div>'),Hd=K('<div class="show-timer-switch" style="display: contents;"><!></div>'),Bd=K("<!> <!> <!> <!>",1);function zd(r,t){_e(t,!1);const a=De(),e=()=>$e(l,"$config",a),s=I();let i=V(t,"state",8),d=V(t,"api",8);const l=i().currentConfig,o=i().defaults,$={maximumAnswerSecs:{title:rl(),help:sl()},showAnswerTimer:{title:nl(),help:al()},stopTimerOnAnswer:{title:ol(),help:il()}},y=Object.values($);let p=I(),h=I();function O(c){n(p).show(),n(h).to(c)}oe(()=>(e(),lt),()=>{v(s,e().capAnswerTimeToSecs>600?ll():"")}),Ge(),ke();var P=ve(()=>ss());rt(r,{get title(){return n(P)},children:(c,b)=>{at(c,{slotHost:Y,get api(){return d()},children:(m,D)=>{var L=Bd(),E=re(L);Y(E,{children:(_,T)=>{Ye(_,{get defaultValue(){return o.capAnswerTimeToSecs},min:1,max:7200,get value(){return e().capAnswerTimeToSecs},set value(k){Z(l,C(e).capAnswerTimeToSecs=k,C(e))},children:(k,w)=>{ee(k,{$$events:{click:()=>O(Object.keys($).indexOf("maximumAnswerSecs"))},children:(u,F)=>{J();var M=Q();S(()=>N(M,$.maximumAnswerSecs.title)),f(u,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var z=g(E,2);Y(z,{children:(_,T)=>{Be(_,{get warning(){return n(s)}})},$$slots:{default:!0}});var W=g(z,2);Y(W,{children:(_,T)=>{var k=Fd(),w=B(k);je(w,{get defaultValue(){return o.showTimer},get value(){return e().showTimer},set value(u){Z(l,C(e).showTimer=u,C(e))},children:(u,F)=>{ee(u,{$$events:{click:()=>O(Object.keys($).indexOf("showAnswerTimer"))},children:(M,x)=>{J();var q=Q();S(()=>N(q,$.showAnswerTimer.title)),f(M,q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),R(k),f(_,k)},$$slots:{default:!0}});var H=g(W,2);Y(H,{children:(_,T)=>{var k=Hd(),w=B(k);je(w,{get defaultValue(){return o.stopTimerOnAnswer},get value(){return e().stopTimerOnAnswer},set value(u){Z(l,C(e).stopTimerOnAnswer=u,C(e))},children:(u,F)=>{ee(u,{$$events:{click:()=>O(Object.keys($).indexOf("stopTimerOnAnswer"))},children:(M,x)=>{J();var q=Q();S(()=>N(q,$.stopTimerOnAnswer.title)),f(M,q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),R(k),f(_,k)},$$slots:{default:!0}}),f(m,L)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(c,b)=>{var m=ve(()=>ss());ut(c,{get title(){return n(m)},get url(){return we.DeckOptions.timer},slot:"tooltip",helpSections:y,$$events:{mount:D=>{v(p,D.detail.modal),v(h,D.detail.carousel)}}})}}}),Pe()}var Gd=K("<!> <!> <!>",1),Wd=K('<datalist id="easy_day_steplist"><option>0.5</option></datalist> <!>',1);function jd(r,t){_e(t,!1);const a=De(),e=()=>$e(O,"$config",a),s=()=>$e(p,"$fsrsEnabled",a),i=()=>$e(h,"$reschedule",a),d=I(),l=I(),o=I();let $=V(t,"state",8),y=V(t,"api",8);const p=$().fsrs,h=$().fsrsReschedule,O=$().currentConfig,P=$().defaults,c=e().easyDaysPercentages.slice();oe(()=>e(),()=>{e().easyDaysPercentages.length!==7&&Z(O,C(e).easyDaysPercentages=P.easyDaysPercentages.slice(),C(e))}),oe(()=>e(),()=>{v(d,e().easyDaysPercentages.some((L,E)=>L!==c[E]))}),oe(()=>(e(),lt),()=>{v(l,e().easyDaysPercentages.some(L=>L===1)?"":ul())}),oe(()=>(n(d),s(),i(),lt),()=>{v(o,n(d)&&!(s()&&i())?cl():"")}),Ge(),ke();var b=Wd(),m=g(re(b),2),D=ve(()=>Ls());rt(m,{get title(){return n(D)},children:(L,E)=>{at(L,{slotHost:Y,get api(){return y()},children:(z,W)=>{var H=Gd(),_=re(H);Ks(_,{get values(){return e().easyDaysPercentages},set values(w){Z(O,C(e).easyDaysPercentages=w,C(e))},$$legacy:!0});var T=g(_,2);Y(T,{children:(w,u)=>{Be(w,{get warning(){return n(l)}})},$$slots:{default:!0}});var k=g(T,2);Y(k,{children:(w,u)=>{Be(w,{get warning(){return n(o)}})},$$slots:{default:!0}}),f(z,H)},$$slots:{default:!0}})},$$slots:{default:!0}}),f(r,b),Pe()}var qd=K("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),Ud=K('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function Qd(r,t){_e(t,!1);const a=De(),e=()=>$e(i,"$addons",a);let s=V(t,"state",8);const i=s().addonComponents;function d(){return s().currentAuxData}function l(_){gt(i,[...e(),_])}function o(_,T){gt(i,[...e(),{component:Pd,html:_,mounted:T}])}const $={},y={},p={},h={},O={},P={},c={},b={},m={},D={};let L=I();ke();var E=Ud(),z=re(E);Zc(z,{get state(){return s()},$$events:{presetchange(..._){var T;(T=n(L))==null||T.apply(this,_)}}});var W=g(z,2),H=B(W);return ze(H,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),gl(H.lastChild,{breakpoint:"sm",class:"container-columns",children:(_,T)=>{var k=qd(),w=re(k),u=B(w);Me(u,{class:"row-columns",children:(ue,fe)=>{rd(ue,{get state(){return s()},api:y,get onPresetChange(){return n(L)},set onPresetChange(Oe){v(L,Oe)},$$legacy:!0})},$$slots:{default:!0}});var F=g(u,2);Me(F,{class:"row-columns",children:(ue,fe)=>{Vd(ue,{get state(){return s()},api:p})},$$slots:{default:!0}});var M=g(F,2);Me(M,{class:"row-columns",children:(ue,fe)=>{Ed(ue,{get state(){return s()},api:h})},$$slots:{default:!0}});var x=g(M,2);Me(x,{class:"row-columns",children:(ue,fe)=>{nd(ue,{get state(){return s()},api:P})},$$slots:{default:!0}});var q=g(x,2);Me(q,{class:"row-columns",children:(ue,fe)=>{_d(ue,{get state(){return s()},api:{},get onPresetChange(){return n(L)},set onPresetChange(Oe){v(L,Oe)},$$legacy:!0})},$$slots:{default:!0}}),R(w);var G=g(w,2),te=B(G);Me(te,{class:"row-columns",children:(ue,fe)=>{Fc(ue,{get state(){return s()},api:O})},$$slots:{default:!0}});var X=g(te,2);Me(X,{class:"row-columns",children:(ue,fe)=>{Oc(ue,{get state(){return s()},api:b})},$$slots:{default:!0}});var U=g(X,2);Me(U,{class:"row-columns",children:(ue,fe)=>{zd(ue,{get state(){return s()},api:c})},$$slots:{default:!0}});var de=g(U,2);Me(de,{class:"row-columns",children:(ue,fe)=>{Nc(ue,{get state(){return s()},api:c})},$$slots:{default:!0}});var ye=g(de,2);{var ce=ue=>{Me(ue,{class:"row-columns",children:(fe,Oe)=>{Uu(fe,{get state(){return s()}})},$$slots:{default:!0}})};Re(ye,ue=>{e().length&&ue(ce)})}var be=g(ye,2);Me(be,{class:"row-columns",children:(ue,fe)=>{jd(ue,{get state(){return s()},api:D})},$$slots:{default:!0}});var pe=g(be,2);Me(pe,{class:"row-columns",children:(ue,fe)=>{xc(ue,{get state(){return s()},api:m})},$$slots:{default:!0}}),R(G),f(_,k)},$$slots:{default:!0}}),R(H),R(W),f(r,E),We(t,"auxData",d),We(t,"addSvelteAddon",l),We(t,"addHtmlAddon",o),We(t,"options",$),We(t,"dailyLimits",y),We(t,"newOptions",p),We(t,"lapseOptions",h),We(t,"buryOptions",O),We(t,"displayOrder",P),We(t,"timerOptions",c),We(t,"audioOptions",b),We(t,"advancedOptions",m),We(t,"easyDays",D),Pe({auxData:d,addSvelteAddon:l,addHtmlAddon:o,options:$,dailyLimits:y,newOptions:p,lapseOptions:h,buryOptions:O,displayOrder:P,timerOptions:c,audioOptions:b,advancedOptions:m,easyDays:D})}function Nf(r,t){_e(t,!1);let a=V(t,"data",8),e=I();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await Ar(),(!await a().state.isModified()||confirm(dl()))&&An({})},kr(()=>{globalThis.$deckOptions=new Promise((s,i)=>{s(n(e))}),a().state.resolveOriginalConfigs(),In({})}),ke(),Wt(Qd(r,{get state(){return a().state},$$legacy:!0}),s=>v(e,s),()=>n(e)),Pe()}export{Nf as component,Mf as universal};
