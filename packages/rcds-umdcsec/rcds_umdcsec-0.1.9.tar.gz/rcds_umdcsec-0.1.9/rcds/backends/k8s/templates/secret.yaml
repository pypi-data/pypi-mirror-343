{% import '_helpers.jinja' as helpers with context %}
apiVersion: v1
kind: Secret
metadata:
  namespace: {{ namespace }}
  name: regcred
  labels:
    name: {{ namespace }}
    {{ helpers.common_labels() | indent(4) }}
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: {{ options.dockerConfigJson | b64encode }}
{% if options.tlsCertificate %}
---
apiVersion: v1
kind: Secret
metadata:
  namespace: {{ namespace }}
  name: cert
  labels:
    name: {{ namespace }}
    {{ helpers.common_labels() | indent(4) }}
data:
  tls.crt: {{ options.tlsCertificate.crt | b64encode }}
  tls.key: {{ options.tlsCertificate.key | b64encode }}
{% endif %}