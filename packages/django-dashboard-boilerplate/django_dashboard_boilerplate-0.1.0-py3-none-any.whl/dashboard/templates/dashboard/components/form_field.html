{% comment %}
Form Field Component

Usage:
{% include 'dashboard/components/form_field.html' with 
    type="text"
    name="username"
    label="Username"
    value=user.username
    placeholder="Enter username"
    required=True
    help_text="Your unique username"
    error=form.username.errors
%}

Parameters:
- type: Field type (text, email, password, number, textarea, select, checkbox, radio, file) - default: text
- name: Field name (required)
- id: Field id (defaults to name if not provided)
- label: Field label (required)
- value: Field value (optional)
- placeholder: Field placeholder (optional)
- required: Whether the field is required (default: False)
- disabled: Whether the field is disabled (default: False)
- readonly: Whether the field is readonly (default: False)
- help_text: Help text to display below the field (optional)
- error: Error message to display (optional)
- options: List of options for select, checkbox, radio fields (required for these types)
- rows: Number of rows for textarea (default: 3)
- min, max, step: For number inputs (optional)
{% endcomment %}

{% if not name %}
    {% comment %}Ensure name is provided{% endcomment %}
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
        Error: 'name' parameter is required for form_field component
    </div>
{% else %}
    <div class="mb-4">
        {% if type != 'checkbox' and type != 'radio' %}
            <label for="{{ id|default:name }}" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                {{ label }}{% if required %} <span class="text-red-500">*</span>{% endif %}
            </label>
        {% endif %}
        
        {% if type == 'textarea' %}
            <textarea 
                id="{{ id|default:name }}" 
                name="{{ name }}" 
                rows="{{ rows|default:3 }}" 
                class="block w-full px-3 py-2 border {% if error %}border-red-300 dark:border-red-600{% else %}border-gray-300 dark:border-gray-600{% endif %} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:focus:ring-primary-400 dark:focus:border-primary-400 dark:bg-gray-700 dark:text-white sm:text-sm"
                placeholder="{{ placeholder|default:'' }}"
                {% if required %}required{% endif %}
                {% if disabled %}disabled{% endif %}
                {% if readonly %}readonly{% endif %}
            >{{ value|default:'' }}</textarea>
        
        {% elif type == 'select' %}
            <select 
                id="{{ id|default:name }}" 
                name="{{ name }}" 
                class="block w-full px-3 py-2 border {% if error %}border-red-300 dark:border-red-600{% else %}border-gray-300 dark:border-gray-600{% endif %} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:focus:ring-primary-400 dark:focus:border-primary-400 dark:bg-gray-700 dark:text-white sm:text-sm"
                {% if required %}required{% endif %}
                {% if disabled %}disabled{% endif %}
            >
                {% if placeholder %}
                    <option value="">{{ placeholder }}</option>
                {% endif %}
                
                {% for option in options %}
                    {% if option.value %}
                        <option value="{{ option.value }}" {% if option.value == value %}selected{% endif %}>{{ option.label }}</option>
                    {% else %}
                        <option value="{{ option }}" {% if option == value %}selected{% endif %}>{{ option }}</option>
                    {% endif %}
                {% endfor %}
            </select>
        
        {% elif type == 'checkbox' %}
            <div class="flex items-start">
                <div class="flex items-center h-5">
                    <input 
                        type="checkbox" 
                        id="{{ id|default:name }}" 
                        name="{{ name }}" 
                        value="1"
                        {% if value %}checked{% endif %}
                        {% if required %}required{% endif %}
                        {% if disabled %}disabled{% endif %}
                        class="h-4 w-4 text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-400 border-gray-300 dark:border-gray-600 rounded"
                    >
                </div>
                <div class="ml-3 text-sm">
                    <label for="{{ id|default:name }}" class="font-medium text-gray-700 dark:text-gray-300">{{ label }}</label>
                    {% if help_text %}
                        <p class="text-gray-500 dark:text-gray-400">{{ help_text }}</p>
                    {% endif %}
                </div>
            </div>
        
        {% elif type == 'radio' %}
            <fieldset>
                <legend class="text-sm font-medium text-gray-700 dark:text-gray-300">{{ label }}</legend>
                <div class="mt-2 space-y-2">
                    {% for option in options %}
                        <div class="flex items-center">
                            <input 
                                type="radio" 
                                id="{{ id|default:name }}-{{ forloop.counter }}" 
                                name="{{ name }}" 
                                value="{% if option.value %}{{ option.value }}{% else %}{{ option }}{% endif %}"
                                {% if option.value == value or option == value %}checked{% endif %}
                                {% if required %}required{% endif %}
                                {% if disabled %}disabled{% endif %}
                                class="h-4 w-4 text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-400 border-gray-300 dark:border-gray-600"
                            >
                            <label for="{{ id|default:name }}-{{ forloop.counter }}" class="ml-3 text-sm font-medium text-gray-700 dark:text-gray-300">
                                {% if option.label %}{{ option.label }}{% else %}{{ option }}{% endif %}
                            </label>
                        </div>
                    {% endfor %}
                </div>
            </fieldset>
        
        {% elif type == 'file' %}
            <div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 dark:border-gray-600 border-dashed rounded-md">
                <div class="space-y-1 text-center">
                    <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <div class="flex text-sm text-gray-600 dark:text-gray-400">
                        <label for="{{ id|default:name }}" class="relative cursor-pointer bg-white dark:bg-gray-700 rounded-md font-medium text-primary-600 dark:text-primary-400 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500 dark:focus:ring-offset-gray-800">
                            <span>Upload a file</span>
                            <input 
                                id="{{ id|default:name }}" 
                                name="{{ name }}" 
                                type="file" 
                                class="sr-only"
                                {% if required %}required{% endif %}
                                {% if disabled %}disabled{% endif %}
                            >
                        </label>
                        <p class="pl-1">or drag and drop</p>
                    </div>
                    <p class="text-xs text-gray-500 dark:text-gray-400">
                        {{ help_text|default:'PNG, JPG, GIF up to 10MB' }}
                    </p>
                </div>
            </div>
        
        {% else %}
            <input 
                type="{{ type|default:'text' }}" 
                id="{{ id|default:name }}" 
                name="{{ name }}" 
                value="{{ value|default:'' }}" 
                class="block w-full px-3 py-2 border {% if error %}border-red-300 dark:border-red-600{% else %}border-gray-300 dark:border-gray-600{% endif %} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:focus:ring-primary-400 dark:focus:border-primary-400 dark:bg-gray-700 dark:text-white sm:text-sm"
                placeholder="{{ placeholder|default:'' }}"
                {% if required %}required{% endif %}
                {% if disabled %}disabled{% endif %}
                {% if readonly %}readonly{% endif %}
                {% if type == 'number' %}
                    {% if min %}min="{{ min }}"{% endif %}
                    {% if max %}max="{{ max }}"{% endif %}
                    {% if step %}step="{{ step }}"{% endif %}
                {% endif %}
            >
        {% endif %}
        
        {% if help_text and type != 'checkbox' and type != 'file' %}
            <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">{{ help_text }}</p>
        {% endif %}
        
        {% if error %}
            <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ error }}</p>
        {% endif %}
    </div>
{% endif %}
