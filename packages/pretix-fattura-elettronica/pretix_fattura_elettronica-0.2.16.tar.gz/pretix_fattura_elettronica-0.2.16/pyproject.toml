[project]
name = "pretix-fattura-elettronica"
description = "Plugin for Italian Electronic Invoices"
readme = "README.md"
keywords = [
    "pretix",
]
version = "0.2.16"
requires-python = ">=3.8"
authors = [
    { name = "Python Italia", email = "info@pycon.it" },
]
maintainers = [
    { name = "Python Italia", email = "info@pycon.it" },
]
dependencies = [
    "pydantic>=2.5.1",
    "python-codicefiscale>=0.9.0",
    "httpx>=0.25.2",
    "respx>=0.20.2",
    "unidecode>=1.3.7",
]

[project.license]
text = "Apache"

[project.optional-dependencies]
dev = [
    "pytest",
    "pytest-django",
    "django",
    "django-rest-framework",
    "pretix",
    "django-countries>=7.5.1",
    "pytest-icdiff>=0.8",
    "time-machine>=2.14.0",
    "devtools>=0.12.2",
    "setuptools>=69.2.0",
    "pdbpp>=0.10.3",
    "inline-snapshot>=0.10.2",
]

[project.entry-points."pretix.plugin"]
pretix_fattura_elettronica = "pretix_fattura_elettronica:PretixPluginMeta"

[project.entry-points."distutils.commands"]
build = "pretix_plugin_build.build:CustomBuild"

[project.urls]
homepage = "https://github.com/pythonitalia/pretix-fattura-elettronica"
repository = "https://github.com/pythonitalia/pretix-fattura-elettronica"

[tool.pdm.build]
includes = [
    "pretix_fattura_elettronica",
]

[tool.pdm.scripts]
test = "pytest"

[tool.ruff]
target-version = "py38"
select = [
    "E",
    "I",
    "UP",
    "F",
]
ignore = [
    "E501",
]

[tool.ruff.lint.isort]
extra-standard-library = [
    "typing_extensions",
]
known-first-party = [
    "strawberry",
]
known-third-party = [
    "pretix",
]
required-imports = [
    "from __future__ import annotations",
]
section-order = [
    "future",
    "standard-library",
    "first-party",
    "django",
    "third-party",
    "local-folder",
]

[tool.ruff.lint.isort.sections]
django = [
    "django",
]

[tool.pyright]
strict = true
reportMissingTypeStubs = false

[tool.pytest.ini_options]
DJANGO_SETTINGS_MODULE = "pretix.testutils.settings"
filterwarnings = [
    "ignore::DeprecationWarning:pycountry.*",
    "ignore::DeprecationWarning:vat_moss.*",
    "ignore::DeprecationWarning:django_filters.*",
    "ignore::DeprecationWarning:dateutil.*",
    "ignore::DeprecationWarning:reportlab.*",
    "ignore::DeprecationWarning:importlib.*",
    "ignore::DeprecationWarning:google.protobuf.*",
]

[build-system]
requires = [
    "pdm-backend",
    "pretix-plugin-build",
]
build-backend = "pdm.backend"
