(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["packages_running_lib_index_js-_42fe0"],{

/***/ "../packages/running/lib/index.js":
/*!****************************************!*\
  !*** ../packages/running/lib/index.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IRunningSessionManagers": () => (/* binding */ IRunningSessionManagers),
/* harmony export */   "RunningSessionManagers": () => (/* binding */ RunningSessionManagers),
/* harmony export */   "RunningSessions": () => (/* binding */ RunningSessions)
/* harmony export */ });
/* harmony import */ var _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @jupyterlab/apputils */ "webpack/sharing/consume/default/@jupyterlab/apputils/@jupyterlab/apputils");
/* harmony import */ var _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @jupyterlab/translation */ "webpack/sharing/consume/default/@jupyterlab/translation/@jupyterlab/translation");
/* harmony import */ var _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @jupyterlab/ui-components */ "webpack/sharing/consume/default/@jupyterlab/ui-components/@jupyterlab/ui-components");
/* harmony import */ var _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lumino_coreutils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lumino/coreutils */ "webpack/sharing/consume/default/@lumino/coreutils/@lumino/coreutils");
/* harmony import */ var _lumino_coreutils__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_lumino_coreutils__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lumino_disposable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lumino/disposable */ "webpack/sharing/consume/default/@lumino/disposable/@lumino/disposable");
/* harmony import */ var _lumino_disposable__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_lumino_disposable__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "webpack/sharing/consume/default/react/react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
// Copyright (c) Jupyter Development Team.
// Distributed under the terms of the Modified BSD License.
/**
 * @packageDocumentation
 * @module running
 */






/**
 * The class name added to a running widget.
 */
const RUNNING_CLASS = 'jp-RunningSessions';
/**
 * The class name added to a running widget header.
 */
const HEADER_CLASS = 'jp-RunningSessions-header';
/**
 * The class name added to the running terminal sessions section.
 */
const SECTION_CLASS = 'jp-RunningSessions-section';
/**
 * The class name added to the running sessions section header.
 */
const SECTION_HEADER_CLASS = 'jp-RunningSessions-sectionHeader';
/**
 * The class name added to a section container.
 */
const CONTAINER_CLASS = 'jp-RunningSessions-sectionContainer';
/**
 * The class name added to the running kernel sessions section list.
 */
const LIST_CLASS = 'jp-RunningSessions-sectionList';
/**
 * The class name added to the running sessions items.
 */
const ITEM_CLASS = 'jp-RunningSessions-item';
/**
 * The class name added to a running session item label.
 */
const ITEM_LABEL_CLASS = 'jp-RunningSessions-itemLabel';
/**
 * The class name added to a running session item detail.
 */
const ITEM_DETAIL_CLASS = 'jp-RunningSessions-itemDetail';
/**
 * The class name added to a running session item shutdown button.
 */
const SHUTDOWN_BUTTON_CLASS = 'jp-RunningSessions-itemShutdown';
/**
 * The class name added to a running session item shutdown button.
 */
const SHUTDOWN_ALL_BUTTON_CLASS = 'jp-RunningSessions-shutdownAll';
/* tslint:disable */
/**
 * The running sessions token.
 */
const IRunningSessionManagers = new _lumino_coreutils__WEBPACK_IMPORTED_MODULE_3__.Token('@jupyterlab/running:IRunningSessionManagers');
class RunningSessionManagers {
    constructor() {
        this._managers = [];
    }
    /**
     * Add a running item manager.
     *
     * @param manager - The running item manager.
     *
     */
    add(manager) {
        this._managers.push(manager);
        return new _lumino_disposable__WEBPACK_IMPORTED_MODULE_4__.DisposableDelegate(() => {
            const i = this._managers.indexOf(manager);
            if (i > -1) {
                this._managers.splice(i, 1);
            }
        });
    }
    /**
     * Return an iterator of launcher items.
     */
    items() {
        return this._managers;
    }
}
function Item(props) {
    var _a;
    const { runningItem } = props;
    const icon = runningItem.icon();
    const detail = (_a = runningItem.detail) === null || _a === void 0 ? void 0 : _a.call(runningItem);
    const translator = props.translator || _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__.nullTranslator;
    const trans = translator.load('jupyterlab');
    const shutdownLabel = props.shutdownLabel || trans.__('Shut Down');
    const shutdownItemIcon = props.shutdownItemIcon || _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__.closeIcon;
    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement("li", { className: ITEM_CLASS },
        react__WEBPACK_IMPORTED_MODULE_5__.createElement(icon.react, { tag: "span", stylesheet: "runningItem" }),
        react__WEBPACK_IMPORTED_MODULE_5__.createElement("span", { className: ITEM_LABEL_CLASS, title: runningItem.labelTitle ? runningItem.labelTitle() : '', onClick: () => runningItem.open() }, runningItem.label()),
        detail && react__WEBPACK_IMPORTED_MODULE_5__.createElement("span", { className: ITEM_DETAIL_CLASS }, detail),
        react__WEBPACK_IMPORTED_MODULE_5__.createElement(_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.ToolbarButtonComponent, { className: SHUTDOWN_BUTTON_CLASS, icon: shutdownItemIcon, onClick: () => runningItem.shutdown(), tooltip: shutdownLabel })));
}
function ListView(props) {
    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement("ul", { className: LIST_CLASS }, props.runningItems.map((item, i) => (react__WEBPACK_IMPORTED_MODULE_5__.createElement(Item, { key: i, runningItem: item, shutdownLabel: props.shutdownLabel, shutdownItemIcon: props.shutdownItemIcon, translator: props.translator })))));
}
function List(props) {
    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement(_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.UseSignal, { signal: props.manager.runningChanged }, () => (react__WEBPACK_IMPORTED_MODULE_5__.createElement(ListView, { runningItems: props.manager.running(), shutdownLabel: props.shutdownLabel, shutdownAllLabel: props.shutdownAllLabel, shutdownItemIcon: props.manager.shutdownItemIcon, translator: props.translator }))));
}
/**
 * The Section component contains the shared look and feel for an interactive
 * list of kernels and sessions.
 *
 * It is specialized for each based on its props.
 */
function Section(props) {
    const translator = props.translator || _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__.nullTranslator;
    const trans = translator.load('jupyterlab');
    const shutdownAllLabel = props.manager.shutdownAllLabel || trans.__('Shut Down All');
    const shutdownTitle = `${shutdownAllLabel}?`;
    const shutdownAllConfirmationText = props.manager.shutdownAllConfirmationText ||
        `${shutdownAllLabel} ${props.manager.name}`;
    function onShutdown() {
        void (0,_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.showDialog)({
            title: shutdownTitle,
            body: shutdownAllConfirmationText,
            buttons: [
                _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.Dialog.cancelButton({ label: trans.__('Cancel') }),
                _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.Dialog.warnButton({ label: shutdownAllLabel })
            ]
        }).then(result => {
            if (result.button.accept) {
                props.manager.shutdownAll();
            }
        });
    }
    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", { className: SECTION_CLASS },
        react__WEBPACK_IMPORTED_MODULE_5__.createElement(react__WEBPACK_IMPORTED_MODULE_5__.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", { className: `${SECTION_HEADER_CLASS} jp-stack-panel-header` },
                react__WEBPACK_IMPORTED_MODULE_5__.createElement("h2", null, props.manager.name),
                react__WEBPACK_IMPORTED_MODULE_5__.createElement(_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.UseSignal, { signal: props.manager.runningChanged }, () => {
                    const disabled = props.manager.running().length === 0;
                    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement("button", { className: `${SHUTDOWN_ALL_BUTTON_CLASS} jp-mod-styled ${disabled && 'jp-mod-disabled'}`, disabled: disabled, onClick: onShutdown }, shutdownAllLabel));
                })),
            react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", { className: CONTAINER_CLASS },
                react__WEBPACK_IMPORTED_MODULE_5__.createElement(List, { manager: props.manager, shutdownLabel: props.manager.shutdownLabel, shutdownAllLabel: shutdownAllLabel, translator: props.translator })))));
}
function RunningSessionsComponent(props) {
    const translator = props.translator || _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__.nullTranslator;
    const trans = translator.load('jupyterlab');
    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement(react__WEBPACK_IMPORTED_MODULE_5__.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", { className: HEADER_CLASS },
            react__WEBPACK_IMPORTED_MODULE_5__.createElement(_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.ToolbarButtonComponent, { tooltip: trans.__('Refresh List'), icon: _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__.refreshIcon, onClick: () => props.managers.items().forEach(manager => manager.refreshRunning()) })),
        props.managers.items().map(manager => (react__WEBPACK_IMPORTED_MODULE_5__.createElement(Section, { key: manager.name, manager: manager, translator: props.translator })))));
}
/**
 * A class that exposes the running terminal and kernel sessions.
 */
class RunningSessions extends _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.ReactWidget {
    /**
     * Construct a new running widget.
     */
    constructor(managers, translator) {
        super();
        this.managers = managers;
        this.translator = translator || _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__.nullTranslator;
        // this can't be in the react element, because then it would be too nested
        this.addClass(RUNNING_CLASS);
    }
    render() {
        return (react__WEBPACK_IMPORTED_MODULE_5__.createElement(RunningSessionsComponent, { managers: this.managers, translator: this.translator }));
    }
}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi4vcGFja2FnZXMvcnVubmluZy9zcmMvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDBDQUEwQztBQUMxQywyREFBMkQ7QUFDM0Q7OztHQUdHO0FBUTJCO0FBQ3dDO0FBQ007QUFDbEM7QUFDMkI7QUFFdEM7QUFFL0I7O0dBRUc7QUFDSCxNQUFNLGFBQWEsR0FBRyxvQkFBb0IsQ0FBQztBQUUzQzs7R0FFRztBQUNILE1BQU0sWUFBWSxHQUFHLDJCQUEyQixDQUFDO0FBRWpEOztHQUVHO0FBQ0gsTUFBTSxhQUFhLEdBQUcsNEJBQTRCLENBQUM7QUFFbkQ7O0dBRUc7QUFDSCxNQUFNLG9CQUFvQixHQUFHLGtDQUFrQyxDQUFDO0FBRWhFOztHQUVHO0FBQ0gsTUFBTSxlQUFlLEdBQUcscUNBQXFDLENBQUM7QUFFOUQ7O0dBRUc7QUFDSCxNQUFNLFVBQVUsR0FBRyxnQ0FBZ0MsQ0FBQztBQUVwRDs7R0FFRztBQUNILE1BQU0sVUFBVSxHQUFHLHlCQUF5QixDQUFDO0FBRTdDOztHQUVHO0FBQ0gsTUFBTSxnQkFBZ0IsR0FBRyw4QkFBOEIsQ0FBQztBQUV4RDs7R0FFRztBQUNILE1BQU0saUJBQWlCLEdBQUcsK0JBQStCLENBQUM7QUFFMUQ7O0dBRUc7QUFDSCxNQUFNLHFCQUFxQixHQUFHLGlDQUFpQyxDQUFDO0FBRWhFOztHQUVHO0FBQ0gsTUFBTSx5QkFBeUIsR0FBRyxnQ0FBZ0MsQ0FBQztBQUVuRSxvQkFBb0I7QUFDcEI7O0dBRUc7QUFDSSxNQUFNLHVCQUF1QixHQUFHLElBQUksb0RBQUssQ0FDOUMsNkNBQTZDLENBQzlDLENBQUM7QUFvQkssTUFBTSxzQkFBc0I7SUFBbkM7UUF5QlUsY0FBUyxHQUFnQyxFQUFFLENBQUM7SUFDdEQsQ0FBQztJQXpCQzs7Ozs7T0FLRztJQUNILEdBQUcsQ0FBQyxPQUFrQztRQUNw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LEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsRUFDakMsSUFBSSxFQUFFLGtFQUFXLEVBQ2pCLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FDWixLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsQ0FBQyxHQUVyRSxDQUNFO1FBQ0wsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUNyQyxpREFBQyxPQUFPLElBQ04sR0FBRyxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQ2pCLE9BQU8sRUFBRSxPQUFPLEVBQ2hCLFVBQVUsRUFBRSxLQUFLLENBQUMsVUFBVSxHQUM1QixDQUNILENBQUMsQ0FDRCxDQUNKLENBQUM7QUFDSixDQUFDO0FBRUQ7O0dBRUc7QUFDSSxNQUFNLGVBQWdCLFNBQVEsNkRBQVc7SUFDOUM7O09BRUc7SUFDSCxZQUFZLFFBQWlDLEVBQUUsVUFBd0I7UUFDckUsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUN6QixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsSUFBSSxtRUFBYyxDQUFDO1FBRS9DLDBFQUEwRTtRQUMxRSxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFUyxNQUFNO1FBQ2QsT0FBTyxDQUNMLGlEQUFDLHdCQUF3QixJQUN2QixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFDdkIsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLEdBQzNCLENBQ0gsQ0FBQztJQUNKLENBQUM7Q0FJRiIsImZpbGUiOiJwYWNrYWdlc19ydW5uaW5nX2xpYl9pbmRleF9qcy1fNDJmZTAuYzczZDhlNDIyOGUzMjAwMzIwNGYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIEp1cHl0ZXIgRGV2ZWxvcG1lbnQgVGVhbS5cbi8vIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTW9kaWZpZWQgQlNEIExpY2Vuc2UuXG4vKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBydW5uaW5nXG4gKi9cblxuaW1wb3J0IHtcbiAgRGlhbG9nLFxuICBSZWFjdFdpZGdldCxcbiAgc2hvd0RpYWxvZyxcbiAgVG9vbGJhckJ1dHRvbkNvbXBvbmVudCxcbiAgVXNlU2lnbmFsXG59IGZyb20gJ0BqdXB5dGVybGFiL2FwcHV0aWxzJztcbmltcG9ydCB7IElUcmFuc2xhdG9yLCBudWxsVHJhbnNsYXRvciB9IGZyb20gJ0BqdXB5dGVybGFiL3RyYW5zbGF0aW9uJztcbmltcG9ydCB7IGNsb3NlSWNvbiwgTGFiSWNvbiwgcmVmcmVzaEljb24gfSBmcm9tICdAanVweXRlcmxhYi91aS1jb21wb25lbnRzJztcbmltcG9ydCB7IFRva2VuIH0gZnJvbSAnQGx1bWluby9jb3JldXRpbHMnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZURlbGVnYXRlLCBJRGlzcG9zYWJsZSB9IGZyb20gJ0BsdW1pbm8vZGlzcG9zYWJsZSc7XG5pbXBvcnQgeyBJU2lnbmFsIH0gZnJvbSAnQGx1bWluby9zaWduYWxpbmcnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBuYW1lIGFkZGVkIHRvIGEgcnVubmluZyB3aWRnZXQuXG4gKi9cbmNvbnN0IFJVTk5JTkdfQ0xBU1MgPSAnanAtUnVubmluZ1Nlc3Npb25zJztcblxuLyoqXG4gKiBUaGUgY2xhc3MgbmFtZSBhZGRlZCB0byBhIHJ1bm5pbmcgd2lkZ2V0IGhlYWRlci5cbiAqL1xuY29uc3QgSEVBREVSX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1oZWFkZXInO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBuYW1lIGFkZGVkIHRvIHRoZSBydW5uaW5nIHRlcm1pbmFsIHNlc3Npb25zIHNlY3Rpb24uXG4gKi9cbmNvbnN0IFNFQ1RJT05fQ0xBU1MgPSAnanAtUnVubmluZ1Nlc3Npb25zLXNlY3Rpb24nO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBuYW1lIGFkZGVkIHRvIHRoZSBydW5uaW5nIHNlc3Npb25zIHNlY3Rpb24gaGVhZGVyLlxuICovXG5jb25zdCBTRUNUSU9OX0hFQURFUl9DTEFTUyA9ICdqcC1SdW5uaW5nU2Vzc2lvbnMtc2VjdGlvbkhlYWRlcic7XG5cbi8qKlxuICogVGhlIGNsYXNzIG5hbWUgYWRkZWQgdG8gYSBzZWN0aW9uIGNvbnRhaW5lci5cbiAqL1xuY29uc3QgQ09OVEFJTkVSX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1zZWN0aW9uQ29udGFpbmVyJztcblxuLyoqXG4gKiBUaGUgY2xhc3MgbmFtZSBhZGRlZCB0byB0aGUgcnVubmluZyBrZXJuZWwgc2Vzc2lvbnMgc2VjdGlvbiBsaXN0LlxuICovXG5jb25zdCBMSVNUX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1zZWN0aW9uTGlzdCc7XG5cbi8qKlxuICogVGhlIGNsYXNzIG5hbWUgYWRkZWQgdG8gdGhlIHJ1bm5pbmcgc2Vzc2lvbnMgaXRlbXMuXG4gKi9cbmNvbnN0IElURU1fQ0xBU1MgPSAnanAtUnVubmluZ1Nlc3Npb25zLWl0ZW0nO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBuYW1lIGFkZGVkIHRvIGEgcnVubmluZyBzZXNzaW9uIGl0ZW0gbGFiZWwuXG4gKi9cbmNvbnN0IElURU1fTEFCRUxfQ0xBU1MgPSAnanAtUnVubmluZ1Nlc3Npb25zLWl0ZW1MYWJlbCc7XG5cbi8qKlxuICogVGhlIGNsYXNzIG5hbWUgYWRkZWQgdG8gYSBydW5uaW5nIHNlc3Npb24gaXRlbSBkZXRhaWwuXG4gKi9cbmNvbnN0IElURU1fREVUQUlMX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1pdGVtRGV0YWlsJztcblxuLyoqXG4gKiBUaGUgY2xhc3MgbmFtZSBhZGRlZCB0byBhIHJ1bm5pbmcgc2Vzc2lvbiBpdGVtIHNodXRkb3duIGJ1dHRvbi5cbiAqL1xuY29uc3QgU0hVVERPV05fQlVUVE9OX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1pdGVtU2h1dGRvd24nO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBuYW1lIGFkZGVkIHRvIGEgcnVubmluZyBzZXNzaW9uIGl0ZW0gc2h1dGRvd24gYnV0dG9uLlxuICovXG5jb25zdCBTSFVURE9XTl9BTExfQlVUVE9OX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1zaHV0ZG93bkFsbCc7XG5cbi8qIHRzbGludDpkaXNhYmxlICovXG4vKipcbiAqIFRoZSBydW5uaW5nIHNlc3Npb25zIHRva2VuLlxuICovXG5leHBvcnQgY29uc3QgSVJ1bm5pbmdTZXNzaW9uTWFuYWdlcnMgPSBuZXcgVG9rZW48SVJ1bm5pbmdTZXNzaW9uTWFuYWdlcnM+KFxuICAnQGp1cHl0ZXJsYWIvcnVubmluZzpJUnVubmluZ1Nlc3Npb25NYW5hZ2Vycydcbik7XG4vKiB0c2xpbnQ6ZW5hYmxlICovXG5cbi8qKlxuICogVGhlIHJ1bm5pbmcgaW50ZXJmYWNlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElSdW5uaW5nU2Vzc2lvbk1hbmFnZXJzIHtcbiAgLyoqXG4gICAqIEFkZCBhIHJ1bm5pbmcgaXRlbSBtYW5hZ2VyLlxuICAgKlxuICAgKiBAcGFyYW0gbWFuYWdlciAtIFRoZSBydW5uaW5nIGl0ZW0gbWFuYWdlci5cbiAgICpcbiAgICovXG4gIGFkZChtYW5hZ2VyOiBJUnVubmluZ1Nlc3Npb25zLklNYW5hZ2VyKTogSURpc3Bvc2FibGU7XG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgbWFuYWdlcnMuXG4gICAqL1xuICBpdGVtcygpOiBSZWFkb25seUFycmF5PElSdW5uaW5nU2Vzc2lvbnMuSU1hbmFnZXI+O1xufVxuXG5leHBvcnQgY2xhc3MgUnVubmluZ1Nlc3Npb25NYW5hZ2VycyBpbXBsZW1lbnRzIElSdW5uaW5nU2Vzc2lvbk1hbmFnZXJzIHtcbiAgLyoqXG4gICAqIEFkZCBhIHJ1bm5pbmcgaXRlbSBtYW5hZ2VyLlxuICAgKlxuICAgKiBAcGFyYW0gbWFuYWdlciAtIFRoZSBydW5uaW5nIGl0ZW0gbWFuYWdlci5cbiAgICpcbiAgICovXG4gIGFkZChtYW5hZ2VyOiBJUnVubmluZ1Nlc3Npb25zLklNYW5hZ2VyKTogSURpc3Bvc2FibGUge1xuICAgIHRoaXMuX21hbmFnZXJzLnB1c2gobWFuYWdlcik7XG4gICAgcmV0dXJuIG5ldyBEaXNwb3NhYmxlRGVsZWdhdGUoKCkgPT4ge1xuICAgICAgY29uc3QgaSA9IHRoaXMuX21hbmFnZXJzLmluZGV4T2YobWFuYWdlcik7XG5cbiAgICAgIGlmIChpID4gLTEpIHtcbiAgICAgICAgdGhpcy5fbWFuYWdlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBpdGVyYXRvciBvZiBsYXVuY2hlciBpdGVtcy5cbiAgICovXG4gIGl0ZW1zKCk6IFJlYWRvbmx5QXJyYXk8SVJ1bm5pbmdTZXNzaW9ucy5JTWFuYWdlcj4ge1xuICAgIHJldHVybiB0aGlzLl9tYW5hZ2VycztcbiAgfVxuXG4gIHByaXZhdGUgX21hbmFnZXJzOiBJUnVubmluZ1Nlc3Npb25zLklNYW5hZ2VyW10gPSBbXTtcbn1cblxuZnVuY3Rpb24gSXRlbShwcm9wczoge1xuICBydW5uaW5nSXRlbTogSVJ1bm5pbmdTZXNzaW9ucy5JUnVubmluZ0l0ZW07XG4gIHNodXRkb3duTGFiZWw/OiBzdHJpbmc7XG4gIHNodXRkb3duSXRlbUljb24/OiBMYWJJY29uO1xuICB0cmFuc2xhdG9yPzogSVRyYW5zbGF0b3I7XG59KSB7XG4gIGNvbnN0IHsgcnVubmluZ0l0ZW0gfSA9IHByb3BzO1xuICBjb25zdCBpY29uID0gcnVubmluZ0l0ZW0uaWNvbigpO1xuICBjb25zdCBkZXRhaWwgPSBydW5uaW5nSXRlbS5kZXRhaWw/LigpO1xuICBjb25zdCB0cmFuc2xhdG9yID0gcHJvcHMudHJhbnNsYXRvciB8fCBudWxsVHJhbnNsYXRvcjtcbiAgY29uc3QgdHJhbnMgPSB0cmFuc2xhdG9yLmxvYWQoJ2p1cHl0ZXJsYWInKTtcbiAgY29uc3Qgc2h1dGRvd25MYWJlbCA9IHByb3BzLnNodXRkb3duTGFiZWwgfHwgdHJhbnMuX18oJ1NodXQgRG93bicpO1xuICBjb25zdCBzaHV0ZG93bkl0ZW1JY29uID0gcHJvcHMuc2h1dGRvd25JdGVtSWNvbiB8fCBjbG9zZUljb247XG5cbiAgcmV0dXJuIChcbiAgICA8bGkgY2xhc3NOYW1lPXtJVEVNX0NMQVNTfT5cbiAgICAgIDxpY29uLnJlYWN0IHRhZz1cInNwYW5cIiBzdHlsZXNoZWV0PVwicnVubmluZ0l0ZW1cIiAvPlxuICAgICAgPHNwYW5cbiAgICAgICAgY2xhc3NOYW1lPXtJVEVNX0xBQkVMX0NMQVNTfVxuICAgICAgICB0aXRsZT17cnVubmluZ0l0ZW0ubGFiZWxUaXRsZSA/IHJ1bm5pbmdJdGVtLmxhYmVsVGl0bGUoKSA6ICcnfVxuICAgICAgICBvbkNsaWNrPXsoKSA9PiBydW5uaW5nSXRlbS5vcGVuKCl9XG4gICAgICA+XG4gICAgICAgIHtydW5uaW5nSXRlbS5sYWJlbCgpfVxuICAgICAgPC9zcGFuPlxuICAgICAge2RldGFpbCAmJiA8c3BhbiBjbGFzc05hbWU9e0lURU1fREVUQUlMX0NMQVNTfT57ZGV0YWlsfTwvc3Bhbj59XG4gICAgICA8VG9vbGJhckJ1dHRvbkNvbXBvbmVudFxuICAgICAgICBjbGFzc05hbWU9e1NIVVRET1dOX0JVVFRPTl9DTEFTU31cbiAgICAgICAgaWNvbj17c2h1dGRvd25JdGVtSWNvbn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gcnVubmluZ0l0ZW0uc2h1dGRvd24oKX1cbiAgICAgICAgdG9vbHRpcD17c2h1dGRvd25MYWJlbH1cbiAgICAgIC8+XG4gICAgPC9saT5cbiAgKTtcbn1cblxuZnVuY3Rpb24gTGlzdFZpZXcocHJvcHM6IHtcbiAgcnVubmluZ0l0ZW1zOiBJUnVubmluZ1Nlc3Npb25zLklSdW5uaW5nSXRlbVtdO1xuICBzaHV0ZG93bkxhYmVsPzogc3RyaW5nO1xuICBzaHV0ZG93bkFsbExhYmVsPzogc3RyaW5nO1xuICBzaHV0ZG93bkl0ZW1JY29uPzogTGFiSWNvbjtcbiAgdHJhbnNsYXRvcj86IElUcmFuc2xhdG9yO1xufSkge1xuICByZXR1cm4gKFxuICAgIDx1bCBjbGFzc05hbWU9e0xJU1RfQ0xBU1N9PlxuICAgICAge3Byb3BzLnJ1bm5pbmdJdGVtcy5tYXAoKGl0ZW0sIGkpID0+IChcbiAgICAgICAgPEl0ZW1cbiAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgcnVubmluZ0l0ZW09e2l0ZW19XG4gICAgICAgICAgc2h1dGRvd25MYWJlbD17cHJvcHMuc2h1dGRvd25MYWJlbH1cbiAgICAgICAgICBzaHV0ZG93bkl0ZW1JY29uPXtwcm9wcy5zaHV0ZG93bkl0ZW1JY29ufVxuICAgICAgICAgIHRyYW5zbGF0b3I9e3Byb3BzLnRyYW5zbGF0b3J9XG4gICAgICAgIC8+XG4gICAgICApKX1cbiAgICA8L3VsPlxuICApO1xufVxuXG5mdW5jdGlvbiBMaXN0KHByb3BzOiB7XG4gIG1hbmFnZXI6IElSdW5uaW5nU2Vzc2lvbnMuSU1hbmFnZXI7XG4gIHNodXRkb3duTGFiZWw/OiBzdHJpbmc7XG4gIHNodXRkb3duQWxsTGFiZWw/OiBzdHJpbmc7XG4gIHRyYW5zbGF0b3I/OiBJVHJhbnNsYXRvcjtcbn0pIHtcbiAgcmV0dXJuIChcbiAgICA8VXNlU2lnbmFsIHNpZ25hbD17cHJvcHMubWFuYWdlci5ydW5uaW5nQ2hhbmdlZH0+XG4gICAgICB7KCkgPT4gKFxuICAgICAgICA8TGlzdFZpZXdcbiAgICAgICAgICBydW5uaW5nSXRlbXM9e3Byb3BzLm1hbmFnZXIucnVubmluZygpfVxuICAgICAgICAgIHNodXRkb3duTGFiZWw9e3Byb3BzLnNodXRkb3duTGFiZWx9XG4gICAgICAgICAgc2h1dGRvd25BbGxMYWJlbD17cHJvcHMuc2h1dGRvd25BbGxMYWJlbH1cbiAgICAgICAgICBzaHV0ZG93bkl0ZW1JY29uPXtwcm9wcy5tYW5hZ2VyLnNodXRkb3duSXRlbUljb259XG4gICAgICAgICAgdHJhbnNsYXRvcj17cHJvcHMudHJhbnNsYXRvcn1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgPC9Vc2VTaWduYWw+XG4gICk7XG59XG5cbi8qKlxuICogVGhlIFNlY3Rpb24gY29tcG9uZW50IGNvbnRhaW5zIHRoZSBzaGFyZWQgbG9vayBhbmQgZmVlbCBmb3IgYW4gaW50ZXJhY3RpdmVcbiAqIGxpc3Qgb2Yga2VybmVscyBhbmQgc2Vzc2lvbnMuXG4gKlxuICogSXQgaXMgc3BlY2lhbGl6ZWQgZm9yIGVhY2ggYmFzZWQgb24gaXRzIHByb3BzLlxuICovXG5mdW5jdGlvbiBTZWN0aW9uKHByb3BzOiB7XG4gIG1hbmFnZXI6IElSdW5uaW5nU2Vzc2lvbnMuSU1hbmFnZXI7XG4gIHRyYW5zbGF0b3I/OiBJVHJhbnNsYXRvcjtcbn0pIHtcbiAgY29uc3QgdHJhbnNsYXRvciA9IHByb3BzLnRyYW5zbGF0b3IgfHwgbnVsbFRyYW5zbGF0b3I7XG4gIGNvbnN0IHRyYW5zID0gdHJhbnNsYXRvci5sb2FkKCdqdXB5dGVybGFiJyk7XG4gIGNvbnN0IHNodXRkb3duQWxsTGFiZWwgPVxuICAgIHByb3BzLm1hbmFnZXIuc2h1dGRvd25BbGxMYWJlbCB8fCB0cmFucy5fXygnU2h1dCBEb3duIEFsbCcpO1xuICBjb25zdCBzaHV0ZG93blRpdGxlID0gYCR7c2h1dGRvd25BbGxMYWJlbH0/YDtcbiAgY29uc3Qgc2h1dGRvd25BbGxDb25maXJtYXRpb25UZXh0ID1cbiAgICBwcm9wcy5tYW5hZ2VyLnNodXRkb3duQWxsQ29uZmlybWF0aW9uVGV4dCB8fFxuICAgIGAke3NodXRkb3duQWxsTGFiZWx9ICR7cHJvcHMubWFuYWdlci5uYW1lfWA7XG4gIGZ1bmN0aW9uIG9uU2h1dGRvd24oKSB7XG4gICAgdm9pZCBzaG93RGlhbG9nKHtcbiAgICAgIHRpdGxlOiBzaHV0ZG93blRpdGxlLFxuICAgICAgYm9keTogc2h1dGRvd25BbGxDb25maXJtYXRpb25UZXh0LFxuICAgICAgYnV0dG9uczogW1xuICAgICAgICBEaWFsb2cuY2FuY2VsQnV0dG9uKHsgbGFiZWw6IHRyYW5zLl9fKCdDYW5jZWwnKSB9KSxcbiAgICAgICAgRGlhbG9nLndhcm5CdXR0b24oeyBsYWJlbDogc2h1dGRvd25BbGxMYWJlbCB9KVxuICAgICAgXVxuICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIGlmIChyZXN1bHQuYnV0dG9uLmFjY2VwdCkge1xuICAgICAgICBwcm9wcy5tYW5hZ2VyLnNodXRkb3duQWxsKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtTRUNUSU9OX0NMQVNTfT5cbiAgICAgIDw+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtTRUNUSU9OX0hFQURFUl9DTEFTU30ganAtc3RhY2stcGFuZWwtaGVhZGVyYH0+XG4gICAgICAgICAgPGgyPntwcm9wcy5tYW5hZ2VyLm5hbWV9PC9oMj5cbiAgICAgICAgICA8VXNlU2lnbmFsIHNpZ25hbD17cHJvcHMubWFuYWdlci5ydW5uaW5nQ2hhbmdlZH0+XG4gICAgICAgICAgICB7KCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkaXNhYmxlZCA9IHByb3BzLm1hbmFnZXIucnVubmluZygpLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake1NIVVRET1dOX0FMTF9CVVRUT05fQ0xBU1N9IGpwLW1vZC1zdHlsZWQgJHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQgJiYgJ2pwLW1vZC1kaXNhYmxlZCdcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17b25TaHV0ZG93bn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7c2h1dGRvd25BbGxMYWJlbH1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPC9Vc2VTaWduYWw+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtDT05UQUlORVJfQ0xBU1N9PlxuICAgICAgICAgIDxMaXN0XG4gICAgICAgICAgICBtYW5hZ2VyPXtwcm9wcy5tYW5hZ2VyfVxuICAgICAgICAgICAgc2h1dGRvd25MYWJlbD17cHJvcHMubWFuYWdlci5zaHV0ZG93bkxhYmVsfVxuICAgICAgICAgICAgc2h1dGRvd25BbGxMYWJlbD17c2h1dGRvd25BbGxMYWJlbH1cbiAgICAgICAgICAgIHRyYW5zbGF0b3I9e3Byb3BzLnRyYW5zbGF0b3J9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8Lz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZnVuY3Rpb24gUnVubmluZ1Nlc3Npb25zQ29tcG9uZW50KHByb3BzOiB7XG4gIG1hbmFnZXJzOiBJUnVubmluZ1Nlc3Npb25NYW5hZ2VycztcbiAgdHJhbnNsYXRvcj86IElUcmFuc2xhdG9yO1xufSkge1xuICBjb25zdCB0cmFuc2xhdG9yID0gcHJvcHMudHJhbnNsYXRvciB8fCBudWxsVHJhbnNsYXRvcjtcbiAgY29uc3QgdHJhbnMgPSB0cmFuc2xhdG9yLmxvYWQoJ2p1cHl0ZXJsYWInKTtcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e0hFQURFUl9DTEFTU30+XG4gICAgICAgIDxUb29sYmFyQnV0dG9uQ29tcG9uZW50XG4gICAgICAgICAgdG9vbHRpcD17dHJhbnMuX18oJ1JlZnJlc2ggTGlzdCcpfVxuICAgICAgICAgIGljb249e3JlZnJlc2hJY29ufVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgICBwcm9wcy5tYW5hZ2Vycy5pdGVtcygpLmZvckVhY2gobWFuYWdlciA9PiBtYW5hZ2VyLnJlZnJlc2hSdW5uaW5nKCkpXG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgICB7cHJvcHMubWFuYWdlcnMuaXRlbXMoKS5tYXAobWFuYWdlciA9PiAoXG4gICAgICAgIDxTZWN0aW9uXG4gICAgICAgICAga2V5PXttYW5hZ2VyLm5hbWV9XG4gICAgICAgICAgbWFuYWdlcj17bWFuYWdlcn1cbiAgICAgICAgICB0cmFuc2xhdG9yPXtwcm9wcy50cmFuc2xhdG9yfVxuICAgICAgICAvPlxuICAgICAgKSl9XG4gICAgPC8+XG4gICk7XG59XG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IGV4cG9zZXMgdGhlIHJ1bm5pbmcgdGVybWluYWwgYW5kIGtlcm5lbCBzZXNzaW9ucy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5pbmdTZXNzaW9ucyBleHRlbmRzIFJlYWN0V2lkZ2V0IHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdCBhIG5ldyBydW5uaW5nIHdpZGdldC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG1hbmFnZXJzOiBJUnVubmluZ1Nlc3Npb25NYW5hZ2VycywgdHJhbnNsYXRvcj86IElUcmFuc2xhdG9yKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm1hbmFnZXJzID0gbWFuYWdlcnM7XG4gICAgdGhpcy50cmFuc2xhdG9yID0gdHJhbnNsYXRvciB8fCBudWxsVHJhbnNsYXRvcjtcblxuICAgIC8vIHRoaXMgY2FuJ3QgYmUgaW4gdGhlIHJlYWN0IGVsZW1lbnQsIGJlY2F1c2UgdGhlbiBpdCB3b3VsZCBiZSB0b28gbmVzdGVkXG4gICAgdGhpcy5hZGRDbGFzcyhSVU5OSU5HX0NMQVNTKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxSdW5uaW5nU2Vzc2lvbnNDb21wb25lbnRcbiAgICAgICAgbWFuYWdlcnM9e3RoaXMubWFuYWdlcnN9XG4gICAgICAgIHRyYW5zbGF0b3I9e3RoaXMudHJhbnNsYXRvcn1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgbWFuYWdlcnM6IElSdW5uaW5nU2Vzc2lvbk1hbmFnZXJzO1xuICBwcm90ZWN0ZWQgdHJhbnNsYXRvcjogSVRyYW5zbGF0b3I7XG59XG5cbi8qKlxuICogVGhlIG5hbWVzcGFjZSBmb3IgdGhlIGBJUnVubmluZ1Nlc3Npb25zYCBjbGFzcyBzdGF0aWNzLlxuICovXG5leHBvcnQgbmFtZXNwYWNlIElSdW5uaW5nU2Vzc2lvbnMge1xuICAvKipcbiAgICogQSBtYW5hZ2VyIG9mIHJ1bm5pbmcgaXRlbXMgZ3JvdXBlZCB1bmRlciBhIHNpbmdsZSBzZWN0aW9uLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBJTWFuYWdlciB7XG4gICAgLy8gTmFtZSB0aGF0IGlzIHNob3duIHRvIHRoZSB1c2VyIGluIHBsdXJhbFxuICAgIG5hbWU6IHN0cmluZztcbiAgICAvLyBjYWxsZWQgd2hlbiB0aGUgc2h1dGRvd24gYWxsIGJ1dHRvbiBpcyBwcmVzc2VkXG4gICAgc2h1dGRvd25BbGwoKTogdm9pZDtcbiAgICAvLyBsaXN0IHRoZSBydW5uaW5nIG1vZGVscy5cbiAgICBydW5uaW5nKCk6IElSdW5uaW5nSXRlbVtdO1xuICAgIC8vIEZvcmNlIGEgcmVmcmVzaCBvZiB0aGUgcnVubmluZyBtb2RlbHMuXG4gICAgcmVmcmVzaFJ1bm5pbmcoKTogdm9pZDtcbiAgICAvLyBBIHNpZ25hbCB0aGF0IHNob3VsZCBiZSBlbWl0dGVkIHdoZW4gdGhlIGl0ZW0gbGlzdCBoYXMgY2hhbmdlZC5cbiAgICBydW5uaW5nQ2hhbmdlZDogSVNpZ25hbDxhbnksIGFueT47XG4gICAgLy8gQSBzdHJpbmcgdXNlZCB0byBkZXNjcmliZSB0aGUgc2h1dGRvd24gYWN0aW9uLlxuICAgIHNodXRkb3duTGFiZWw/OiBzdHJpbmc7XG4gICAgLy8gQSBzdHJpbmcgdXNlZCB0byBkZXNjcmliZSB0aGUgc2h1dGRvd24gYWxsIGFjdGlvbi5cbiAgICBzaHV0ZG93bkFsbExhYmVsPzogc3RyaW5nO1xuICAgIC8vIEEgc3RyaW5nIHVzZWQgYXMgdGhlIGJvZHkgdGV4dCBpbiB0aGUgc2h1dGRvd24gYWxsIGNvbmZpcm1hdGlvbiBkaWFsb2cuXG4gICAgc2h1dGRvd25BbGxDb25maXJtYXRpb25UZXh0Pzogc3RyaW5nO1xuICAgIC8vIFRoZSBpY29uIHRvIHNob3cgZm9yIHNodXR0aW5nIGRvd24gYW4gaW5kaXZpZHVhbCBpdGVtIGluIHRoaXMgc2VjdGlvbi5cbiAgICBzaHV0ZG93bkl0ZW1JY29uPzogTGFiSWNvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHJ1bm5pbmcgaXRlbS5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgSVJ1bm5pbmdJdGVtIHtcbiAgICAvLyBjYWxsZWQgd2hlbiB0aGUgcnVubmluZyBpdGVtIGlzIGNsaWNrZWRcbiAgICBvcGVuOiAoKSA9PiB2b2lkO1xuICAgIC8vIGNhbGxlZCB3aGVuIHRoZSBzaHV0ZG93biBidXR0b24gaXMgcHJlc3NlZCBvbiBhIHBhcnRpY3VsYXIgaXRlbVxuICAgIHNodXRkb3duOiAoKSA9PiB2b2lkO1xuICAgIC8vIExhYkljb24gdG8gdXNlIGFzIHRoZSBpY29uXG4gICAgaWNvbjogKCkgPT4gTGFiSWNvbjtcbiAgICAvLyBjYWxsZWQgdG8gZGV0ZXJtaW5lIHRoZSBsYWJlbCBmb3IgZWFjaCBpdGVtXG4gICAgbGFiZWw6ICgpID0+IHN0cmluZztcbiAgICAvLyBjYWxsZWQgdG8gZGV0ZXJtaW5lIHRoZSBgdGl0bGVgIGF0dHJpYnV0ZSBmb3IgZWFjaCBpdGVtLCB3aGljaCBpcyByZXZlYWxlZCBvbiBob3ZlclxuICAgIGxhYmVsVGl0bGU/OiAoKSA9PiBzdHJpbmc7XG4gICAgLy8gY2FsbGVkIHRvIGRldGVybWluZSB0aGUgYGRldGFpbGAgYXR0cmlidXRlIHdoaWNoIGlzIHNob3duIG9wdGlvbmFsbHlcbiAgICAvLyBpbiBhIGNvbHVtbiBhZnRlciB0aGUgbGFiZWxcbiAgICBkZXRhaWw/OiAoKSA9PiBzdHJpbmc7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=