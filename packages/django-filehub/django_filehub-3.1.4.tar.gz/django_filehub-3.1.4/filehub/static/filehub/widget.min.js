window.addEventListener("load",(function(){function e(e){window.onFileHubCallback=(i,n)=>{try{const o=i.file,t=e(`[name="${n}"]`);if(t.length){t.val(o.uri).trigger("change"),e(document).trigger("file_selected",[o,n]);const i=t.closest(".image_picker_container");i.length&&function(e,i){e.addClass("added"),e.find(".image_fill_placeholder").remove(),"images"===i.category?e.append(`\n                    <div class="image_fill_placeholder mt-2">\n                        <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">\n                            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" \n                                  stroke-width="32" d="M368 368L144 144M368 144L144 368"></path>\n                        </svg>\n                        <img src="${i.uri}" style="width:auto;max-width:100%;" alt="Preview File"/>\n                    </div>\n                `):e.append(`\n                    <div class="image_fill_placeholder mt-2" style="border: 2px solid #eeeeee;border-radius: 10px;padding: 10px;">\n                        <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">\n                            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" \n                                  stroke-width="32" d="M368 368L144 144M368 144L144 368"></path>\n                        </svg>\n                        <div class="file_card" style="display: flex;align-items: center;gap: 10px;">\n                            <img style="width:50px;" src="data:image/png;base64,... (shortened for clarity)" alt="File Icon" />\n                            <div class="file_info">\n                                <div class="file_name">${i.display_name}</div>\n                                <div class="file_size" style="color:#ccc;">Size: ${function(e){const i=1024,n=1048576,o=1073741824;return e>=o?(e/o).toFixed(2)+" GB":e>=n?(e/n).toFixed(2)+" MB":e>=i?(e/i).toFixed(2)+" KB":e+" bytes"}(i.size)||"Unknown"}</div>\n                            </div>\n                        </div>\n                    </div>\n                `)}(i,o)}}catch(e){console.log(e)}e.fancybox.close()};const i=e(".openImagePicker");if(i.length)try{i.fancybox({width:900,height:300,type:"iframe",autoScale:!1,autoSize:!1})}catch{}e(document).on("click",".image_picker_container svg",(function(){const i=e(this).closest(".image_picker_container");i.removeClass("added"),i.find(".image_fill_placeholder").remove(),i.find("input,textarea").val("")}))}e(jQuery),e(django.jQuery)}));